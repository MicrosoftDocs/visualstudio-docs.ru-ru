---
title: 'SB8040: для этого проекта требуются библиотеки с устранением рисков Spectre'
description: Эта ошибка возникает, когда требуется использовать библиотеки с устранением рисков Spectre, но такие библиотеки не установлены.
ms.date: 03/30/2021
ms.topic: error-reference
f1_keywords:
- MSB8040
dev_langs:
- C++
author: ghogen
ms.author: ghogen
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: d1a07e630ffcbd68fed3e273d4c46f2d38989917
ms.sourcegitcommit: 80fc9a72e9a1aba2d417dbfee997fab013fc36ac
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/02/2021
ms.locfileid: "106218254"
---
# <a name="msb8040-spectre-mitigated-libraries-are-required-for-this-project"></a>SB8040: для этого проекта требуются библиотеки с устранением рисков Spectre

Эта ошибка возникает, когда требуется использовать библиотеки с устранением рисков Spectre (для свойства **C/C++**  > **Устранение рисков Spectre** не задано значение **Disabled**), но такие библиотеки не установлены.

Чтобы исправить эту ошибку, сначала решите, нужно ли вам устранение рисков Spectre. Сведения об устранении рисков Spectre см. на странице с описанием параметра компилятора [/Qspectre](/cpp/build/reference/qspectre). Если устранение рисков Spectre вам не нужно, отключите эту возможность. Для сборок из командной строки убедитесь, что ни параметр компилятора `/Qspectre`, ни его варианты `/Qspectre-load` и `/Qspectre-load-cf` не используются. Чтобы отключить эту возможность в IDE Visual Studio, откройте окно **Свойства** для своих проектов и на странице свойств **Свойства конфигурации** > **C/C++**  > **Создание кода** задайте для свойства **Устранение рисков Spectre** значение **Отключено**.

![Отключение устранения рисков Spectre в IDE](../media/errors/spectre-disable.png)

 Если вы хотите отключить устранение рисков Spectre, убедитесь, что у вас установлены правильные компоненты компилятора и библиотек с поддержкой устранения рисков Spectre. В Visual Studio Installer выберите **Изменить** и **Отдельные компоненты**. Затем введите "Spectre версии 14.2" для поиска и в разделе **Компилятор, средства сборки и среда выполнения** установите флажки **MSVC версии 142… библиотеки... с устранением рисков Spectre** для всех архитектур, для которых выполняется сборка. Если вы используете ATL или MFC, установите флажки **MFC-библиотека C++ для новейшей версии Build Tools v142 с устранением рисков Spectre** (или подходящая версия для вашего набора средств) для всех архитектур, для которых выполняется сборка.

![Установка библиотеки с устранением рисков Spectre](../media/errors/spectre-install-components.png)

Кроме того, чтобы включить устранение рисков Spectre, используйте один из параметров компилятора `/Qspectre`. Чтобы задать это свойство в IDE Visual Studio, откройте окно **Свойства** для своих проектов и на странице **Свойства конфигурации** > **C/C++**  > **Создание кода** задайте для свойства **Устранение рисков Spectre** значение **Включено** или **Все загрузки** для [/Qspectre-load](/cpp/build/reference/qspectre-load), или **Все операции загрузки потока управления** для [/Qspectre-load-cf](/cpp/build/reference/qspectre-load-cf).

Дополнительные сведения см. в записи блога, посвященной [устранению рисков Spectre в MSVC](https://devblogs.microsoft.com/cppblog/spectre-mitigations-in-msvc/).
