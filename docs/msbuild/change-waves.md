---
title: Изменение волн
description: Узнайте, как включить или отключить функции MSBuild, которые могут привести к нарушению работы.
ms.date: 11/10/2020
ms.topic: conceptual
helpviewer_keywords:
- Change waves [MSBuild]
- MSBuildDisableFeaturesFromVersion environment variable
author: ghogen
ms.author: ghogen
manager: jmartens
monikerRange: '>=vs-2019'
ms.workload:
- multiple
ms.openlocfilehash: 77f93b4741ee987bac871e619ccbe58e2d4d4000
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99939530"
---
# <a name="change-waves"></a>Изменение волн

*Волна изменений* — это набор изменений в поведении в MSBuild, от которых можно явно отказаться, указав определенный флаг в качестве переменной среды. Это необходимо для того, чтобы предупредить об изменениях, которые могут привести к нарушению работы. Это позволяет обеспечить гибкость при адаптации к этим изменениям, прежде чем они станут стандартными функциями. Все функции в конкретной волне изменений могут быть включены или отключены только вместе, а не по отдельности.

При обновлении до новой версии MSBuild изменения, которые могут привести к нарушению работы, по умолчанию включены. Однако если функция оказывает отрицательное влияние на сборку, можно легко отключить эту волну изменений. Каждая волна изменений идентифицируется номером версии MSBuild (например, 16.8), однако установка волны изменений влияет только на некоторые функции, которые могут повлиять на процесс сборки, а не на все изменения в этой версии MSBuild. Список функций в каждой волне изменений приведен [далее в этой статье](#change-waves-and-associated-features). При отключении волны изменений также отключаются волны изменений более поздних версий.

## <a name="opt-out-of-change-wave-features"></a>Явный отказ от функций волны изменений

Чтобы отключить функции в волне изменений, задайте для переменной среды `MSBuildDisableFeaturesFromVersion` значение, соответствующее волне изменений (или версии MSBuild), содержащей функцию, которую необходимо **отключить**. Это версия MSBuild, для которой были разработаны функции. Сведения о соответствии волн изменений и функций приведены ниже.

### <a name="msbuilddisablefeaturesfromversion-values"></a>Значения MSBuildDisableFeaturesFromVersion

Если в качестве значения переменной среды `MSBuildDisableFeaturesFromVersion` не задана допустимая волна изменений, то будет выдано предупреждение и (или) будет использована конкретная волна изменений по умолчанию. Возможные значения приведены в следующей таблице:

| Значение `MSBuildDisableFeaturesFromVersion`                         | Результат        | Выдается ли предупреждение |
| :-------------                                                    | :----------   | :----------: |
| Не задано                                                             | Включаются все волны изменений, т. е. включаются все функции в каждой волне изменений.               | нет   |
| Любая допустимая и текущая волна изменений (например, `16.8`)                      | Отключаются все функции до волны изменений `16.8` **и более поздних версий**.                                           | нет   |
| Недопустимое значение (например, `16.9`, если допустимыми являются волны изменений `16.8` и `16.10`)| По умолчанию используется ближайшее допустимое значение (по возрастанию). Например, при указании волны изменений `16.9` по умолчанию будет использоваться волна изменений `16.10`.               | нет   |
| Неиспользуемая волна изменений (например, `17.1`, когда максимальная волна изменений — `17.0`)      | Используется ближайшее допустимое значение. Например, если указано `17.1`, используется `17.0`, а при указании `16.5` используется `16.8`                    | Да  |
| Недопустимый формат (например, `16x8`, `17_0`, `garbage`)                    | Включаются все волны изменений, т. е. включаются все функции в каждой волне изменений.               | Да  |

## <a name="change-waves-and-associated-features"></a>Волны изменений и связанные функции

Ссылки в списке ниже указывают на запросы на вытягивание в GitHub для соответствующей функции.

### <a name="168"></a>16.8

- [Включить параметр "Не выдавать предупреждения"](https://github.com/dotnet/msbuild/pull/5671)
- [Обрезать сообщения журнала, пропущенные целевым объектом или задачей, до 1024 символов](https://github.com/dotnet/msbuild/pull/5553)
- [Не разворачивать полные стандартные маски диска с ложным условием](https://github.com/dotnet/msbuild/pull/5669)

### <a name="1610"></a>16.10

- [Ошибка, когда расширение свойства в условии содержит пробелы](https://github.com/dotnet/msbuild/pull/5672)

### <a name="170"></a>17.0

В этой волне изменений еще нет функций.

## <a name="change-waves-that-are-out-of-rotation"></a>Неиспользуемые волны изменений

Неиспользуемые волны изменений сейчас отсутствуют.

## <a name="faq"></a>ВОПРОСЫ И ОТВЕТЫ

**Почему каждый второй выпуск помечается как включающий волны изменений?**

Мы считаем, что это позволяет обеспечить достаточное время для того, чтобы обсудить изменения с затронутыми пользователями и помочь им адаптироваться к изменениям.

**Почему используются переменные среды, а не свойства проекта?**

Существуют сценарии, в которых необходимо поместить функцию в волну изменений перед загрузкой проекта в MSBuild. По этой причине для волн изменений необходимо использовать переменные среды.

**Почему используется явный отказ, а не согласие?**

Использование отказа является оптимальным для нас. В противном случае реакция, связанная с влиянием функции на сборки клиентов, скорее всего, была бы ограниченной.

## <a name="see-also"></a>См. также

- [MSBuild](msbuild.md)
- [Новые возможности в MSBuild 16](whats-new-msbuild-16-0.md)
