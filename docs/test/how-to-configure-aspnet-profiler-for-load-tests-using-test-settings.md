---
title: Настройка профилировщика ASP.NET для нагрузочного тестирования
description: Сведения о том, как использовать адаптер диагностических данных профилировщика ASP.NET для сбора данных профилировщика ASP.NET.
ms.custom: SEO-VS-2020
ms.date: 10/13/2016
ms.topic: how-to
helpviewer_keywords:
- test settings, ASP.NET
ms.assetid: 6832fe39-04d5-4d94-8a18-3e2730bad423
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.openlocfilehash: 6222d4ff9107a44c52846d2904668dab225e35a6
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99966777"
---
# <a name="how-to-configure-aspnet-profiler-for-load-tests-using-test-settings-in-visual-studio"></a>Практическое руководство. Настройка профилировщика ASP.NET для нагрузочного тестирования с помощью параметров тестирования в Visual Studio

Можно также использовать адаптер диагностических данных профилировщика ASP.NET для сбора данных профилировщика ASP.NET. Этот адаптер диагностических данных собирает данные о производительности приложений ASP.NET.

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

> [!NOTE]
> Этот адаптер диагностических данных недопустимо использовать для выполнения тестов в Microsoft Test Manager (не рекомендуется в Visual Studio 2017). Диагностический адаптер профилировщика ASP.NET можно применять только с нагрузочными тестами, использующими веб-сайты, для которых требуется Visual Studio Enterprise.

Адаптер диагностических данных профилировщика ASP.NET позволяет собирать данные профилировщика ASP.NET с уровня приложения во время выполнения нагрузочного теста. Профилировщик нельзя использовать для продолжительных нагрузочных тестов (например, для нагрузочных тестов, которые выполняются больше часа). Это объясняется тем, что размер файла профилировщика может стать слишком большим и достичь нескольких сотен мегабайт. Вместо этого с профилировщиком ASP.NET следует запускать более короткие нагрузочные тесты; при этом можно по-прежнему пользоваться преимуществами более глубокой диагностики проблем производительности.

> [!NOTE]
> Адаптер диагностических данных профилировщика ASP.NET профилирует процесс служб IIS. Поэтому он не будет работать для веб-сервера разработки. Для профилирования веб-сайта в нагрузочном тесте необходимо установить агент тестирования на компьютере, на котором выполняется сервер IIS. Этот агент тестирования будет использоваться не для создания нагрузки, а только для сбора данных. Дополнительные сведения см. в статье [Установка и настройка агентов тестирования](../test/lab-management/install-configure-test-agents.md).

Дополнительные сведения см. в разделе [Практическое руководство. Создание параметра тестирования для распределенного нагрузочного теста](../test/how-to-create-a-test-setting-for-a-distributed-load-test.md).

## <a name="configure-the-aspnet-profiler-for-your-test-settings"></a>Настройка профилировщика ASP.NET для параметров тестирования

Перед выполнением шагов этой процедуры необходимо открыть параметры тестирования в Visual Studio и перейти на страницу **Данные и диагностика**.

1. Выберите роль, используемую для сбора данных профилировщика ASP.NET.

    > [!WARNING]
    > Эта роль должна быть расположена на веб-сервере.

2. Выберите пункт **Профилировщик ASP.NET**, чтобы включить сбор данных профилирования ASP.NET, и нажмите кнопку **Настроить**.

     Откроется диалоговое окно настройки сбора данных профилирования ASP.NET.

3. В поле **Интервал выборки** профилировщика введите значение, указывающее, сколько непрерывных циклов тактовой частоты ЦП следует ожидать до определения следующего значения выборки профилирования ASP.NET.

4. Для включения профилирования взаимодействия уровней щелкните **Включить профилирование уровневого взаимодействия**.

     Профилирование уровневого взаимодействия подсчитывает число запросов, отправленных на веб-сервер для каждого артефакта (например, для файла *MyPage.aspx* или *CompanyLogo.gif*), и время, которое заняло обслуживание каждого запроса. Кроме того, профилирование уровневого взаимодействия собирает данные о подключениях ADO.NET, использовавшихся в составе запроса страницы, а также подсчитывает число запросов и вызовов хранимых процедур, которые выполнялись в рамках обслуживания данного запроса.

     Собирается два различных набора сведений о времени:

    - сведения о времени обслуживания каждого веб-запроса (минимальное, максимальное, среднее и общее);

    - сведения о времени выполнения каждого запроса (минимальное, максимальное, среднее и общее).

Настроенный в параметре тестирования адаптер диагностических данных профилировщика ASP.NET позволяет собирать данные профилирования ASP.NET для веб-приложения ASP.NET.

## <a name="see-also"></a>См. также

- [Сбор диагностических данных с помощью параметров тестирования](../test/collect-diagnostic-information-using-test-settings.md)
- [Практическое руководство. Создание параметра тестирования для распределенного нагрузочного теста](../test/how-to-create-a-test-setting-for-a-distributed-load-test.md)
- [Контроллеры и агенты тестирования](configure-test-agents-and-controllers-for-load-tests.md)