---
title: Добавление и удаление счетчиков на графиках в результатах нагрузочного теста
description: Сведения о том, как использовать панель "Счетчики" для добавления счетчиков производительности к графу, а также о свойстве Sample Rate.
ms.custom: SEO-VS-2020
ms.date: 10/19/2016
ms.topic: how-to
helpviewer_keywords:
- load test results graphs, adding counters
- load test results graph
- load test, results graph
- load test results, graphs
ms.assetid: 81536233-1962-40d9-9511-0b4633814d90
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.openlocfilehash: bbf233d025d168f3f9d197af5876a0d6e735a9e9
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99942403"
---
# <a name="how-to-add-and-delete-counters-on-graphs-in-load-test-results"></a>Практическое руководство. Добавление и удаление счетчиков на графиках в результатах нагрузочного теста

Панель **Счетчики** можно использовать для добавления счетчиков производительности в граф.

![Счетчик добавлен в граф](../test/media/ltest_selectcounter.png)

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

**Особенности определения интервала выборки счетчика производительности**

Выберите значение свойства **Частота выборки** в параметрах запуска нагрузочного теста в соответствии с длительностью нагрузочного теста. Для более низкой частоты выборки, например для значения по умолчанию, равного 5 секундам, требуется больше места в базе данных результатов нагрузочного тестирования. Для более длинных нагрузочных тестов увеличение частоты выборки приводит к уменьшению объема собираемых данных. Дополнительные сведения см. в разделе [Практическое руководство. Задание частоты выборки](../test/how-to-specify-the-sample-rate-for-a-load-test.md).

Вот несколько рекомендаций по выбору частоты выборки.

|Длительность нагрузочного теста|Рекомендуемая частота выборки|
|-|-----------------------------|
|\< 1 ч|5 с|
|1–8 часов|15 секунд|
|8–24 часа|30 секунд|
|> 24 часов|60 секунд|

**Особенности добавления сведений о времени для сбора данных процентилей**

В параметрах запуска в редакторе тестовой нагрузки имеется свойство **Хранилище сведений о синхронизации**. Если свойство **Хранилище сведений о синхронизации** включено, то в хранилище результатов нагрузочного теста будет записываться время выполнения каждого отдельного теста, транзакции и страницы. Это обеспечивает отображение данных процентилей 90 и 95 в **анализаторе тестовой нагрузки** в таблицах "Тесты", "Транзакции" и "Страницы".

Имеется два варианта включения свойства **Хранилище сведений о синхронизации** в параметрах запуска. Это свойства **StatisticsOnly** и **AllIndividualDetails**. В обоих случаях измеряется время всех тестов, страниц и транзакций, а на основе сведений о времени вычисляются данные перцентилей. Отличие состоит в том, что при выборе значения **StatisticsOnly** после вычисления данных процентилей из репозитория будут удалены сведения о времени для всех отдельных объектов. Это позволит уменьшить место, необходимое для хранения данных при использовании сведений о времени. Однако более опытные пользователи могут предпочесть обрабатывать данные о времени другими способами, с использованием средств SQL. В этом случае следует использовать значение **AllIndividualDetails**, чтобы сведения о времени были доступны для обработки. Кроме того, если задать для свойства значение **AllIndividualDetails**, после завершения нагрузочного теста вы сможете в **анализаторе тестовой нагрузки** анализировать действия виртуальных пользователей с помощью **диаграммы активности виртуальных пользователей**. Дополнительные сведения см. в статье [Анализ нагрузочного тестирования действий виртуальных пользователей в представлении сведений анализатора тестовой нагрузки](../test/analyze-load-test-virtual-user-activity-in-the-details-view.md).

Объем места, необходимый для хранения сведений о времени в хранилище результатов нагрузочного тестирования, может быть очень большим, особенно для длительных тестов. Кроме того, сохранение этих данных в хранилище результатов нагрузочного теста после завершения теста может занять очень много времени, поскольку эти данные хранятся на агентах до завершения тестирования. После завершения нагрузочного теста данные сохраняются в репозитории. По умолчанию свойство **Хранилище сведений о синхронизации** включено. Если это важно для тестовой среды, можно указать для параметра **Хранилище сведений о синхронизации** значение **Нет**.

Дополнительные сведения см. в разделе [Практическое руководство. указать свойство хранилища сведений о синхронизации](../test/how-to-specify-the-timing-details-storage-property-for-a-load-test.md).

## <a name="to-display-a-particular-performance-counter-on-a-load-test-graph"></a>Отображение определенного счетчика на диаграмме нагрузочного теста

1. После завершения нагрузочного теста или после загрузки результатов тестирования выберите пункт **Диаграммы** на панели инструментов анализатора тестовой нагрузки.

     Откроется панель **Счетчики**, в которой включено представление "Диаграммы".

    > [!NOTE]
    > Если панель **Счетчики** не отображается, на панели инструментов выберите команду **Показать панель счетчиков**.

2. На панели **Счетчики** разворачивайте узлы в иерархии, пока не откроется счетчик производительности, который нужно отобразить на диаграмме.

     Например, чтобы отобразить счетчик свободной памяти на компьютере, где выполняются тесты, разверните **Компьютеры**, разверните узел компьютера и разверните **Память**. Появится счетчик **Доступно мегабайт**.

3. Выберите диаграмму, на которой нужно отобразить счетчик производительности.

4. Щелкните правой кнопкой мыши счетчик производительности в панели **Счетчики** и выберите команду **Показать счетчик на диаграмме**.

    > [!TIP]
    > Чтобы временно отключить отображение данных счетчика производительности на диаграмме, снимите флажок этого счетчика в легенде. При этом по-прежнему анализируется статистика минимальных, максимальных и средних значений без отображения линии тренда на диаграмме. Это может быть полезно, если при анализе проблем на диаграмме содержится несколько налагающихся графиков счетчиков производительности. Дополнительные сведения см. в статье [Использование легенды представления диаграмм для анализа нагрузочного тестирования](../test/use-the-graphs-view-legend-to-analyze-load-tests.md).

5. Чтобы удалить данные счетчика производительности с диаграммы, щелкните счетчик правой кнопкой мыши в столбце **Счетчик** легенды и выберите команду **Удалить**.

     \- или -

     Щелкните правой кнопкой мыши линию данных на диаграмме и выберите команду **Удалить**.

     \- или -

     Выберите счетчик производительности в столбце **Счетчик** легенды или линию данных на диаграмме и нажмите клавишу **DELETE**.

    > [!NOTE]
    > Можно также поместить счетчик производительности в легенду, не отображая его на диаграмме, с помощью команды **Показать счетчик в легенде**.

## <a name="see-also"></a>См. также раздел

- [Анализ результатов нагрузочного тестирования в представлении диаграмм](../test/analyze-load-test-results-in-the-graphs-view.md)
- [Практическое руководство. Создание пользовательских графов](../test/how-to-create-custom-graphs-in-load-test-results.md)
