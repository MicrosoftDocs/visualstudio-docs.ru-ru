---
title: Настройка моделирования сети с помощью параметров тестирования
description: Сведения о том, как настроить адаптер диагностических данных для тестирования приложения в различных сетевых средах из Visual Studio.
ms.custom: SEO-VS-2020
ms.date: 10/03/2016
ms.topic: how-to
helpviewer_keywords:
- test settings, network emulation
ms.assetid: ff275cfb-5df9-4710-9a91-9caabaaad34f
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.openlocfilehash: 6126441890f34296fa0d8a9cda20bee32752cd81
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99966764"
---
# <a name="how-to-configure-network-emulation-using-test-settings-in-visual-studio"></a>Практическое руководство. Настройка эмуляции сети с использованием параметров тестирования в Visual Studio

Вы можете настроить адаптер диагностических данных для тестирования приложения в различных сетевых средах из Visual Studio. Кроме того, адаптер можно настроить для тестирования искусственной сетевой нагрузки (или узкого места) при выполнении тестов.

> [!WARNING]
> Если тесты выполняются в реальной сети, функционирующей медленнее, чем эмулируемая сеть, тест будет выполняться и при более низкой скорости сети. Эмуляция может только замедлять работу сетевой среды, а не ускорять ее.

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

::: moniker range="vs-2017"
В следующей процедуре описывается настройка эмуляции сети в редакторе конфигурации. Эти инструкции относятся к редактору конфигурации в Microsoft Test Manager и Visual Studio.
::: moniker-end
::: moniker range=">=vs-2019"
В следующей процедуре описывается настройка эмуляции сети в редакторе конфигурации. Эти шаги относятся к редактору конфигурации в Visual Studio.
::: moniker-end

> [!NOTE]
> Адаптер диагностических данных эмуляции сети применим только для параметров тестирования Visual Studio. Он не применяется для параметров тестирования в Microsoft Test Manager (не рекомендуется в Visual Studio 2017).

::: moniker range="vs-2017"
Для эмуляции сети следует использовать учетную запись с привилегиями администратора. При выборе эмуляции сети для локальной роли, выполняющей ручные тесты, следует запустить Microsoft Test Manager с привилегиями администратора. При выборе эмуляции сети для любой другой роли необходимо удостовериться в том, что агент тестирования на компьютере для этой роли использует учетную запись пользователя, входящего в группу администраторов. Дополнительные сведения о настройке учетной записи агента тестирования см. в статье [Установка и настройка агентов тестирования](../test/lab-management/install-configure-test-agents.md).
::: moniker-end

> [!NOTE]
> Учетная запись сетевой службы, используемая агентом тестирования по умолчанию, не является членом группы администраторов.

**Точная эмуляция сети**

Visual Studio использует основанную на программном обеспечении истинную эмуляцию сети для всех типов тестов. К ним относятся и нагрузочные тесты. Точная эмуляция сети имитирует состояние сети путем непосредственного управления сетевыми пакетами. Точный эмулятор сети может эмулировать поведение как проводных, так и беспроводных сетей с использованием надежного физического канала, например Ethernet. В точной эмуляции сети реализованы следующие атрибуты сети.

- Время на передачу и подтверждение приема в сети (задержка)

- Значение доступной пропускной способности

- Поведение очереди

- Потеря пакетов

- Изменение порядка следования пакетов

- Распространение ошибки.

Точная эмуляция сети также обеспечивает гибкость при фильтрации сетевых пакетов на основе IP-адресов или протоколов, таких как TCP, UDP и ICMP.

Точная эмуляция сети может использоваться разработчиками и тест-инженерами сетевых приложений для эмуляции различных тестовых сред, оценки производительности, прогноза влияния изменений или принятия решений об оптимизации технологии. По сравнению с аппаратными тестовыми стендами точная эмуляция сети является намного более дешевым и гибким решением.

## <a name="configure-network-emulation-for-your-test-settings"></a>Настройка эмуляции сети для параметров тестирования

Перед выполнением шагов этой процедуры необходимо открыть параметры тестирования в Visual Studio, а затем перейти на страницу **Данные и диагностика**.

### <a name="to-configure-network-emulation-for-your-test-settings"></a>Настройка эмуляции сети с помощью параметров тестирования

1. Выберите роль, которая будет использоваться для эмуляции конкретной сети.

    > [!NOTE]
    > Необходимо настроить адаптер эмуляции сети либо только в клиентской, либо только в серверной роли. Не нужно использовать адаптер в обеих ролях. Адаптер эмулирует помехи в сети, которые влияют на передачу данных между ролями, поэтому не нужно использовать обе роли на одном адаптере. Кроме случаев, когда необходимо обратное, следует выбирать клиентскую роль для адаптера эмуляции сети, чтобы избежать дополнительных издержек для серверной роли.

2. Последовательно выберите пункты **Эмуляция сети** и **Настройка**.

     Откроется диалоговое окно настройки эмуляции сети.

3. Выберите стрелку рядом с полем **Выберите сетевой профиль для использования** и тип сети для эмуляции при выполнении теста (например, **Кабельный/DSL-канал, 768 Кбит/с**).

    > [!WARNING]
    > Если тесты выполняются в реальной сети, функционирующей медленнее, чем эмулируемая сеть, тест будет выполняться и при более низкой скорости сети. Эмуляция может только замедлять работу сетевой среды, а не ускорять ее.

4. Если включить адаптер диагностических данных эмуляции сети в параметры тестирования, предполагая использовать его на локальном компьютере, необходимо также привязать драйвер эмуляции сети к одному из сетевых адаптеров компьютера. Драйвер эмуляции сети необходим для работы адаптера диагностических данных эмуляции сети. Драйвер эмуляции сети устанавливается и привязывается к адаптеру двумя способами:

    - **Драйвер эмуляции сети, установленный с агентом тестирования Microsoft Visual Studio** Агент тестирования Microsoft Visual Studio можно использовать на удаленных компьютерах и на локальном компьютере. Процесс установки Visual Studio Test Agent включает этап настройки, в ходе которого драйвер эмуляции сети привязывается к сетевой карте. Дополнительные сведения см. в статье [Установка и настройка агентов тестирования](../test/lab-management/install-configure-test-agents.md).

    - **Драйвер эмуляции сети, установленный с агентом тестирования Microsoft Visual Studio Test Professional** При первом использовании эмуляции сети вам будет предложено привязать драйвер эмуляции сети к сетевой карте.

    > [!TIP]
    > Также можно установить драйвер эмуляции сети из командной строки на локальном компьютере без установки Visual Studio Test Agent с помощью следующей команды: **VSTestConfig NETWORKEMULATION /install**

## <a name="see-also"></a>См. также

- [Сбор диагностических данных с помощью параметров тестирования](../test/collect-diagnostic-information-using-test-settings.md)
- [Выполнение тестов вручную (Azure Test Plans)](/azure/devops/test/run-manual-tests?view=vsts&preserve-view=true)
