---
title: Настройка контроллеров и агентов тестирования для нагрузочного тестирования
description: Сведения о том, как Visual Studio может создавать симулированную нагрузку с использованием физических или виртуальных машин для создания увеличенной нагрузки, которую отдельный компьютер не может сгенерировать самостоятельно.
ms.custom: SEO-VS-2020
ms.date: 10/19/2016
ms.topic: how-to
helpviewer_keywords:
- load tests, test agents and controllers
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.openlocfilehash: 50356044b4463353f99ddf93ac41e08a572f3879
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99957248"
---
# <a name="overview-of-test-agents-and-test-controllers-for-running-load-tests"></a>Обзор контроллеров и агентов тестирования для нагрузочного тестирования

Visual Studio может использовать физические компьютеры или виртуальные машины для создания симулированной нагрузки для приложения. Эти машины должны быть установлены как единый тестовый контроллер и один или несколько тестовых агентов. Контроллер тестирования и агенты тестирования можно использовать для создания нагрузки большей, чем способен создать отдельный компьютер.

> [!NOTE]
> Облачное нагрузочное тестирование также можно использовать для предоставления виртуальных машин, которые создают нагрузку при одновременном доступе большого числа пользователей к веб-сайту. Однако использование конфигурации контроллера тестирования и агента тестирования на виртуальных машинах, размещенных в облаке, не поддерживается. Дополнительные сведения об облачном нагрузочном тестировании см. в статье [Выполнение облачных нагрузочных тестов в Azure Test Plans](/azure/devops/test/load-test/get-started-simple-cloud-load-test?view=vsts&preserve-view=true).

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

## <a name="load-simulation-architecture"></a>Архитектура моделирования нагрузки

Архитектура моделирования нагрузки состоит из клиента Visual Studio, контроллера тестирования и агентов тестирования.

- Клиент используется для разработки тестов, выполнения тестов и просмотра их результатов.

- Контроллер используется для управления агентами и сбора результатов тестирования.

- Агенты тестирования служат для выполнения тестов и сбора данных, включая сведения о системе и данные профилирования ASP.NET, определенные в параметре тестирования.

Данная архитектура обеспечивает следующие преимущества.

- Возможность масштабирования создаваемой нагрузки путем добавления агентов к контроллеру.

- Гибкость в установке программного обеспечения клиента, контроллера тестирования и агентов тестирования на одном или разных компьютерах. Пример:

   **Локальная конфигурация:**

  - Компьютер 1: Visual Studio, контроллер, агент

    ![Локальный компьютер, использующий контроллер и агент](./media/load-test-configa.png)

    **Типичная удаленная конфигурация:**

  - Компьютер 1 и компьютер 2: Visual Studio (один контроллер может использоваться несколькими тест-инженерами).

  - Компьютер 3: контроллер (на нем могут также быть установлены агенты).

  - Компьютеры 4–n: агент или агенты, все связанные с контроллером на компьютере 3.

    ![Удаленные компьютеры, использующие контроллер и агенты](./media/load-test-configb.png)

Контроллер обычно управляет несколькими агентами тестирования, однако агент может быть связан только с одним контроллером. Каждый агент может совместно использоваться группой разработчиков. Такая архитектура позволяет с легкостью увеличивать число агентов, создавая тем самым более значительные нагрузки.

## <a name="test-agent-and-test-controller-interaction"></a>Взаимодействие агента тестирования и контроллера тестирования

Контроллер управляет набором агентов в ходе выполнения тестов. Контроллер взаимодействует с агентами с целью запуска и останова тестов, отслеживания состояния агентов и сбора результатов теста.

### <a name="test-controller"></a>Test Controller

Контроллер обеспечивает базовую архитектуру выполнения тестов и включает специальные функции выполнения нагрузочных тестов. Контроллер пересылает нагрузочный тест всем агентам и ожидает, когда тест будет инициализирован всеми агентами. Когда агенты готовы, контроллер передает им команду на запуск теста.

### <a name="test-agent"></a>Тестовый агент

Агент тестирования выполняется как служба, прослушивающая запросы от контроллера на выполнение нового теста. Когда агент тестирования получает запрос, служба агента запускает процесс, в котором будут выполняться тесты. Все агенты выполняют один и тот же нагрузочный тест.

Администратор назначает агентам весовые коэффициенты, в соответствии с которыми распределяется нагрузка. Например, если агент тестирования 1 имеет весовой коэффициент 30, а агент 2 — весовой коэффициент 70, в то время как нагрузка устанавливается равной 1000 пользователей, агент 1 будет моделировать работу 300 виртуальных пользователей, а агент 2 — 700 виртуальных пользователей. См. статью [Управление контроллерами и агентами тестирования с помощью Visual Studio](../test/manage-test-controllers-and-test-agents.md).

Агент принимает набор тестов и набор параметров моделирования в качестве входных данных. Ключевым принципом является независимость тестов от компьютера, на котором они выполняются.

## <a name="test-controller-and-test-agent-connection-points"></a>Точки подключения контроллера тестирования и агентов тестирования

На нижеприведенной иллюстрации показаны точки подключения между контроллером тестирования, агентом тестирования и клиентом. На ней показаны порты, используемые для входящих и исходящих подключений, а также ограничения системы безопасности, распространяющиеся на эти порты.

![Порты и безопасность контроллера и агента тестирования](./media/test-controller-agent-firewall.png)

Дополнительные сведения см. в статье [Настройка портов для контроллеров и агентов тестирования](../test/configure-ports-for-test-controllers-and-test-agents.md).

## <a name="test-controller-and-agent-installation-information"></a>Сведения об установке контроллеров тестирования и агентов тестирования

Ключевые сведения о требованиях контроллеров и агентов тестирования к оборудованию и программному обеспечению, а также об их установке и настройке среды тестирования для достижения оптимальной производительности см. в статье [Установка и настройка агентов тестирования](../test/lab-management/install-configure-test-agents.md).

## <a name="use-the-test-controller-and-test-agent-with-unit-tests"></a>Использование контроллера и агентов тестирования в модульных тестах

После установки контроллера тестирования и одного или нескольких агентов можно указать, будет ли в нагрузочных тестах использоваться удаленное выполнение с помощью контроллера тестирования. Кроме того, можно задать адаптеры данных и диагностики для использования с ролью, связанной с агентами, в параметре тестирования.

## <a name="see-also"></a>См. также раздел

- [Установка и настройка агентов тестирования](../test/lab-management/install-configure-test-agents.md)
