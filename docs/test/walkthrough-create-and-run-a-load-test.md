---
title: Создание и запуск нагрузочного теста
description: Сведения о том, как создать нагрузочный тест, содержаний модульные тесты. Вы можете создать и выполнить нагрузочные тесты с помощью Visual Studio Enterprise.
ms.custom: SEO-VS-2020
ms.date: 10/01/2016
ms.topic: conceptual
helpviewer_keywords:
- unit tests, in load tests
- unit tests, load test walkthrough
- load tests, walkthrough
ms.assetid: bbf075a5-96d5-48ed-a03c-330f0fc04748
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.openlocfilehash: 888bf1f699027ab883a01ba74d8efc5703c91c9a
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99968974"
---
# <a name="walkthrough-create-and-run-a-load-test-that-contains-unit-tests"></a>Пошаговое руководство: создание и запуск нагрузочного теста, содержащего модульные тесты

В этом пошаговом руководстве рассматривается создание нагрузочного теста, содержащего модульные тесты.

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

Это пошаговое руководство описывает создание и выполнение нагрузочного теста с помощью Visual Studio Enterprise. Нагрузочный тест — это контейнер, содержащий веб-тесты производительности и модульные тесты. Для создания нагрузочных тестов служит **мастер создания нагрузочных тестов**.

Нагрузочный тест обладает рядом свойств, которые можно изменить для настройки моделируемой нагрузки. В этом пошаговом руководстве описывается применение **мастера тестовой нагрузки** для добавления модульных тестов в нагрузочный тест.

В этом пошаговом руководстве выполняются следующие задачи.

- Создание нагрузочного теста, в котором используются модульные тесты.

- Изменение параметров нагрузочного теста.

- Выполнение нагрузочного теста.

- Выполните инструкции в статье [Пошаговое руководство: создание и запуск модульных тестов для управляемого кода](../test/walkthrough-creating-and-running-unit-tests-for-managed-code.md), чтобы создать простую библиотеку классов C#, содержащую проект веб-тестов производительности и нагрузочных тестов, включающий несколько модульных тестов.

## <a name="create-a-load-test-containing-unit-tests-using-the-new-load-test-wizard"></a>Создание нагрузочных тестов, содержащих модульные тесты, с помощью мастера тестовой нагрузки

### <a name="to-start-the-new-load-test-wizard"></a>Запуск мастера создания нагрузочных тестов

1. Убедитесь в том, что установлен компонент **Средства для тестирования производительности веб-сайтов и нагрузочного тестирования**, описанный в разделе [Создание проекта нагрузочного тестирования](../test/quickstart-create-a-load-test-project.md).

1. Откройте решение Bank, созданное в разделе [Пошаговое руководство: создание и запуск модульных тестов для управляемого кода](../test/walkthrough-creating-and-running-unit-tests-for-managed-code.md).

1. В **обозревателе решений** откройте контекстное меню узла решения "Банк" и последовательно выберите команды **Добавить** и **Создать проект**.

     Откроется диалоговое окно **Добавление нового проекта**.

1. В диалоговом окне **Добавление нового проекта** разверните узел **Visual C#** и выберите пункт **Тест**. В списке шаблонов выберите **Проект с веб-тестами производительности и нагрузочными тестами** и в поле **Имя** введите `BankLoadTest`. Нажмите кнопку **ОК**.

     Проект веб-тестов производительности и нагрузочных тестов BankLoadTest добавляется в решение.

1. Откройте контекстное меню для нового проекта веб-тестов производительности и нагрузочных тестов BankLoadTest, выберите команду **Добавить**, а затем пункт **Нагрузочный тест**.

1. Запускается **Мастер тестовой нагрузки**.

1. Откроется начальная страница **приветствия** области **Мастер тестовой нагрузки**.

1. Нажмите кнопку **Далее**.

### <a name="to-edit-settings-for-load-test-scenario"></a>Изменение параметров сценария нагрузочного теста

1. В текстовом поле **Введите имя сценария тестовой нагрузки** введите **ScenarioSample**.

     *Сценарий* — это способ группировки. Он состоит из набора тестов и свойств для запуска этих тестов под нагрузкой.

2. Задайте для параметра **Профиль времени обдумывания** значение `Use normal distribution centered on recorded think times`. Время на обдумывание — это время, в течение которого пользователь просматривает веб-страницу перед переходом к следующей странице.

1. По завершении нажмите кнопку **Далее**.

### <a name="to-edit-load-pattern-setting-for-test-scenario"></a>Изменение параметра шаблона нагрузки для тестового сценария

1. Выберите пункт **Пошаговая нагрузка**.

    > [!NOTE]
    > Можно выбрать два типа шаблонов нагрузки: постоянный и пошаговый. Оба типа выполняют определенную функцию при нагрузочном тестировании, однако в целях данного руководства выберите **Пошаговая нагрузка**.

2. Для параметра **Начальное число пользователей** установите значение 10.

3. Для параметра **Длительность шага** установите значение, равное 10 секундам.

4. Для параметра **Число пользователей на шаге** установите значение 10.

5. Для параметра **Максимальное число пользователей** установите значение 100.

6. Нажмите кнопку **Далее**.

### <a name="to-select-test-mix-model-for-the-scenario"></a>Выбор модели тестового набора для сценария

1. В группе **Способ моделирования набора тестов** выберите **На основе общего числа тестов**.

2. Нажмите кнопку **Далее**.

### <a name="to-add-unit-tests-to-the-scenario"></a>Добавление модульных тестов в сценарий

1. Следующий этап — **Добавление тестов в сценарий тестовой нагрузки и изменение набора тестов**.

2. Нажмите кнопку **Добавить**, чтобы выбрать тесты.

3. Выберите модульные тесты **CreditTest** в области **Доступные тесты**, где перечислены все веб-тесты производительности и модульные тесты в проекте веб-тестов производительности и нагрузочных тестов.

4. Выберите стрелку, чтобы добавить модульный тест **CreditTest** в область **Выбранные тесты**.

5. Повторите шаги 3 и 4 для модульных тестов **DebitTest** и **FreezeAccountTest**.

6. Добавив три модульных теста, нажмите кнопку **ОК**.

     Будет показан тестовый набор.

7. Переместите ползунок **Распространение** для теста **CreditTest** немного вправо, чтобы настроить распространение теста. Обратите внимание, что остальные ползунки автоматически перемещаются немного влево, чтобы общее распространение оставалось равным 100%.

8. Нажмите кнопку **Далее**.

### <a name="to-select-network-mix-for-test-scenario"></a>Выбор смешанного сетевого профиля для сценария тестирования

1. Выберите тип подключения "LAN" и добавьте его в сетевой профиль.

     Можно добавить дополнительные типы сетевых подключений. С помощью ползунков можно настроить распределение и важность тестов.

2. Нажмите кнопку **Далее**.

### <a name="to-specify-computers-to-monitor-with-counter-sets-during-load-test-run"></a>Указание компьютеров для отслеживания наборами счетчиков при выполнении нагрузочного теста

1. Нажмите кнопку **Далее**.

     Дополнительные сведения о наборах счетчиков см. в статье [Указание наборов счетчиков и правил порогов для компьютеров в нагрузочном тесте](../test/specify-counter-sets-and-threshold-rules-for-load-testing.md).

### <a name="to-edit-run-setting-for-load-test"></a>Изменение параметра запуска для нагрузочного теста

1. Выберите **Длительность нагрузочного теста**, затем установите для параметра **Длительность выполнения** значение, равное 2 минутам, чтобы провести *тест состояния* нагрузочного теста.

     При построении нагрузочных тестов рекомендуется проверять правильность настройки и работы с помощью коротких облегченных нагрузочных тестов. Этот процесс называется *тестом состояния*.

2. Нажмите кнопку **Готово**. Нагрузочный тест открывается в **редакторе тестовой нагрузки**.

## <a name="run-the-load-test"></a>Запуск нагрузочного теста
 После создания нагрузочного теста запустите его, чтобы увидеть, как банковское приложение реагирует на моделирование нагрузки. При работе теста открывается окно **анализатора тестовой нагрузки**.

### <a name="to-run-the-load-test"></a>Запуск нагрузочного теста

1. Открыв нагрузочный тест в области **Редактор тестовой нагрузки**, нажмите зеленую кнопку **Запустить тест** на панели инструментов. Нагрузочный тест будет запущен.

2. Если при моделировании нагрузки будут превышены пороговые значения, в узлах дерева управления появятся соответствующие значки. Ошибки помечаются красными кружками, а предупреждения — желтыми треугольниками. Можно найти счетчик, для которого превышено пороговое значение, и получить наглядное представление данных, перетащив значок на диаграмму. Это можно сделать при выполнении теста.

## <a name="see-also"></a>См. также раздел

- [Изменение тестового набора для определения тестов, которые должны быть включены в сценарий тестовой нагрузки](../test/edit-the-test-mix-to-specify-which-web-browsers-types-in-a-load-test-scenario.md)
- [Определение типов виртуальных сетей в сценарии нагрузочного теста](../test/specify-virtual-network-types-in-a-load-test-scenario.md)
- [Изменение сценариев тестовой нагрузки](../test/edit-load-test-scenarios.md)
- [Изменение шаблонов нагрузки для моделирования действий виртуальных пользователей](../test/edit-load-patterns-to-model-virtual-user-activities.md)
- [Изменение моделей тестовых наборов для указания вероятности запуска теста виртуальным пользователем](../test/edit-test-mix-models-to-specify-the-probability-of-a-virtual-user-running-a-test.md)
