---
title: Рекомендации по выполнению закодированных тестов пользовательского интерфейса
description: Сведения о рекомендациях для разработки закодированных тестов пользовательского интерфейса. Эти рекомендации помогут вам создать гибкий закодированный тест пользовательского интерфейса.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- coded UI tests, best practices
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 23b959f693e2deb6fd1ee4bdbe2e4158ee6ac13e
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99964645"
---
# <a name="best-practices-for-coded-ui-tests"></a>Рекомендации по выполнению закодированных тестов пользовательского интерфейса

В этой статье приводится ряд рекомендаций по разработке закодированных тестов пользовательского интерфейса.

[!INCLUDE [coded-ui-test-deprecation](includes/coded-ui-test-deprecation.md)]

## <a name="best-practices"></a>Рекомендации

Чтобы создать гибкий закодированный тест пользовательского интерфейса, следуйте приведенным ниже рекомендациям.

- Используйте **построитель закодированных тестов пользовательского интерфейса** везде, где это возможно.

- Не изменяйте файл *UIMap.designer.cs* напрямую. Если вы сделаете это, то изменения в этом файле будут перезаписываться.

- Создавайте тест как последовательность записанных методов. Дополнительные сведения о том, как записать метод, см. в разделе [Создание закодированных тестов пользовательского интерфейса](../test/use-ui-automation-to-test-your-code.md).

- Каждый записанный метод должен действовать в одной странице, форме или диалоговом окне. Создавайте новый метод теста для каждой новой страницы, формы или диалогового окна.

- При создании метода используйте понятное имя метода вместо имени по умолчанию. Понятное имя помогает определить назначение метода.

- По возможности включайте в каждый записанный метод не более 10 действий. Такой модульный подход упрощает замену метода в случае изменения пользовательского интерфейса.

- Создавайте каждое утверждение с помощью **построителя закодированных тестов пользовательского интерфейса**, который автоматически добавляет метод утверждения в файл *UIMap.Designer.cs*.

- Если пользовательский интерфейс изменяется, перезапишите методы теста или методы утверждений либо перезапишите затронутые разделы существующего метода теста.

- Создайте отдельный файл [UIMap](/previous-versions/dd580454(v=vs.140)) для каждого модуля в тестируемом приложении. Дополнительные сведения см. в разделе [Тестирование крупного приложения с несколькими картами пользовательского интерфейса](../test/testing-a-large-application-with-multiple-ui-maps.md).

- В тестируемом приложении используйте понятные имена при создании элементов управления пользовательского интерфейса. Это придаст больше смысла и повысит удобство использования автоматически создаваемых имен элементов управления.

- При создании утверждений путем написания кода с помощью API создавайте метод для каждого утверждения в части класса [UIMap](/previous-versions/dd580454(v=vs.140)), который находится в файле *UIMap.cs*. Для выполнения утверждения вызывайте этот метод из своего метода теста.

- Если вы программируете напрямую с помощью API, как можно больше используйте в своем коде свойства и методы в классах, создаваемых в файле *UIMap.Designer.cs*. Эти классы сделают работу более простой и надежной и помогут вам повысить производительность.

Закодированные тесты пользовательского интерфейса автоматически адаптируются ко множеству изменений в пользовательском интерфейсе. Если, например, изменяется положение или цвет элемента пользовательского интерфейса, в большинстве случаев закодированный тест пользовательского интерфейса будет по-прежнему находить правильный элемент.

Во время тестового запуска элементы управления пользовательского интерфейса обнаруживаются платформой тестирования с помощью набора свойств поиска. Свойства поиска применяются к каждому классу элементов управления в определениях, созданных **построителем закодированных тестов пользовательского интерфейса** в файле *UIMap.Designer.cs*. Свойства поиска содержат пары «имя-значение» имен и значений свойств, которые могут использоваться для идентификации элемента управления, таких как свойства <xref:Microsoft.VisualStudio.TestTools.UITesting.UITestControl.FriendlyName%2A>, <xref:Microsoft.VisualStudio.TestTools.UITesting.UITestControl.Name%2A> и <xref:Microsoft.VisualStudio.TestTools.UITesting.UITestControl.ControlType%2A> элемента управления. Если свойства поиска не меняются, закодированный тест пользовательского интерфейса будет успешно находить элемент управления в пользовательском интерфейсе. Если свойства поиска изменяются, в закодированных тестах пользовательского интерфейса имеется алгоритм интеллектуального сопоставления, в котором применяется эвристический подход для поиска элементов управления и окон в пользовательском интерфейсе. При изменении пользовательского интерфейса вы можете изменить свойства поиска идентифицированных ранее элементов, чтобы убедиться в том, что они обнаруживаются.

## <a name="if-your-user-interface-changes"></a>Что делать, если изменяется пользовательский интерфейс

Во время разработки пользовательский интерфейс часто изменяется. Далее приводятся некоторые способы уменьшения влияния этих изменений.

- Найдите записанный метод, который ссылается на этот элемент управления, и с помощью **построителя закодированных тестов пользовательского интерфейса** перезапишите действия для этого метода. Можно использовать то же имя метода для перезаписи существующих действий.

- Если элемент управления содержит утверждение, которое более не действительно:

  - удалите метод, который содержит это утверждение;

  - удалите вызов этого метода из метода теста;

  - добавьте новое утверждение, перетащив кнопку с перекрестием в элемент управления пользовательского интерфейса, открыв карту пользовательского интерфейса и добавив новое утверждение.

Дополнительные сведения о записи закодированных тестов пользовательского интерфейса см. в разделе [Использование модели автоматизации пользовательского интерфейса для тестирования кода](../test/use-ui-automation-to-test-your-code.md).

## <a name="if-a-background-process-needs-to-complete-before-the-test-can-continue"></a>Что делать, если перед продолжением теста должен выполниться фоновый процесс

В некоторых сценариях требуется подождать завершения процесса, прежде чем можно будет продолжить работу со следующим действием пользовательского интерфейса. Для этого можно использовать <xref:Microsoft.VisualStudio.TestTools.UITesting.PlaybackSettings.WaitForReadyLevel%2A>, чтобы ожидать перед продолжением теста, как показано в следующем примере:

```csharp
// Set the playback to wait for all threads to finish
Playback.PlaybackSettings.WaitForReadyLevel = WaitForReadyLevel.AllThreads;

// Press the submit button
this.UIMap.ClickSubmit();

// Reset the playback to wait only for the UI thread to finish
Playback.PlaybackSettings.WaitForReadyLevel = WaitForReadyLevel.UIThreadOnly;
```

## <a name="see-also"></a>См. также раздел

- [UIMap](/previous-versions/dd580454(v=vs.140))
- <xref:Microsoft.VisualStudio.TestTools.UITesting>
- [Использование автоматизации пользовательского интерфейса для тестирования кода](../test/use-ui-automation-to-test-your-code.md)
- [Создание закодированных тестов пользовательского интерфейса](../test/use-ui-automation-to-test-your-code.md)
- [Тестирование крупного приложения с несколькими картами пользовательского интерфейса](../test/testing-a-large-application-with-multiple-ui-maps.md)
- [Поддерживаемые конфигурации и платформы для закодированных тестов пользовательского интерфейса и записей действий](../test/supported-configurations-and-platforms-for-coded-ui-tests-and-action-recordings.md)
