---
title: Общие сведения о конфигурациях сборок
description: Узнайте, как использовать конфигурации сборок для создания проектов с разными параметрами в Visual Studio.
ms.custom: SEO-VS-2020
ms.date: 01/20/2020
ms.technology: vs-ide-compile
ms.topic: conceptual
f1_keywords:
- SolutionProperties.ActiveConfig
- vs.build.newprojectconfiguration
- vc.proj.configurationsctrl.multipleconfigs
- vs.build.editsolutionconfigurations
- vs.build.editprojectconfigurations
- vs.multipleconfigurations
- vs.build.newsolutionconfiguration
- VS.ConfigurationManager
- VS.MultipleConfig
helpviewer_keywords:
- solution build configurations, about build configurations
- build configurations
- project build configurations
- build configurations, advanced
- projects [Visual Studio], build configuration
- solutions [Visual Studio], build configuration
ms.assetid: 934c727d-3a22-429c-bd13-3552cecf2e24
author: ghogen
ms.author: ghogen
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 3c6037bd6ed3b7899ff00bce202df7707356683a
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99971405"
---
# <a name="understand-build-configurations"></a>Общие сведения о конфигурациях сборок

Конфигурации сборок требуются для создания проектов с разными параметрами. Например, **Debug** и **Release** — это конфигурации, и при их создании используются разные параметры компилятора.  Одна конфигурация является активной и отображается на панели команд в верхней части интегрированной среды разработки.

![Активная конфигурация](media/understanding-build-configurations/active-config.png)

> [!NOTE]
> Этот раздел относится к Visual Studio в Windows. Информацию о Visual Studio для Mac см. в статье [Конфигурации сборки в Visual Studio для Mac](/visualstudio/mac/configurations).

Параметры "Конфигурация" и "Платформа" позволяют определить, где будут храниться выходные файлы сборки. Как правило, когда в Visual Studio выполняется сборка проекта, выходные данные помещаются во вложенную папку проекта с именем активной конфигурации (например, *bin/debug/x86*). Но это можно изменить.

Вы можете создавать свои конфигурации сборки на уровне решения и проекта. Конфигурация решения определяет, какие проекты включаются в сборку, когда эта конфигурация активна. В сборку будут включены только проекты, указанные в активной конфигурации решения. Если в Configuration Manager выбрано несколько целевых платформ, будут построены все проекты, которые применяются к этой платформе. Конфигурация проекта определяет, какие параметры сборки и компилятора используются при сборке проекта.

Чтобы создать, выбрать, изменить или удалить конфигурацию, можно использовать **Configuration Manager**. Чтобы открыть его, выберите в строке меню **Сборка** > **Configuration Manager** или просто введите **Configuration** в поле поиска. Можно также использовать список **Конфигурации решения** на панели инструментов **Стандартные**, чтобы выбрать конфигурацию или открыть **Configuration Manager**.

![Configuration Manager](media/understanding-build-configurations/config-manager.png)

> [!NOTE]
> Если вы не можете найти параметры конфигурации решения на панели инструментов и не можете получить доступ к **Configuration Manager**, можно применить параметры развертывания [!INCLUDE[vbprvb](../code-quality/includes/vbprvb_md.md)]. Дополнительные сведения см. в разделе [Практическое руководство. Управление конфигурациями с применением параметров разработчика Visual Basic](../ide/how-to-manage-build-configurations-with-visual-basic-developer-settings-applied.md).

По умолчанию конфигурации **Debug** и **Release** включены в проекты, которые создаются с использованием шаблонов [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]. Конфигурация **Debug** поддерживает отладку приложения, а конфигурация **Release** создает версию приложения, которое можно развернуть. Дополнительные сведения см. в разделе [Практическое руководство. Настройка конфигураций отладки и выпуска](../debugger/how-to-set-debug-and-release-configurations.md). Можно также создать пользовательские конфигурации решений и проектов. Дополнительные сведения см. в разделе [Практическое руководство. создавать и изменять конфигурации](../ide/how-to-create-and-edit-configurations.md).

## <a name="solution-configurations"></a>Конфигурации решения

Конфигурация решения указывает, как следует создавать и развертывать проекты в решении. Чтобы изменить конфигурацию решения или определить новую конфигурацию в **Configuration Manager**, в меню **Активная конфигурация решения** щелкните **Изменить** или **Создать**.

Каждая запись в поле **Контексты проекта** в конфигурации решений представляет проект в решении. Для каждой комбинации **Активная конфигурация решения** и **Активная платформа решения** можно задать способ использования каждого проекта. (Дополнительные сведения о платформах решений см. в разделе [Общие сведения о сборках платформ](../ide/understanding-build-platforms.md).)

При определении новой конфигурации решения и установке флажка **Создать новые конфигурации проектов**[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] автоматически назначает новую конфигурацию всем проектам. Аналогичным образом, при определении новой платформы решения и установке флажка **Создать новые платформы проектов**[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] автоматически назначает новую платформу всем проектам. Кроме того, если вы добавите проект, предназначенный для новой платформы, Visual Studio добавит эту платформу в список платформ решений и назначит ее всем проектам. Вы по-прежнему можете изменять параметры для каждого проекта.

Активная конфигурация решения также предоставляет контекст для IDE. Например, если вы работаете над проектом и конфигурация указывает, что он будет создан для мобильного устройства, на **панели инструментов** отобразятся только элементы, которые можно использовать в проекте мобильного устройства.

## <a name="project-configurations"></a>Конфигурации проекта

Параметры сборки и компилятора, используемых при сборке проекта определяют конфигурация и целевая платформа. В проекте могут быть разные параметры для каждой комбинации конфигурации и платформы. Чтобы изменить свойства проекта, откройте контекстное меню проекта в **обозревателе решений** и щелкните **Свойства**.  В верхней части вкладки **Сборка** конструктора проектов выберите активную конфигурацию, чтобы изменить параметры сборки.

![Конфигурации в конструкторе проектов](media/understanding-build-configurations/project-designer-configuration.png)

## <a name="building-multiple-configurations"></a>Сборка нескольких конфигураций

При построении решения с помощью команды **Сборка** > **Собрать решение**, Visual Studio выполняет сборку только активной конфигурации. Все проекты, указанные в этой конфигурации решения, будут построены, и единственной конфигурацией проекта будет только одна из них, указанная в активной конфигурации решения и активной платформе решения, которая отображается на панели инструментов в Visual Studio. Например, **Отладка** и **x86**. Другие определенные конфигурации и платформы не создаются.

Если требуется создать несколько конфигураций и платформ в одном действии, можно использовать параметр **Сборка** > **Пакетная сборка** в Visual Studio. Для получения доступа к этой функции, нажмите **Ctrl**+**Q**, чтобы открыть поле поиска, и введите `Batch build`. Пакетная сборка доступна не для всех типов проектов. См. практическое руководство по [ сборке с использованием нескольких конфигураций](how-to-build-multiple-configurations-simultaneously.md).

## <a name="how-visual-studio-assigns-project-configurations"></a>Назначение конфигураций проектов Visual Studio

Если вы определяете конфигурацию нового решения и не копируете параметры из существующего, Visual Studio использует следующие критерии для назначения конфигурации проектов по умолчанию. Критерии оцениваются в следующем порядке.

1. Если проект имеет имя конфигурации ( *\<configuration name> \<platform name>* ), которое точно совпадает с именем новой конфигурации решения, назначается эта конфигурация. В именах конфигураций не учитывается регистр.

1. Если проект имеет имя конфигурации, в котором часть имени конфигурации совпадает с новой конфигурацией решения, назначается эта конфигурация (независимо от того, совпадает ли часть имени платформы или нет).

1. Если совпадений все равно нет, назначается первая конфигурация, указанная в проекте.

## <a name="how-visual-studio-assigns-solution-configurations"></a>Назначение конфигураций решений Visual Studio

При создании конфигурации проекта (в **Configuration Manager** путем выбора пункта **Создать** в раскрывающемся меню столбца **Конфигурация** для этого проекта) и установке флажка **Создать новые конфигурации решений** Visual Studio ищет конфигурацию решения с таким же именем, чтобы создать проект на каждой поддерживаемой платформе. В некоторых случаях Visual Studio переименовывает существующие конфигурации решения или определяет новые.

Visual Studio использует следующие критерии для назначения конфигураций решения.

- Если конфигурация проекта не указывает платформу или указывает только одну платформу, будет найдена или добавлена конфигурация решения, имя которой совпадает с именем новой конфигурации проекта. Имя по умолчанию конфигурации решения не включает имя платформы; оно имеет формат *\<project configuration name>* .

- Если проект поддерживает несколько платформ, для каждой поддерживаемой платформы будет найдена или добавлена конфигурация решения. Имя каждой конфигурации решения включает как имя конфигурации проекта, так и имя платформы, и имеет формат *\<project configuration name> \<platform name>* .

## <a name="see-also"></a>См. также

- [Пошаговое руководство: сборка приложения](../ide/walkthrough-building-an-application.md)
- [Компиляция и сборка](../ide/compiling-and-building-in-visual-studio.md)
- [Проекты и решения](../ide/solutions-and-projects-in-visual-studio.md)
- [Образец построения C/C++](/cpp/build/reference/c-cpp-building-reference)
- [Общие сведения о платформах сборки](understanding-build-platforms.md)
- [Конфигурации сборки (Visual Studio для Mac)](/visualstudio/mac/configurations)
