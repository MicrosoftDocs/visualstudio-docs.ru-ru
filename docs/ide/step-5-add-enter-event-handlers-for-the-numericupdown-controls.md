---
title: Добавление обработчиков событий входа для элементов управления NumericUpDown
description: Добавление обработчиков событий входа для элементов управления NumericUpDown в учебнике по созданию ограниченной по времени математической головоломки.
ms.date: 11/04/2016
ms.custom: SEO-VS-2020
ms.topic: tutorial
ms.prod: visual-studio-windows
ms.technology: vs-ide-general
dev_langs:
- CSharp
- VB
ms.assetid: 45a99a5d-c881-4298-b74d-adb481dec5ee
author: j-martens
ms.author: jmartens
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: ef6207ebfa30401896a7681b599128cfb9648e96
ms.sourcegitcommit: 6d88913a8b5a9e5eda01d3f95205b4d138f440f8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2021
ms.locfileid: "107296330"
---
# <a name="step-5-add-enter-event-handlers-for-the-numericupdown-controls"></a>Шаг 5. Добавление обработчиков событий входа для элементов управления NumericUpDown

В пятой части этого руководства вам предстоит добавить обработчики событий <xref:System.Windows.Forms.Control.Enter>, чтобы сделать ввод ответов на задачи головоломки немного удобнее. Этот код будет выделять и удалять текущее значение в каждом элементе управления <xref:System.Windows.Forms.NumericUpDown>, как только игрок выберет элемент управления и начнет вводить другое значение.

> [!NOTE]
> Этот раздел входит в серию учебников, посвященных основам написания кода. Общие сведения об учебнике см. в разделе [Руководство 2. Создание ограниченной по времени математической головоломки](../ide/tutorial-2-create-a-timed-math-quiz.md).

## <a name="to-verify-the-default-behavior"></a>Проверка поведения по умолчанию

1. Запустите программу и запустите головоломку.

     В элементе управления **NumericUpDown** для задачи сложения курсор мигает рядом с цифрой **0**.

2. Введите **3** и обратите внимание, что в элементе управления отображается **30**.

3. Введите **5** и обратите внимание, что появляется число **350**, но через секунду оно меняется на **100**.

     Перед исправлением ошибки подумайте, почему она возникла. Подумайте, почему цифра **0** не исчезла, когда вы ввели **3**, и почему **350** меняется на **100**, причем не сразу.

     Такое поведение может показаться странным, но оно полностью соответствует логике кода. При нажатии кнопки **Запуск** ее свойство **Enabled** принимает значение **False**, из-за чего кнопка становится недоступна и отображается серым цветом. Программа переводит текущее выделение (фокус) на элемент управления, имеющий следующее наименьшее значение TabIndex, т. е. элемент управления NumericUpDown для задачи сложения. Когда вы нажимаете клавишу **TAB** для перехода к элементу управления NumericUpDown, курсор автоматически помещается в начало элемента управления, поэтому вводимые цифры появляются слева, а не справа. При вводе числа, превышающего значение свойства **MaximumValue** (которому присвоено значение 100), введенное число заменяется значением этого свойства.

## <a name="to-add-an-enter-event-handler-for-a-numericupdown-control"></a>Добавление обработчика событий "Ввод" для элемента управления NumericUpDown

1. Выберите первый элемент управления **NumericUpDown** (с именем sum) в форме, а затем в диалоговом окне **Свойства** выберите на панели инструментов значок **События**.

   ![Кнопка "События" на панели инструментов "Свойства"](media/control-properties-events.png)

   На вкладке **События** в диалоговом окне **Свойства** отображаются все события для выбранного в форме элемента, на которые можно реагировать (т. е. которые можно обрабатывать). Поскольку выбран элемент управления NumericUpDown, все перечисленные события относятся к нему.

2. Выберите событие **Ввод**, а затем введите `answer_Enter` и нажмите клавишу **ВВОД**.

   ![Ввод имени метода обработчика событий](media/enter-event.png)

   Вы только что добавили обработчик событий "Ввод" для элемента управления NumericUpDown с именем "sum" и назвали этот обработчик **answer_Enter**.

3. В методе для обработчика событий **answer_Enter** введите следующий код:

     :::code language="vb" source="../snippets/visualbasic/VS_Snippets_VBCSharp/vbexpresstutorial3step5_6/vb/form1.vb" id="Snippet11":::
     :::code language="csharp" source="../snippets/csharp/VS_Snippets_VBCSharp/vbexpresstutorial3step5_6/cs/form1.cs" id="Snippet11":::

     [!INCLUDE [devlang-control-csharp-vb](./includes/devlang-control-csharp-vb.md)]

     Этот код может показаться сложным, однако в нем легко разобраться, если просмотреть его шаг за шагом. Сначала посмотрите на верхнюю часть метода — `object sender` в C# или `sender As System.Object` в Visual Basic. Этот параметр ссылается на объект, событие которого срабатывает. Он называется отправителем. В данном случае объектом-отправителем является элемент управления NumericUpDown. Поэтому в первой строке метода указывается, что отправителем является не просто какой-либо объект, а именно элемент управления NumericUpDown. (каждый элемент управления NumericUpDown это объект, но не каждый объект, это элемент управления NumericUpDown). Элемент управления NumericUpDown в этом методе называется **answerBox**, поскольку он будет использоваться для всех элементов управления NumericUpDown в форме, а не только для элемента управления NumericUpDown с именем "sum". Поскольку переменная answerBox объявлена в этом методе, ее область действия ограничена этим методом. Иными словами, эту переменную можно использовать только внутри этого метода.

     В следующей строке кода выполняется проверка, что answerBox был успешно преобразован из объекта в элемент управления NumericUpDown. Если бы преобразование завершилось неудачей, переменная имела бы значение `null` (C#) или `Nothing` (Visual Basic). Третья строка получает длину ответа, который отображается в элементе управления NumericUpDown, а четвертая строка выделяет текущее значение в элементе управления, основываясь на этой длине. Теперь, когда игрок выбирает элемент управления, Visual Studio запускает это событие, в результате чего текущий ответ выделяется. Как только игрок начинает вводить другой ответ, предыдущий ответ удаляется и заменяется новым ответом.

4. В **конструкторе Windows Forms** выберите элемент управления **NumericUpDown** с именем difference.

5. На странице **События** диалогового окна **Свойства** прокрутите вниз до события **Ввод**, щелкните направленную вниз стрелку в конце строки, а затем выберите обработчик событий `answer_Enter`, который вы только что добавили.

6. Повторите предыдущий шаг для элементов управления NumericUpDown с именами product и quotient (т. е. произведение и частное).

7. Сохраните программу и запустите ее.

     При выборе элемента управления **NumericUpDown** существующее значение автоматически выделяется и удаляется, когда вы начинаете вводить другое значение.

## <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал

- Следующий раздел руководства: **[Шаг 6. Добавление задачи на вычитание](../ide/step-6-add-a-subtraction-problem.md)** .

- Предыдущий раздел: [Шаг 4. Добавление метода CheckTheAnswer()](../ide/step-4-add-the-checktheanswer-parens-method.md).
