---
title: Шаг 2. Добавление случайного объекта и списка значков
description: Узнайте, как создать набор парных символов для игры.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: tutorial
ms.prod: visual-studio-windows
ms.technology: vs-ide-general
dev_langs:
- CSharp
- VB
ms.assetid: 95faea28-eddc-4cfa-95fb-3b34b5a976d7
author: j-martens
ms.author: jmartens
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: c7a9eb9a70bcfa72c6d973f8f3aa8380262c6d22
ms.sourcegitcommit: 6d88913a8b5a9e5eda01d3f95205b4d138f440f8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2021
ms.locfileid: "107296529"
---
# <a name="step-2-add-a-random-object-and-a-list-of-icons"></a>Шаг 2. Добавление случайного объекта и списка значков

На этом шаге будет создан набор парных символов для игры. Каждый символ добавляется в две случайные ячейки в TableLayoutPanel в форме. Для этого используются два оператора `new`, создающие два объекта. Первый является объектом <xref:System.Random>. Такой же объект использовался в игре "Математическая головоломка". Он используется в этом коде для случайного выбора ячейки в TableLayoutPanel. Второй объект, который может показаться вам новым, это объект <xref:System.Collections.Generic.List%601>, используемый для хранения случайно выбранных символов.

## <a name="to-add-a-random-object-and-a-list-of-icons"></a>Добавление случайного объекта и списка значков

1. В **обозревателе решений** выберите *Form1.cs*, если используется C#, или *Form1.vb*, если используется Visual Basic, а затем в строке меню выберите **Вид** > **Код**. В качестве альтернативы можно нажать клавишу **F7** или дважды щелкнуть **Form1** в **обозревателе решений**.

     Будет показан модуль кода формы Form1.

2. В имеющийся код добавьте следующий фрагмент.

     :::code language="csharp" source="../snippets/csharp/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/cs/form1.cs" id="Snippet1":::
     :::code language="vb" source="../snippets/visualbasic/VS_Snippets_VBCSharp/vbexpresstutorial4step2_3_4/vb/form1.vb" id="Snippet1":::

      > [!IMPORTANT]
      > Используйте элемент управления языка программирования в правом верхнем углу этой страницы, чтобы просмотреть фрагмент кода на C# или Visual Basic.<br><br>![Элемент управления языка программирования для Docs.Microsoft.com](../ide/media/docs-programming-language-control.png)

      При написании кода на языке C# убедитесь, что вы помещаете код после открывающей фигурной скобки и сразу после объявления класса (`public partial class Form1 : Form`). При написании кода на языке Visual Basic поместите код сразу после объявления класса (`Public Class Form1`).

3. При добавлении объекта List обратите внимание на открывшееся окно **IntelliSense**. Ниже приведен пример на языке C#, но аналогичный текст отобразится и при добавлении списка в Visual Basic.

     ![Окно свойств, отображающее событие Click](../ide/media/express_listintellisense.png)<br/>***Окно** IntelliSense*

    > [!NOTE]
    > Окно IntelliSense отображается только при вводе кода вручную. При копировании и вставке кода оно не отображается.

     Код проще понять, если рассматривать его (и примечания) небольшими частями. Объекты List можно использовать для отслеживания элементов множества различных типов. Список может содержать числа, значения true или false, текст и другие объекты. Объект List также может содержать другие объекты List. Объект List состоит из элементов, и каждый список содержит только один тип элементов. Поэтому список чисел может содержать только числа. В него нельзя добавить текст. Аналогично нельзя добавлять числа в список значений true или false.

     При создании объекта `List` с помощью оператора `new` необходимо указать ему, данные какого типа будут храниться в этом объекте. Вот почему подсказка в верхней части окна **IntelliSense** указывает на тип элементов списка. Вот что значит код `List<string>` (в C#) и `List(Of String)` (в Visual Basic): это объект `List`, содержащий элементы типа `string`. Строка используется программой для хранения текста, о чем и сообщается в подсказке справа от окна **IntelliSense**.

4. Рассмотрим, почему в Visual Basic сначала необходимо создать временный массив, а в C# можно создавать список с помощью одного оператора. Это связано с тем, что язык С# имеет *инициализаторы коллекции*, которые подготавливают список к приему значений. В Visual Basic можно использовать инициализатор коллекции. Однако для обеспечения совместимости с предыдущей версией Visual Basic рекомендуется использовать предыдущий код.

     При использовании инициализатора коллекции с оператором `new` после создания нового объекта List программа заполняет его данными, которые указаны внутри фигурных скобок. В этом случае будет инициализирован список строк с именем icons, содержащий шестнадцать строк. Каждая из этих строк представляет одну букву, которая соответствует значку, отображаемому в метке. Таким образом, игра будет иметь пару восклицательных знаков, пару прописных букв N, пару запятых и т. д. (Если эти символы заданы шрифтом Webdings, они отображаются как символы, такие как автобус, велосипед, паук и т. д.) Объект List будет содержать шестнадцать строковых значений, по одному для каждой ячейки в элементе TableLayoutPanel.

    > [!NOTE]
    > В Visual Basic получится такой же результат, но сначала строки помещаются во временный массив, который затем преобразуется в объект List. Массив похож на список, за исключением того, например, что массивы создаются фиксированного размера. Списки можно уменьшать и увеличивать по мере необходимости, что важно для этой программы.

## <a name="to-continue-or-review"></a>Продолжить или повторить пройденный материал

- Следующий раздел руководства: [**Шаг 3. Присвойте каждой метке случайный значок**](../ide/step-3-assign-a-random-icon-to-each-label.md).

- Предыдущий раздел руководства: [Шаг 1. Создание проекта и добавление таблицы в форму](../ide/step-1-create-a-project-and-add-a-table-to-your-form.md).
