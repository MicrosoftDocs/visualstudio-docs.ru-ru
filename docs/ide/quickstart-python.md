---
title: Краткое руководство. Создание веб-приложения Python с помощью Visual Studio
titleSuffix: ''
description: В рамках этого краткого руководства вы создадите простое веб-приложение на Python с использованием Visual Studio и платформы Flask.
ms.date: 03/07/2019
ms.technology: vs-python
ms.topic: quickstart
author: JoshuaPartlow
ms.author: joshuapa
manager: jmartens
ms.custom:
- vs-acquisition
- SEO-VS-2020
ms.workload:
- python
- data-science
ms.openlocfilehash: a94d28b6f9cb2aa9ee870dd6c4cc914e09b6efee
ms.sourcegitcommit: e3a364c014ccdada0860cc4930d428808e20d667
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2021
ms.locfileid: "112386258"
---
# <a name="quickstart-create-your-first-python-web-app-using-visual-studio"></a>Краткое руководство. Создание первого веб-приложения Python с помощью Visual Studio

В рамках этого краткого (на 5–10 минут) знакомства с Visual Studio в качестве IDE для Python создается простое веб-приложение Python на платформе Flask. Вы создадите проект при помощи дискретных действий, которые помогут ознакомиться с базовыми функциями Visual Studio.

::: moniker range="vs-2017"

Установите Visual Studio бесплатно со страницы [скачиваемых материалов Visual Studio](https://visualstudio.microsoft.com/vs/older-downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=vs+2017+download), если еще не сделали этого. В установщике выберите рабочую нагрузку **Разработка на Python**.

::: moniker-end

::: moniker range=">=vs-2019"

Установите Visual Studio бесплатно со страницы [скачиваемых материалов Visual Studio](https://visualstudio.microsoft.com/downloads), если еще не сделали этого. В установщике выберите рабочую нагрузку **Разработка на Python**.

::: moniker-end

## <a name="create-the-project"></a>Создание проекта

Ниже приведены инструкции по созданию пустого проекта, который служит контейнером для приложения:

::: moniker range="vs-2017"
1. Откройте Visual Studio 2017.

2. В верхней строке меню последовательно выберите **Файл > Создать > Проект**.

3. В диалоговом окне **Новый проект** введите в поле поиска в правом верхнем углу "Веб-проект Python", в списке по центру выберите **Веб-проект**, присвойте проекту имя, например HelloPython, и нажмите кнопку **ОК**.

    ![Диалоговое окно создания проекта с выбранным веб-проектом Python](media/quickstart-python-00-web-project.png)

    Если вы не видите шаблон проекта Python, запустите **Visual Studio Installer**, выберите **Дополнительно** > **Изменить**, выберите рабочую нагрузку **Разработка Python**, затем выберите **Изменить**.

    ![Рабочая нагрузка разработки Python в установщике Visual Studio](../python/media/installation-python-workload.png)

4. Новый проект откроется в **обозревателе решений** в правой области. Проект пока пуст, так как он не содержит других файлов.

    ![Созданный пустой проект в обозревателе решений](media/quickstart-python-01-empty-project.png)
::: moniker-end

::: moniker range=">=vs-2019"
1. Запустите Visual Studio 2019.
2. На начальном экране выберите **Создать новый проект**.
3. В диалоговом окне **Создать новый проект** введите "Python веб" в поле поиска вверху, выберите **Веб-проект** в среднем списке и нажмите **Далее**:

    ![Экран создания нового проекта с выбранным веб-проектом Python](media/quickstart-python-00-web-project-2019a.png)

    Если вы не видите шаблон проекта Python, запустите **Visual Studio Installer**, выберите **Дополнительно** > **Изменить**, выберите рабочую нагрузку **Разработка Python**, затем выберите **Изменить**.

    ![Рабочая нагрузка разработки Python в установщике Visual Studio](../python/media/installation-python-workload.png)

4. В следующем диалоговом окне **Настроить новый проект** введите HelloPython в качестве **имени проекта**, укажите расположение и выберите **Создать**. (**Имя решения** автоматически устанавливается в соответствии с **именем проекта**.)

    ![Диалоговое окно "Настроить новый проект"](media/quickstart-python-00-web-project-2019b.png)

5. Новый проект откроется в **обозревателе решений** в правой области. Проект пока пуст, так как он не содержит других файлов.

    ![Созданный пустой проект в обозревателе решений](media/quickstart-python-01-empty-project-2019.png)
::: moniker-end

**Вопрос. В чем преимущество создания проекта в Visual Studio для приложений Python?**

**Ответ.** Приложения Python обычно определяются только с помощью файлов и папок, но такая простая структура может стать громоздкой, так как приложения увеличиваются в размере и могут содержать автоматически сгенерированные файлы, JavaScript для веб-приложений и т. д. Проект Visual Studio помогает управлять этими сложными моментами. Проект (файл *.pyproj*) определяет все исходные файлы и файлы содержимого, связанные с проектом, содержит сведения о сборке каждого файла, хранит информацию для интеграции с системами управления версиями и помогает упорядочить приложение в виде логических компонентов.

**Вопрос. Что представляет собой "решение", которое отображается в обозревателе решений?**

**Ответ.** Решение Visual Studio является контейнером, который помогает управлять одним или несколькими связанными проектами как группой. В решении хранятся общие параметры конфигурации, которые не предназначены специально для отдельных проектов. В проектах решения также могут использоваться взаимные ссылки, то есть, когда при запуске одного проекта (приложения Python) автоматически создается другой (например, расширение C++, используемое в приложении Python).

## <a name="install-the-flask-library"></a>Установка библиотеки Flask

Веб-приложения на Python почти всегда используют одну из множества доступных библиотек Python для обработки низкоуровневых процессов, таких как маршрутизация веб-запросов и формирование ответов. С этой целью Visual Studio предоставляет множество шаблонов для веб-приложений, один из которых вы будете использовать позднее при выполнении задач этого руководства.

А сейчас выполните следующие инструкции по установке библиотеки Flask в глобальном окружении по умолчанию, которое используется для этого проекта в Visual Studio.

::: moniker range="vs-2017"
1. Разверните в проекте узел **Окружения Python**, чтобы увидеть среду по умолчанию для проекта.

    ![Среда по умолчанию в обозревателе решений](media/quickstart-python-02-default-environment.png)

2. Щелкните окружение правой кнопкой мыши и выберите команду **Установить пакет Python**. Эта команда открывает вкладку **Пакеты** в окне **Окружения Python**.

3. В поле поиска введите flask и выберите результат **pip install flask from PyPI**. Подтвердите запросы на права администратора и наблюдайте за ходом выполнения в окне **Вывод** в Visual Studio. (Запрос на повышение прав выводится в том случае, если папка пакетов для глобальной среды находится в защищенной области, такой как *C:\Program Files*.)

    ![Установка библиотеки Flask с помощью pip](media/quickstart-python-03-install-package.png)
::: moniker-end
::: moniker range=">=vs-2019"
1. Разверните в проекте узел **Окружения Python**, чтобы увидеть среду по умолчанию для проекта.

    ![Среда по умолчанию в обозревателе решений](media/quickstart-python-02-default-environment-2019.png)

2. Щелкните окружение правой кнопкой мыши и выберите команду **Управлять пакетами Python...** . Эта команда открывает вкладку **Пакеты (PyPI)** в окне **Окружения Python**.

3. В поле поиска введите "flask". Если **Flask** отображается под полем поиска, этот шаг можно пропустить. В противном случае выберите **Запустить команду: pip install flask**. Подтвердите запросы на права администратора и наблюдайте за ходом выполнения в окне **Вывод** в Visual Studio. (Запрос на повышение прав выводится в том случае, если папка пакетов для глобальной среды находится в защищенной области, такой как *C:\Program Files*.)

    ![Установка библиотеки Flask с помощью pip](media/quickstart-python-03-install-package-2019.png)
::: moniker-end

4. После установки библиотека появится в среде в **обозревателе решений**. Это означает, что ее можно использовать в коде Python.

    ::: moniker range="vs-2017"
    ![Установленная библиотека Flask в обозревателе решений](media/quickstart-python-04-package-installed.png)
    ::: moniker-end
    ::: moniker range=">=vs-2019"
    ![Установленная библиотека Flask в обозревателе решений](media/quickstart-python-04-package-installed-2019.png)
    ::: moniker-end

> [!Note]
> Вместо установки библиотек в глобальном окружении разработчики обычно создают "виртуальное окружение", в котором устанавливаются библиотеки для определенного проекта. Шаблоны Visual Studio обычно обеспечивают такую возможность, как описано в [кратком руководстве по созданию проекта Python с помощью шаблона](../python/quickstart-02-python-in-visual-studio-project-from-template.md).

**Вопрос. Где можно подробнее узнать о других доступных пакетах Python?**

**Ответ.** Перейдите к странице [индекса пакетов Python](https://pypi.org/).

## <a name="add-a-code-file"></a>Добавление файла кода

Теперь можно добавить немного кода на Python, чтобы реализовать простейшее веб-приложение.

1. В **обозревателе решений** щелкните правой кнопкой мыши проект и последовательно выберите **Добавить > Новый элемент**.

1. В открывшемся диалоговом окне выберите элемент **Пустой файл Python**, присвойте файлу имя *app.py* и нажмите кнопку **Добавить**. Файл автоматически откроется в редакторе кода Visual Studio.

1. Скопируйте следующий код и вставьте его в *app.py*:

    ```python
    from flask import Flask

    # Create an instance of the Flask class that is the WSGI application.
    # The first argument is the name of the application module or package,
    # typically __name__ when using a single module.
    app = Flask(__name__)

    # Flask route decorators map / and /hello to the hello function.
    # To add other resources, create functions that generate the page contents
    # and add decorators to define the appropriate resource locators for them.

    @app.route('/')
    @app.route('/hello')
    def hello():
        # Render the page
        return "Hello Python!"

    if __name__ == '__main__':
        # Run the app server on localhost:4449
        app.run('localhost', 4449)
    ```

1. Возможно, вы заметили, что в диалоговом окне **Добавить > Новый элемент** отображается много других типов файлов, которые можно добавить в проект Python, включая класс Python, пакет Python, модульный тест Python, файлы *web.config* и многое другое. Как правило, эти так называемые шаблоны элементов прекрасно подходят для быстрого создания файлов при помощи полезного стандартного кода.

**Вопрос. Где можно подробнее узнать о Flask?**

**Ответ.** Ознакомьтесь с документацией по Flask. Начать можно с [краткого руководства по Flask](https://flask.palletsprojects.com/en/1.1.x/quickstart/#quickstart).

## <a name="run-the-application"></a>Запуск приложения

1. В **обозревателе решений** щелкните правой кнопкой мыши файл *app.py* и выберите пункт **Set as startup file** (Задать как файл запуска). С помощью этой команды файл кода задается как запускаемый в Python при запуске приложения.

    ::: moniker range="vs-2017"
    ![Задание файла запуска для проекта в обозревателе решений](media/quickstart-python-05-set-as-startup-file.png)
    ::: moniker-end
    ::: moniker range=">=vs-2019"
    ![Задание файла запуска для проекта в обозревателе решений](media/quickstart-python-05-set-as-startup-file-2019.png)
    ::: moniker-end

2. В **обозревателе решений** щелкните проект правой кнопкой мыши и выберите пункт **Свойства**. Затем перейдите на вкладку **Отладка** и присвойте свойству **Номер порта** значение `4449`. Благодаря этому в Visual Studio будет запускаться браузер, используя `localhost:4449`, чтобы обеспечить соответствие аргументам `app.run` в коде.

3. Выберите команду **Отладка > Запуск без отладки** (**CTRL**+**F5**), позволяющую сохранить изменения в файлах и запустить приложение.

4. Появится командное окно с сообщением **Запуск в https:\//localhost:4449**, а затем в окне браузера откроется узел `localhost:4449` и вы увидите сообщение "Hello, Python!" В командном окне также отобразится запрос GET с состоянием 200.

    Если браузер не открывается автоматически, запустите выбранный вами браузер и перейдите к `localhost:4449`.

    Если в командном окне отображается только интерактивная оболочка Python или если это окно появляется на экране и сразу исчезает, убедитесь в том, что файл *app.py* был задан в качестве запускаемого на шаге 1 выше.

5. Перейдите к `localhost:4449/hello`, чтобы проверить, работает ли декоратор для ресурса `/hello`. В командном окне снова отобразится запрос GET с состоянием 200. Вы можете попробовать и несколько других URL-адресов. Вы увидите, что в командном окне для них отображается код состояния 404.

6. Закройте командное окно, чтобы остановить приложение, а затем закройте окно браузера.

**Вопрос. В чем разница между командами "Запуск без отладки" и "Начать отладку"?**

**Ответ.** Команда **Начать отладку** используется, чтобы запустить приложение в контексте [отладчика Visual Studio](../python/debugging-python-in-visual-studio.md), что позволяет задавать точки останова, просматривать переменные и осуществлять построчное выполнение кода. С отладчиком приложения могут работать медленнее, так как для отладки используются различные обработчики. С помощью команды **Запуск без отладки**, напротив, приложение запускается напрямую, как если бы использовалась командная строка. При этом отсутствует контекст отладки. Браузер запускается автоматически, и выполняется переход к URL-адресу, указанному на вкладке свойств проекта **Отладка**.

## <a name="next-steps"></a>Следующие шаги

Поздравляем с запуском вашего первого приложения Python из Visual Studio, в процессе которого вы немного ознакомились с особенностями использования Visual Studio в качестве среды IDE для Python!

> [!div class="nextstepaction"]
> [Развертывание приложения в Службе приложений Azure](../python/publishing-python-web-applications-to-azure-from-visual-studio.md)

Так как приведенные в этом руководстве инструкции довольно общие, вы, вероятно, догадались, что их можно и нужно автоматизировать. Такая автоматизация выполняется при помощи шаблонов проектов Visual Studio. Изучите [краткое руководство по созданию проекта Python на основе шаблона](../python/quickstart-02-python-in-visual-studio-project-from-template.md), чтобы узнать, как создается веб-приложение, похожее на созданное вами в рамках этой статьи, но с меньшим количеством шагов.

Чтобы перейти к более полному учебнику по работе с Python в Visual Studio, включая использование интерактивного окна, отладку, визуализацию данных и работу с Git, выберите [Учебник. Начало работы с Python в Visual Studio](../python/tutorial-working-with-python-in-visual-studio-step-01-create-project.md).

Более подробно ознакомиться с возможностями Visual Studio можно по приведенным ниже ссылкам.

- Сведения о [шаблонах веб-приложений Python в Visual Studio](../python/python-web-application-project-templates.md).
- Сведения об [отладке Python](../python/debugging-python-in-visual-studio.md)
- Общие сведения об [интегрированной среде разработки Visual Studio](../get-started/visual-studio-ide.md).
