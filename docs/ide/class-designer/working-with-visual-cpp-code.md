---
title: Работа с кодом Visual C++ (конструктор классов)
description: Сведения о том, как использовать диаграммы классов для проектирования и визуализации кодовой точки, классов и других типов C++ в проекте.
ms.custom: SEO-VS-2020
ms.date: 06/21/2017
ms.topic: conceptual
f1_keywords:
- vs.classdesigner.cpplimitation
helpviewer_keywords:
- C++, Class Designer
- Class Designer, C++ support
- Class Designer, limitations
- Class Designer, tasks in C++
- C++, class diagrams
- C++, class diagrams
- C++, Class Designer
ms.assetid: f5b40921-2ef7-4de0-b595-45b44c79ffa6
author: TerryGLee
ms.author: tglee
manager: jmartens
ms.workload:
- cplusplus
ms.openlocfilehash: 62993611ef7359095512f494767bbd3ea4cce5d9
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99946583"
---
# <a name="work-with-c-code-in-class-designer"></a>Работа с кодом С++ в Конструкторе классов

**Конструктор классов** отображает визуальную область конструктора, которая называется *диаграммой классов* и предоставляет визуальное преставление элементов кода в проекте. Схемы классов можно использовать для разработки и визуализации классов и других типов в проекте.

**Конструктор классов** поддерживает следующие элементы кода C++:

- Класс (похож на фигуру управляемого класса, за исключением того, что он может иметь несколько отношений наследования)

- Анонимный класс (отображает созданное представлением класса имя для анонимного типа)

- Класс шаблона

- Структура

- Перечисление.

- Макрос (отображает представление макроса после обработки)

- Typedef

> [!NOTE]
> Это не аналог схемы классов UML, которую можно создать в проекте моделирования. Дополнительные сведения см. в разделе [UML-схемы классов: справочник](../../modeling/what-s-new-for-design-in-visual-studio.md).

## <a name="troubleshoot-type-resolution-and-display-issues"></a>Устранение неполадок при разрешении типов и отображение проблем

### <a name="location-of-source-files"></a>Расположение исходных файлов

**Конструктор классов** не отслеживает расположение исходных файлов. Таким образом, при изменении структуры проекта или перемещении исходных файлов в проекте **конструктор классов** может потерять тип (особенно исходный тип определения типа, базовых классов или типов связи). Может возникнуть ошибка, например **Конструктору классов не удалось отобразить этот тип**. В этом случае перетащите измененный или перемещенный исходный код в схему классов и повторно отобразите ее.

### <a name="update-and-performance-issues"></a>Проблемы с обновлением и производительностью

Для проектов Visual C++ для отображения изменения в исходном файле на схеме классов может потребоваться от 30 до 60 секунд. Из-за такой задержки **конструктор классов** может выдать ошибку **В выбранном блоке не найдены типы**. После возникновения подобной ошибки нажмите кнопку **Отмена** в сообщении об ошибке и дождитесь отображения элемента кода в **представлении классов**. После этого **конструктор классов** должен быть в состоянии отобразить этот тип.

Если схема классов не обновляется для вывода внесенных в код изменений, может потребоваться закрыть схему и снова открыть ее.

### <a name="type-resolution-issues"></a>Проблемы разрешения типа

**Конструктор классов** может оказаться не в состоянии разрешить типы по следующим причинам:

- Тип находится в проекте или сборке, на которые нет ссылок из проекта, содержащего эту схему классов. Чтобы исправить эту ошибку, добавьте ссылку на проект или сборку, содержащие данный тип. Дополнительные сведения см. в статье [Управление ссылками в проекте](../managing-references-in-a-project.md).

- Тип находится в неправильной области действия, поэтому **конструктор классов** не может его найти. Убедитесь, что в коде присутствует оператор `using`, `imports` или `#include`. Убедитесь также, что этот тип (или связанный тип) не был перемещен из пространства имен, в котором он находился изначально.

- Тип не существует (или был закомментирован). Чтобы исправить эту ошибку, убедитесь, что тип не закомментирован и не удален.

- Тип находится в библиотеке, на которую ссылается директива #import. В качестве возможного обходного пути можно вручную добавить сформированный код (TLH-файл) в директиву #include в файле заголовка.

- Убедитесь, что **конструктор классов** поддерживает введенный вами тип. См. раздел [Ограничения для элементов кода C++](#limitations-for-c-code-elements).

Для разрешения типов вы с большой вероятностью столкнетесь с ошибкой **Не найдены коды для одной или более фигур в диаграмме классов "\<element>"** . Это сообщение об ошибке не обязательно означает, что код содержит ошибку. Оно указывает лишь на то, что конструктору классов не удалось отобразить код. Попробуйте сделать следующее.

- Убедитесь, что тип существует. Убедитесь, что исходный код не был случайно закомментирован или удален.

- Попытайтесь разрешить тип. Тип может находиться в проекте или сборке, на которые нет ссылок из проекта, содержащего эту схему классов. Чтобы исправить эту ошибку, добавьте ссылку на проект или сборку, содержащие данный тип. Дополнительные сведения см. в статье [Управление ссылками в проекте](../managing-references-in-a-project.md).

- Убедитесь, что тип находится в правильной области действия, чтобы конструктор классов мог его найти. Убедитесь, что в коде присутствует оператор `using`, `imports` или `#include`. Убедитесь также, что этот тип (или связанный тип) не был перемещен из пространства имен, в котором он находился изначально.

### <a name="troubleshoot-other-error-messages"></a>Диагностика других сообщений об ошибках

На открытых форумах Microsoft Developer Network (MSDN) можно получить помощь в устранении ошибок и предупреждений. См. [Форум по конструкторам классов Visual Studio](https://social.msdn.microsoft.com/Forums/en-US/home?forum=vsclassdesigner).

## <a name="limitations-for-c-code-elements"></a>Ограничения для элементов кода C++

- При загрузке проекта на С++ **конструктор классов** работает в режиме только для чтения. Вы можете изменить схему классов, но не можете сохранить изменения из схемы классов обратно в исходный код.

- **Конструктор классов** поддерживает только собственную семантику C++. Для проектов C++, которые компилируются в управляемый код, **конструктор классов** будет визуализировать только те элементы кода, которые являются собственными типами. Таким образом, вы можете добавить диаграмму классов в проект, но **конструктор классов** не позволит визуализировать элементы, в которых свойству `IsManaged` задано значение `true` (то есть типы значений и ссылочные типы).

- Для проектов C++ **конструктор классов** считывает только определение типа. Например, предположим, что вы определяете тип в файле заголовков (H) и определяете его члены в файле реализации (CPP). При выполнении команды "Просмотр схемы класса" для файла реализации (CPP) **конструктор класса** не отображает ничего. Еще один пример, если вы выполняете команду "Просмотр схемы класса" для CPP-файла, который использует оператор `#include` для включения других файлов, но не содержит фактические определения классов, **конструктор класса** снова не отображает ничего.

- IDL-файлы, которые определяют COM-интерфейсы и библиотеки типов, не отображаются в схемах, пока не будут скомпилированы в машинный код C++.

- **Конструктор классов** не поддерживает глобальные функции и переменные.

- **Конструктор классов** не поддерживает объединения. Это особый тип класса, в котором объем выделяемой памяти равен размеру самого большого элемента данных объединения.

- `int`Конструктор классов`char` не отображает базовые типы данных, такие как **и**.

- **Конструктор классов** не отображает типы, которые определены за пределами текущего проекта, если только проект не содержит правильные ссылки на эти типы.

- **Конструктор классов** может отобразить вложенные типы, но не отношения между вложенным типом и другими типами.

- **Конструктор классов** не может отобразить типы, которые относятся к void или являются производными от типа void.

## <a name="see-also"></a>См. также раздел

- [Разработка и просмотр классов и типов](designing-and-viewing-classes-and-types.md)
- [Дополнительные сведения об ошибках конструктора классов](additional-information-about-errors.md)
- [Классы проектирования C++ в конструкторе классов](visual-cpp-classes.md)
- [Структуры C++ в конструкторе классов](visual-cpp-structures.md)
- [Перечисления C++ в конструкторе классов](visual-cpp-enumerations.md)
- [Определения типов C++ в конструкторе классов](visual-cpp-typedefs.md)
