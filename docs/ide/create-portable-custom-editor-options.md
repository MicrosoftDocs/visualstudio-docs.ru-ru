---
title: Параметры EditorConfig
description: Сведения о том, как добавить файл EditorConfig в проект или базу кода, чтобы обеспечить использование единообразного стиля написания кода всеми разработчиками, работающими с базой кода.
ms.custom: SEO-VS-2020
ms.date: 09/02/2020
ms.topic: how-to
helpviewer_keywords:
- editorconfig [Visual Studio]
author: mikadumont
ms.author: midumont
manager: jmartens
ms.openlocfilehash: 8ab90fda1f14521d59982ef7b5d20998cf61e505
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99956845"
---
# <a name="create-portable-custom-editor-settings-with-editorconfig"></a>Создание переносимых настраиваемых параметров редактора с EditorConfig

В проект или базу кода можно добавить файл EditorConfig, чтобы обеспечить использование единообразного стиля написания кода всеми разработчиками, работающими с базой кода. Параметры EditorConfig имеют приоритет над глобальными параметрами текстового редактора Visual Studio. Это означает, что каждую базу кода можно настроить для использования параметров текстового редактора, относящихся к конкретному проекту. Вы по-прежнему можете задать личные настройки редактора в диалоговом окне **Параметры** среды Visual Studio. Эти параметры применяются при работе с базой кода, в которой нет файла *EDITORCONFIG*, или если файл *EDITORCONFIG* не переопределяет тот или иной параметр. Примером такой настройки может служить стиль отступов: символы табуляции или пробелы.

Параметры EditorConfig поддерживаются различными редакторами кода и интегрированными средами разработки, включая Visual Studio. Этот файл является переносимым компонентом, который передается вместе с кодом и позволяет применять стили написания кода даже вне среды Visual Studio.

::: moniker range=">=vs-2019"

При добавлении файла EditorConfig в проект в Visual Studio новые строки кода форматируются в соответствии с параметрами в файле EditorConfig. Форматирование существующего кода изменяется только при выполнении одной из следующих команд:

 - команда [Очистка кода](../ide/code-styles-and-code-cleanup.md) (**CTRL**+**K**, **CTRL**+**E**), которая применяет параметры пробелов, например стиль отступов, и выбранные параметры стиля кода, например способ сортировки директив `using`;
 - команда **Правка** > **Дополнительно** > **Форматировать документ** (или **CTRL**+**K**, **CTRL**+**D** в профиле по умолчанию), которая применяет только параметры пробелов, например стиль отступов.

 ::: moniker-end

::: moniker range="=vs-2017"

При добавлении файла EditorConfig в проект в Visual Studio новые строки кода форматируются в соответствии с параметрами в файле EditorConfig. Форматирование имеющегося кода не изменяется, если не отформатировать документ (**Правка** > **Дополнительно** > **Форматировать документ** или клавиши **CTRL**+**K**, **CTRL**+**D** в профиле по умолчанию). Форматирование документа влияет только на параметры пробелов, например на стиль отступов, если только вы не настроили команду "Форматировать документ" для [дополнительной очистки кода](../ide/code-styles-and-code-cleanup.md#apply-code-styles).

 ::: moniker-end

::: moniker range="vs-2017"

Вы можете выбрать, какие параметры EditorConfig команда **Форматировать документ** будет применять к [странице параметров **форматирования**](reference/options-text-editor-csharp-formatting.md#format-document-settings).

::: moniker-end

> [!NOTE]
> Этот раздел относится к Visual Studio в Windows. Информацию о Visual Studio для Mac см. в статье [EditorConfig в Visual Studio для Mac](/visualstudio/mac/editorconfig).

## <a name="code-consistency"></a>Согласованность кода

Параметры в файлах EditorConfig позволяют поддерживать согласованность стилей и параметров написания кода для базы кода, например стиль отступа, интервал табуляции, символ конца строки, кодирование и т. д., независимо от используемого редактора или интегрированной среды разработки. Например, при программировании на языке C#, если в базе кода существует соглашение о том, что отступы всегда состоят из пяти символов пробела, для документов используется кодировка UTF-8 и каждая строка всегда заканчивается CR/LF, а файл *EDITORCONFIG* можно настроить для выполнения этих условий.

Соглашения для кодирования, используемые вами в личных проектах, могут отличаться от тех, которые действуют в командных проектах. Например, вы предпочитаете, чтобы при вставке отступа во время написания кода добавлялся символ табуляции. Однако в команде может быть принято, чтобы при отступе вместо символа табуляции добавлялись четыре символа пробела. Файлы EditorConfig устраняют эту проблему, позволяя создавать конфигурацию для каждого сценария.

Поскольку параметры содержатся в файле в базе кода, они передаются вместе с этой базой кода. Параметры текстового редактора применяются при открытии файла кода в редакторе, совместимом с EditorConfig. Дополнительные сведения о файлах EditorConfig см. на веб-сайте [EditorConfig.org](https://editorconfig.org/).

> [!NOTE]
> Соглашения, заданные в файле EditorConfig, в настоящее время не могут быть реализованы в конвейере CI/CD с созданием ошибки или предупреждения. Все отклонения от стиля видны только в редакторе Visual Studio и **списке ошибок**.

## <a name="supported-settings"></a>Поддерживаемые параметры

Редактор в Visual Studio поддерживает основной набор [свойств EditorConfig](https://editorconfig.org/#supported-properties):

- indent_style
- indent_size
- tab_width
- end\_of_line
- charset
- trim\_trailing_whitespace
- insert\_final_newline
- корневой

Параметры редактора EditorConfig поддерживаются во всех языках, поддерживаемых Visual Studio, за исключением XML. Кроме того, EditorConfig поддерживает соглашения о [стиле кода](/dotnet/fundamentals/code-analysis/code-style-rule-options), в том числе соглашения о [языке](/dotnet/fundamentals/code-analysis/style-rules/language-rules), [форматировании](/dotnet/fundamentals/code-analysis/style-rules/formatting-rules) и [именовании](/dotnet/fundamentals/code-analysis/style-rules/naming-rules) для C# и Visual Basic.

## <a name="add-and-remove-editorconfig-files"></a>Добавление и удаление файлов EditorConfig

При добавлении файла EditorConfig в проект или базу кода, все новые строки создаваемого кода форматируются в соответствии с параметрами в файле EditorConfig. Но само по себе добавление файла EditorConfig не приводит к преобразованию существующих стилей в новые, пока вы не запустите форматирование документа или [очистку кода](../ide/code-styles-and-code-cleanup.md). Например, если в качестве отступов в файле используются символы табуляции, при добавлении файла EditorConfig, в котором отступы задаются пробелами, символы отступа не преобразовываются в пробелы автоматически. При форматировании документа (**Правка** > **Дополнительно** > **Форматировать документ** или клавиши **CTRL**+**K**, **CTRL**+**D**) параметры пробелов в файле EditorConfig применяются к имеющимся строкам кода.

После удаления файла EditorConfig из проекта или базы кода вам придется закрыть и снова открыть все файлы кода, если нужно восстановить глобальные параметры редактора для новых строк кода.

### <a name="add-an-editorconfig-file-to-a-project"></a>Добавление файла EditorConfig в проект

1. Откройте проект или решение в Visual Studio. Выберите узел проекта или решения в зависимости от того, следует ли применять настройки файла *EDITORCONFIG* ко всем проектам в решении или только к одному. В проекте или решении также можно выбрать папку, в которую будет добавлен файл *EDITORCONFIG*.

1. В строке меню выберите **Проект** > **Добавить новый элемент** либо нажмите сочетание клавиш **CTRL**+**SHIFT**+**A**.

   Откроется диалоговое окно **Добавление нового элемента**.

1. В поле поиска введите строку **editorconfig**.

   В результатах поиска отобразятся два шаблона элементов для **файла editorconfig**.

   ![Шаблоны элементов для файла EditorConfig в Visual Studio](media/editorconfig-item-templates.png)

1. Выберите шаблон **файл editorconfig (по умолчанию)** , чтобы добавить файл EditorConfig, заполненный двумя основными параметрами EditorConfig для стиля и размера отступов. Вы также можете выбрать шаблон **файл editorconfig (.NET)** , чтобы добавить файл EditorConfig с настроенными стандартными [соглашениями .NET по стилю кода, форматированию и именованию](/dotnet/fundamentals/code-analysis/code-style-rule-options).

   В обозревателе решений появится файл *EDITORCONFIG*, который откроется в редакторе.

   ![EDITORCONFIG-файл в обозревателе решений и редакторе](media/editorconfig-dotnet.png)

1. Измените файл по своему усмотрению.

### <a name="other-ways-to-add-an-editorconfig-file"></a>Другие способы добавления файла EditorConfig

Существует несколько способов добавления в проект файла EditorConfig:

- [Функция определения кода](/visualstudio/intellicode/code-style-inference) IntelliCode для Visual Studio позволяет настроить стили кода по существующему коду. Она создает непустой файл EditorConfig с определенными параметрами для вашего стиля кода.

- Начиная с Visual Studio 2019 вы можете [создать файл EditorConfig для настроенных параметров стиля кода](code-styles-and-code-cleanup.md#code-styles-in-editorconfig-files) через пункт меню **Средства** > **Параметры**.

## <a name="file-hierarchy-and-precedence"></a>Иерархия и приоритет файлов

При добавлении файла *EDITORCONFIG* в папку в иерархии файлов его параметры применяются ко всем соответствующим файлам на этом уровне и ниже. Можно также переопределить параметры EditorConfig для конкретного проекта, базы кода или части кода так, чтобы использовать другие соглашения, чем в остальных частях базы кода. Это может быть полезно при включении кода из-каких либо еще мест без изменения его соглашений.

Чтобы переопределить некоторые или все параметры EditorConfig, добавьте файл *EDITORCONFIG* на уровне иерархии файлов, к которой следует применить эти переопределенные параметры. Новые параметры в файле EditorConfig будут применяться к файлам того же уровня и к файлам во всех подкаталогах.

![Иерархия EditorConfig](../ide/media/vside_editorconfig_hierarchy.png)

Если необходимо переопределить только некоторые параметры, просто укажите их в файле *EDITORCONFIG*. Переопределяются только те свойства, которые явно перечислены в файле более низкого уровня. Другие параметры из файлов *EDITORCONFIG* более высокого уровня будут применяться по-прежнему. Чтобы к этой части базы кода _не_ применялись параметры из _любых_ файлов *EDITORCONFIG* более высокого уровня, добавьте свойство ```root=true``` в файл *EDITORCONFIG* более низкого уровня:

```ini
# top-most EditorConfig file
root = true
```

Файлы EditorConfig считываются сверху вниз. При наличии множества свойств с одним именем приоритет будет иметь последнее обнаруженное свойство с таким именем.

## <a name="edit-editorconfig-files"></a>Изменение файлов EditorConfig

Visual Studio позволяет редактировать файлы *EDITORCONFIG*, предоставляя списки завершения IntelliSense.

![IntelliSense в EDITORCONFIG-файле](media/editorconfig-intellisense-no-extension.png)

После того как вы закончили редактировать файл EditorConfig, необходимо повторно загрузить файлы кода, чтобы новые параметры вступили в силу.

При редактировании большого количества файлов *EDITORCONFIG* может быть полезным расширение [языковой службы EditorConfig](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.EditorConfig). В число возможностей этого расширения входят выделение синтаксиса, улучшенная технология IntelliSense, функции проверки и форматирования кода.

![IntelliSense с расширением языковой службы EditorConfig](media/editorconfig-intellisense.png)

## <a name="example"></a>Пример

В приведенном ниже примере показано состояние отступа во фрагменте кода на C# до и после добавления в проект файла *EDITORCONFIG*. Параметр **Табуляции** в диалоговом окне **Параметры** текстового редактора Visual Studio настроен для вывода символов пробела при нажатии клавиши **TAB**.

![Параметр "Табуляция" в текстовом редакторе](../ide/media/vside_editorconfig_tabsetting.png)

Как и ожидалось, при нажатии клавиши **TAB** в следующей строке создается отступ путем добавления еще четырех символов пробела.

![Код до использования EditorConfig](../ide/media/vside_editorconfig_before.png)

Добавьте в проект новый файл *EDITORCONFIG* с приведенным ниже содержимым. Параметр `[*.cs]` означает, что это изменение применяется только к файлам кода на C# в проекте.

```ini
# Top-most EditorConfig file
root = true

# Tab indentation
[*.cs]
indent_style = tab
```

Теперь при нажатии клавиши **TAB** вместо пробелов будут применяться символы табуляции.

![Клавиша TAB добавляет символ табуляции](../ide/media/vside_editorconfig_tab.png)

## <a name="troubleshoot-editorconfig-settings"></a>Устранение неполадок параметров EditorConfig

Если в структуре каталогов в папке проекта или выше есть файл EditorConfig, среда Visual Studio применяет параметры редактора из этого файла. В этом случае в строке состояния может появиться следующее сообщение:

   **"Пользовательские предпочтения для этого типа файлов переопределены рекомендациями по написанию кода этого проекта".**

Это означает, что, если какие-либо параметры редактора из раздела **Инструменты** > **Параметры** > **Текстовый редактор** (например, размер и стиль отступа, размер интервала табуляции или соглашения о кодировании) заданы в файле EditorConfig, находящемся в структуре каталогов в папке проекта или выше, соглашения в этом файле переопределяют значения в окне **Параметры**. Управлять этим поведением можно с помощью параметра **Следовать рекомендациям по написанию кода проекта** в разделе **Инструменты** > **Параметры** > **Текстовый редактор**. Если снять этот флажок, поддержка EditorConfig в Visual Studio будет отключена.

!["Сервис" > "Параметры" > "Следовать рекомендациям по написанию кода проекта"](media/coding_conventions_option.png)

Чтобы найти файлы с расширением *.editorconfig* в родительских каталогах, откройте командную строку и выполните следующую команду из корня диска, на котором находится проект:

```Shell
dir .editorconfig /s
```

Управлять областью действия соглашений EditorConfig можно с помощью свойства ```root=true``` в файле *EDITORCONFIG*, который находится в корне репозитория или в каталоге, где размещается проект. В Visual Studio поиск файла *EDITORCONFIG* выполняется в каталоге, где находится открытый файл, и во всех его родительских каталогах. Поиск завершается по достижении корня пути к файлу или при нахождении файла *EDITORCONFIG* с ```root=true```.

## <a name="see-also"></a>См. также

- [Соглашения о стиле кода .NET](/dotnet/fundamentals/code-analysis/code-style-rule-options)
- [Поддержка EditorConfig для языковой службы](../extensibility/supporting-editorconfig.md)
- [EditorConfig.org](https://editorconfig.org/)
- [Возможности редактора кода](writing-code-in-the-code-and-text-editor.md)
- [EditorConfig (Visual Studio для Mac)](/visualstudio/mac/editorconfig)
