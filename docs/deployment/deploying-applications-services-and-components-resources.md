---
title: Развертывание приложения Visual Studio в папке, IIS, Azure или другом расположении
titleSuffix: ''
description: Дополнительные сведения о возможностях использования средства "Публикация" для ваших приложений.
ms.custom:
- SEO-VS-2020
- contperf-fy21q1
ms.date: 08/21/2020
ms.topic: troubleshooting
f1_keywords:
- vs.publish
dev_langs:
- FSharp
- VB
- CSharp
- C++
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 099bd2c6cc47895c913b3f852835d2fd09d0f9c3
ms.sourcegitcommit: 4e09130bcd55bb9cb8ad157507c23b67aa209fad
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2021
ms.locfileid: "113549489"
---
# <a name="deploy-your-app-to-a-folder-iis-azure-or-another-destination"></a>Развертывание приложения в папке, IIS, Azure или другом расположении

Развертывание приложения, службы или компонента — это механизм их распространения для установки на других компьютерах, устройствах, серверах и в облаке. В Visual Studio можно выбрать соответствующий подход в зависимости от требуемого типа развертывания.

Справочные сведения о задаче развертывания:

- Не знаете, какой вариант развертывания выбрать? Ознакомьтесь со статьей [Выбор подходящих вариантов публикации](#what-publishing-options-are-right-for-me).
- Сведения об устранении проблем с развертыванием Службы приложений Azure или служб IIS см. в [этой статье](/aspnet/core/test/troubleshoot-azure-iis).
- Дополнительные сведения о настройке параметров развертывания .NET см. в [этой статье](#configure-net-deployment-settings).
- Чтобы выполнить развертывание в новый целевой объект, если вы ранее создали профиль публикации, для настроенного профиля в окне **Публикация** выберите **Создать**.

   ![Создание профиля публикации](../deployment/media/create-a-new-publish-profile.png)

   Затем выберите вариант развертывания в окне "Публикация". Сведения о вариантах публикации см. в следующих разделах.

## <a name="what-publishing-options-are-right-for-me"></a>Выбор подходящих вариантов публикации

Из среды Visual Studio приложения можно публиковать напрямую в следующие целевые объекты:

::: moniker range=">=vs-2019"
- [Azure](#azure)
- [Реестр контейнеров Docker](#docker-container-registry)
- [Папка](#folder)
- [сервер FTP или FTPS](#ftpftps-server);
- [веб-сервер (IIS)](#web-server-iis);
- [профиль импорта](#import-profile).
::: moniker-end
::: moniker range="vs-2017"
- [Служба приложений](#azure-app-service)
- [Служба приложений для Linux;](#azure-app-service)
- [IIS (выберите IIS, FTP или другой вариант)](#web-server-iis)
- [FTP/FTPS (выберите IIS, FTP или другой вариант)](#ftpftps-server)
- [Папка](#folder)
- [профиль импорта](#import-profile).
::: moniker-end

Как показано на следующем рисунке, при создании профиля публикации появятся перечисленные выше варианты.

::: moniker range=">=vs-2019"
![Выбор варианта публикации](../deployment/media/quickstart-publish-dialog.png)
::: moniker-end
::: moniker range="vs-2017"
![Выбор варианта публикации](../deployment/media/quickstart-publish-dialog-vs-2017.png)
::: moniker-end

Краткий обзор общих вариантов развертывания приложений см. в статье [Первое знакомство с развертыванием](../deployment/deploying-applications-services-and-components.md).

## <a name="azure"></a>Azure 

В Azure можно выбрать один из следующих вариантов:

- [Служба приложений Azure на базе ОС Windows, Linux или в виде образа Docker](#azure-app-service);
- [образ Docker, развернутый в Реестре контейнеров Azure](#azure-container-registry);
- [Виртуальная машина Azure](#azure-virtual-machine).

![Выбор службы Azure](../deployment/media/quickstart-choose-azure-service.png)

### <a name="azure-app-service"></a>Служба приложений Azure

[Служба приложений Azure](/azure/app-service/app-service-web-overview) помогает разработчикам быстро создавать масштабируемые веб-приложения и службы, не беспокоясь о поддержке инфраструктуры. Служба приложений выполняется на облачных виртуальных машинах в Azure, но эти виртуальные машины являются управляемыми. Каждому приложению в службе приложений назначается уникальный URL-адрес вида \*.azurewebsites.net. Все ценовые категории, кроме "Бесплатный", позволяют назначать сайту пользовательские имена доменов.

Вычислительная мощность службы приложений определяется выбором [ценовой категории или плана](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview) для размещающей службы приложений. Несколько веб-приложений (или приложений другого типа) могут совместно использовать одну и ту же службу приложений без изменения ценовой категории. Например, веб-приложения для разработки, промежуточного этапа и рабочей среды можно разместить в одной службе приложений.

#### <a name="when-to-choose-azure-app-service"></a>Когда следует использовать службу приложений Azure

- Вы хотите развернуть веб-приложение, которое доступно через Интернет.
- Вы хотите автоматически масштабировать веб-приложение в соответствии с запросами без необходимости повторного развертывания.
- Вы не хотите поддерживать серверную инфраструктуру (в том числе обновлять программное обеспечение).
- Вы не хотите выполнять настройки уровня компьютера на серверах, где размещено веб-приложение.

> Если вы хотите использовать службу приложений Azure в своем центре обработки данных или на других локальных компьютерах, воспользуйтесь для этого [Azure Stack](https://azure.microsoft.com/overview/azure-stack/).

Дополнительные сведения о публикации в Службе приложений см. в следующих статьях:
- [Краткое руководство. Публикация в "Службе приложений Azure"](quickstart-deploy-to-azure.md).
- [Краткое руководство. Публикация ASP.NET Core в Linux](quickstart-deploy-to-linux.md).
- [Публикация приложения ASP.NET Core в "Службе приложений Azure"](/aspnet/core/tutorials/publish-to-azure-webapp-using-vs).
- [Устранение неполадок ASP.NET Core в Службе приложений Azure и IIS](/aspnet/core/test/troubleshoot-azure-iis)

### <a name="azure-container-registry"></a>Реестр контейнеров Azure

[Реестр контейнеров Azure](/azure/container-registry/) позволяет создавать, хранить, а также администрировать образы и артефакты контейнеров Docker в частном реестре для всех типов развертываний контейнеров.

#### <a name="when-to-choose-azure-container-registry"></a>В каких случаях нужно выбрать Реестр контейнеров Azure

- Если у вас уже есть конвейер разработки и развертывания для контейнера Docker.
- Если вы хотите создать образы контейнеров Docker в Azure.

Дополнительные сведения

- [Развертывание контейнера ASP.NET в реестре контейнеров](../containers/hosting-web-apps-in-docker.md)

### <a name="azure-virtual-machine"></a>Виртуальная машина Azure

[Виртуальные машины Azure](https://azure.microsoft.com/documentation/services/virtual-machines/) позволяют создавать любое количество вычислительных ресурсов в облаке и управлять ими. Принимая на себя ответственность за все программное обеспечение и обновления на виртуальных машинах, вы можете настроить их в соответствии с требованиями своего приложения. Вы можете обращаться к виртуальным машинам напрямую через удаленный рабочий стол, и для каждой из них назначенный IP-адрес будет существовать столько, сколько нужно.

Масштабирование приложения, размещенного на виртуальных машинах, предполагает запуск дополнительных виртуальных машин по требованию и последующее развертывание необходимого программного обеспечения. Этот дополнительный уровень управления позволяет вам применять разные режимы масштабирования в разных глобальных регионах. Например, если ваше приложение обслуживает сотрудников в различных региональных офисах, вы можете масштабировать ваши виртуальные машины в зависимости от количества сотрудников в этих регионах, что способствует сокращению затрат.

Дополнительные сведения см. в статье с [подробным сравнением](/azure/architecture/guide/technology-choices/compute-decision-tree) Службы приложений Azure, Виртуальных машин Azure и других служб Azure, которые можно использовать в качестве целевого объекта развертывания, применив параметр "Пользовательский" в Visual Studio.

#### <a name="when-to-choose-azure-virtual-machines"></a>В каких случаях нужно выбрать виртуальные машины Azure

- Вы хотите развернуть веб-приложение, доступное через Интернет, с полным контролем над временем существования назначенных IP-адресов.
- Вам требуются настройки уровня компьютера на серверах, к которым относится установка дополнительного программного обеспечения, такого как специальная система базы данных, определенные сетевые конфигурации, разделы диска и т. д.
- Вам требуется точный контроль над масштабированием веб-приложения.
- Вам по любой причине необходим прямой доступ к серверам, на которых размещается приложение.

> Если вы хотите использовать виртуальные машины Azure в своем центре обработки данных или на других локальных компьютерах, воспользуйтесь для этого [Azure Stack](https://azure.microsoft.com/overview/azure-stack/).

## <a name="docker-container-registry"></a>Реестр контейнеров Docker

Если в вашем контейнерном приложении используется Docker, вы можете опубликовать его в реестре контейнеров Docker.

### <a name="when-to-choose-docker-container-registry"></a>В каких случаях следует выбирать реестр контейнеров Docker

- Вам требуется развернуть контейнерное приложение

Дополнительные сведения см. в следующих разделах:

- [Развертывание контейнера ASP.NET в реестре контейнеров](../containers/hosting-web-apps-in-docker.md)
- [Развертывание в Docker Hub](../containers/deploy-docker-hub.md)

## <a name="folder"></a>Папка

Развертывание в файловой системе означает копирование файлов приложения в определенную папку на локальном компьютере. Этот подход чаще всего используется при тестировании или развертывании приложения для использования ограниченным количеством пользователей, если компьютер также работает как сервер. Если целевая папка является общей для сети, при развертывании в файловой системе файлы веб-приложения станут доступны другим пользователям, которые затем смогут развернуть их на конкретных серверах.
::: moniker range=">=vs-2019"
Начиная с Visual Studio 2019 версии 16.8, целевой объект папки включает возможность публикации приложения .NET для Windows с помощью ClickOnce.

Если вы хотите опубликовать приложение .NET Core 3.1 или более поздней версии для Windows с использованием ClickOnce, см. [эту статью](quickstart-deploy-using-clickonce-folder.md).
::: moniker-end
Все локальные компьютеры под управлением сервера могут предоставить доступ к приложению через Интернет или интрасеть в зависимости от его настройки и настройки сетей, к которым он подключен. (При подключении компьютера к Интернету напрямую обязательно защитите его от внешних угроз.) Поскольку вы управляете этими компьютерами, вы полностью контролируете конфигурации оборудования и программного обеспечения.

Если по какой-либо причине (например, из-за особенностей доступа к компьютеру) вы не можете использовать облачные службы, например Службу приложений Azure или Виртуальные машины Azure, можно использовать [Azure Stack](https://azure.microsoft.com/overview/azure-stack/) в центре обработки данных. Azure Stack позволяет использовать вычислительные ресурсы и управлять ими с помощью службы приложений Azure и виртуальных машин Azure, поддерживая все активы в локальной среде.

### <a name="when-to-choose-file-system-deployment"></a>Когда следует использовать развертывание файловой системы

- Вам требуется только развернуть приложение в общей сетевой папке, откуда другие пользователи будут развертывать его на разных серверах.
::: moniker range=">=vs-2019"
- Вам нужно развернуть приложение .NET для Windows с помощью ClickOnce
::: moniker-end
- Вам необходимо только локальное тестовое развертывание.
- Вы хотите проверять и при необходимости изменять файлы приложения независимо друг от друга перед их отправкой в другой целевой объект развертывания.

Дополнительные сведения см. в статье [Краткое руководство. Развертывание в локальную папку](quickstart-deploy-to-local-folder.md).
::: moniker range=">=vs-2019"
Дополнительные сведения о развертывании приложения .NET для Windows с использованием ClickOnce см. в [этой статье](quickstart-deploy-using-clickonce-folder.md).
::: moniker-end

Дополнительные сведения о выборе параметров см. в следующих статьях:

- [Развертывание, зависящее от платформы, и автономное развертывание](/dotnet/core/deploying/)
- [Идентификаторы целевой среды выполнения (переносной RID и т. п.)](/dotnet/core/rid-catalog)
- [Конфигурации отладки и выпуска](../ide/understanding-build-configurations.md)

## <a name="ftpftps-server"></a>Сервер FTP или FTPS

Вариант "Сервер FTP или FTPS" позволяет развернуть приложение на сервере вне платформы Azure. Его можно развернуть в файловой системе или на любом другом сервере (в Интернете или интрасети), к которому у вас есть доступ, включая области в других облачных службах. Он может работать с веб-развертыванием (файлы или ZIP) и FTP.

Если вы выберете вариант "Сервер FTP или FTPS", Visual Studio запросит имя профиля и дополнительные сведения о **подключении**, включая данные о целевом сервере или расположении, имя сайта и учетные данные. Вы можете выбрать следующие варианты поведения на вкладке **Параметры**.

- Конфигурации, которые нужно развернуть.
- Нужно ли удалить существующие файлы из назначения.
- Использовать ли предварительную компиляцию во время публикации.
- Следует ли исключать из развертывания файлы, размещенные в папке App_Data.

В Visual Studio вы можете создать любое количество профилей развертывания для FTP или FTPS, что позволяет использовать несколько профилей с разными параметрами.

### <a name="when-to-choose-ftpftps-server-deployment"></a>В каких случаях нужно выбрать развертывание на сервере FTP или FTPS

- Вы используете облачные службы на платформе, отличной от Azure, доступ к которой возможен через URL-адреса.
- Вы хотите использовать для развертывания учетные данные, отличные от используемых в Visual Studio, или напрямую связанные с вашими учетными записями Azure.
- Вы хотите удалять файлы из целевого объекта при каждом развертывании.

## <a name="web-server-iis"></a>Веб-сервер (IIS)

Вариант "Веб-сервер (IIS)" позволяет развернуть приложение на веб-сервере вне платформы Azure. Поддерживается развертывание на любом сервере IIS (в Интернете или интрасети), к которому у вас есть доступ, в том числе в других облачных службах. Этот вариант совместим с расширением или пакетом веб-развертывания.

Если вы выберете вариант "Веб-сервер (IIS)", Visual Studio запросит имя профиля и дополнительные сведения о **подключении**, включая данные о целевом сервере или расположении, имя сайта и учетные данные. Вы можете выбрать следующие варианты поведения на вкладке **Параметры**.

- Конфигурации, которые нужно развернуть.
- Нужно ли удалить существующие файлы из назначения.
- Использовать ли предварительную компиляцию во время публикации.
- Следует ли исключать из развертывания файлы, размещенные в папке App_Data.

В Visual Studio вы можете создать любое количество профилей развертывания для веб-сервера IIS, что позволяет использовать несколько профилей с разными параметрами.

### <a name="when-to-choose-web-server-iis-deployment"></a>В каких случаях нужно выбрать развертывание на веб-сервере IIS

- Если вы уже используете IIS для публикации сайта или службы, доступ к которым осуществляется по URL-адресам.
- Вы хотите использовать для развертывания учетные данные, отличные от используемых в Visual Studio, или напрямую связанные с вашими учетными записями Azure.
- Вы хотите удалять файлы из целевого объекта при каждом развертывании.

Дополнительные сведения см. в [кратком руководстве по развертыванию на веб-сайте](quickstart-deploy-to-a-web-site.md)

и статье [Устранение неполадок с ASP.NET Core в Службе приложений Azure и IIS](/aspnet/core/test/troubleshoot-azure-iis).

## <a name="import-profile"></a>Профиль импорта

Вы можете импортировать профиль при публикации в службу IIS или Службу приложений Azure. Развертывание можно настроить с помощью *файла параметров публикации* ( *\*.publishsettings*). Файл параметров публикации создается IIS или Службой приложений Azure либо может быть создан вручную, после чего его можно импортировать в Visual Studio.

Использование файла параметров публикации позволяет упростить настройку развертывания и лучше подходит для групповой среды, чем настройка каждого профиля развертывания вручную.

### <a name="when-to-choose-import-profile"></a>В каких случаях нужно выбрать профиль импорта

- Если уже настроена публикация в IIS, но вы намерены упростить настройку развертывания.
- Если уже настроена публикация в IIS или Службу приложений Azure, но вы хотите ускорить настройку развертывания для повторного использования или публикации для членов группы в той же службе.

Дополнительные сведения см. в следующих разделах:

- [Импорт параметров публикации и развертывание в IIS](tutorial-import-publish-settings-iis.md)
- [Импорт параметров публикации и развертывание в Azure](tutorial-import-publish-settings-azure.md)

## <a name="configure-net-deployment-settings"></a>Настройка параметров развертывания .NET

Дополнительные сведения о выборе параметров см. в следующих статьях:

- [Развертывание, зависящее от платформы, и автономное развертывание](/dotnet/core/deploying/)
- [Идентификаторы целевой среды выполнения (переносной RID и т. п.)](/dotnet/core/rid-catalog)
- [Конфигурации отладки и выпуска](../ide/understanding-build-configurations.md)

## <a name="next-steps"></a>Следующие шаги

Руководства:

- [Развертывание приложения .NET Core с помощью средства публикации](/dotnet/core/deploying/deploy-with-vs?toc=/visualstudio/deployment/toc.json&bc=/visualstudio/deployment/_breadcrumb/toc.json)
- [Публикация приложения ASP.NET Core в Azure](/aspnet/core/tutorials/publish-to-azure-webapp-using-vs?toc=/visualstudio/deployment/toc.json&bc=/visualstudio/deployment/_breadcrumb/toc.json)
- [Развертывание в Visual C++](/cpp/windows/deployment-in-visual-cpp)
- [Отладка приложений UWP](/windows/uwp/packaging/packaging-uwp-apps?toc=/visualstudio/deployment/toc.json&bc=/visualstudio/deployment/_breadcrumb/toc.json)
- [Публикация приложения Node.js в Azure с помощью веб-развертывания](https://github.com/Microsoft/nodejstools/wiki/Publish-to-Azure-Website-using-Web-Deploy?toc=/visualstudio/deployment/toc.json&bc=/visualstudio/deployment/_breadcrumb/toc.json)
- [Публикация приложения Python в Службе приложений Azure](../python/publishing-python-web-applications-to-azure-from-visual-studio.md?toc=/visualstudio/deployment/toc.json&bc=/visualstudio/deployment/_breadcrumb/toc.json)
