---
title: Начало работы с диагностикой графики | Документация Майкрософт
description: Подготовьтесь к первому использованию диагностики графики, а затем запишите кадры из приложения Direct3D и проверите их в анализаторе графики.
ms.custom: SEO-VS-2020
ms.date: 06/08/2020
ms.topic: how-to
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: 70512b4df3be7f11973af244c336b22c59c90f8f
ms.sourcegitcommit: e3a364c014ccdada0860cc4930d428808e20d667
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2021
ms.locfileid: "112387610"
---
# <a name="getting-started-with-visual-studio-graphics-diagnostics"></a>Начало работы с диагностикой графики Visual Studio
В этом разделе вы подготовитесь к первому использованию диагностики графики, а затем запишите кадры из приложения Direct3D и проверите их в анализаторе графики.

## <a name="requirements"></a>Требования
 Чтобы использовать диагностику графики в Visual Studio, необходимо использовать Visual Studio Enterprise, Visual Studio Professional или Visual Studio Community.  Другие выпуски, в том числе Visual Studio Code, не содержат эту функцию.

 [!INCLUDE[downloadvs](../includes/downloadvs_md.md)]

### <a name="windows-10-prerequisites"></a>Необходимые компоненты для Windows 10
 Необязательный компонент Windows *Графические инструменты* предоставляет инфраструктуру записи и воспроизведения, которая необходима для диагностики графики в Windows 10.

 Сведения об установке графических инструментов см. в разделе [Установка графических инструментов для Windows 10](#InstallGraphicsTools).

## <a name="install-graphics-tools-for-windows-10"></a><a name="InstallGraphicsTools"></a> Установка графических инструментов для Windows 10
 В Windows 10 инфраструктура диагностики графики предоставляется дополнительным компонентом Windows, который называется *Графические инструменты*. Данный компонент необходим для записи и воспроизведения графической информации в Windows 10 независимо от того, производится ли запись для приложения, настроенного на предыдущую версию Windows, и какую версию Direct3D оно использует. Вы можете установить компонент графических инструментов заранее; в противном случае он будет установлен по требованию при первом запуске сеанса диагностики графики из Visual Studio.

#### <a name="to-install-graphics-tools-for-windows-10"></a>Установка графических инструментов для Windows 10

1. В поле поиска введите **Приложения и компоненты**, а затем откройте параметры **Приложения и компоненты**.

2. В правой части окна параметров **Приложения и компоненты** выберите **Дополнительные компоненты** (в **Приложения и компоненты**).

   Отобразятся параметры **дополнительных компонентов**.

3. В диалоговом окне параметров **дополнительных компонентов** выберите элемент **Добавить компонент**. Появится список дополнительных компонентов, которые можно установить.

4. Выберите **Графические инструменты** в списке компонентов, а затем нажмите кнопку **Установить**.

   Компонент графических инструментов также устанавливается автоматически при установке пакета SDK для Windows 10.

> [!TIP]
> Дополнительный компонент графических инструментов Windows 10 предоставляет упрощенные возможности записи и воспроизведения, например программу командной строки для захвата **dxcap.exe**, которые можно использовать в сценариях поддержки, тестирования и диагностики на компьютерах, где не установлены инструменты разработчика. Дополнительные сведения — в разделе [Программа командной строки для захвата](command-line-capture-tool.md).

## <a name="using-graphics-diagnostics-for-the-first-time"></a>Использование диагностики графики в первый раз
 Теперь, когда у вас есть все необходимое, можно приступать к использованию диагностики графики. Выполните следующие действия.

### <a name="1---create-a-direct3d-app"></a>1 Создание приложения Direct3D

Если у вас уже есть свое приложение Direct3D для изучения диагностики графики, это замечательно! Или используйте одно из следующих значений:

::: moniker range=">=vs-2019"
Скачайте [пример игры Direct3D](/samples/microsoft/windows-universal-samples/simple3dgamedx/).
::: moniker-end
::: moniker range="vs-2017"
- Шаблоны проекта **Приложение DirectX 11 (универсальное приложение Windows)** или **Приложение DirectX 12 (универсальное приложение Windows)** для Windows 10.
- [Пример Direct3D 12 UAP](https://code.msdn.microsoft.com/Direct3D-12-UAP-Sample-ecb1779f) для Windows 10.
::: moniker-end

Прежде чем продолжить, убедитесь, что можете выполнить сборку и запуск приложения. Выберите **Сборка** > **Собрать решение**, чтобы убедиться в том, что сборка выполняется без ошибок. Затем выберите **Отладка** > **Запустить без отладки** (**CTRL+F5**), чтобы убедиться, что приложение работает правильно. В зависимости от компьютера, на котором выполняется тестирование с помощью этого средства, может потребоваться настроить платформу и целевой объект отладки для примера. Например, чтобы протестировать платформу x64 на компьютере размещения Visual Studio, выберите **x64** в качестве платформы решения и **Локальный компьютер** в качестве целевого объекта отладки. 

### <a name="2---start-a-graphics-diagnostics-session"></a>2 Запуск сеанса диагностики графики
 Теперь все готово для запуска первого сеанса диагностики графики. В главном меню Visual Studio выберите **Отладка, Графика, Начать отладку графики** или просто нажмите сочетание клавиш **ALT + F5**. При этом ваше приложение запускается в режиме диагностики графики и отображаются окна сеанса диагностики в Visual Studio.

> [!IMPORTANT]
> Если приложение запускается в Windows 10 и еще не был установлен дополнительный компонент графических инструментов, вам будет предложено сделать это. Необходимо установить этот компонент, прежде чем можно будет использовать диагностику графики в Windows 10.

### <a name="3---capture-frames"></a>3 Запись кадров
 Вы можете записывать кадры сразу после запуска приложения.

#### <a name="to-capture-single-frames"></a>Запись отдельных кадров

- В Visual Studio на панели инструментов графики или в окне сеанса диагностики нажмите кнопку **Записать кадр**. Или, если приложение находится в фокусе, просто нажмите на клавиатуре клавишу **Print Screen**.

#### <a name="to-capture-a-sequence-of-frames"></a>Запись последовательности кадров

- В Visual Studio в окне сеанса диагностики установите для параметра **Захватываемые кадры** число кадров для записи в последовательности, а затем запишите последовательность с помощью любого из методов, описанных выше для отдельных кадров.

   Чтобы снова записывать отдельные кадры, задайте для параметра **Захватываемые кадры** значение *1*.

  После завершения записи кадров просто выйдите из приложения или нажмите кнопку **Остановить** на панели графики или в окне сеанса диагностики.

### <a name="4---examine-captured-frames-in-the-graphics-analyzer"></a>4\. Проверка записанных кадров в анализаторе графики
 Теперь все готово для анализа полученных кадров. Чтобы начать анализ кадра, выберите номер соответствующего кадра в окне сеанса диагностики. При этом кадр открывается в **анализаторе графики**, где можно использовать инструменты диагностики графики, чтобы проанализировать использование Direct3D приложением для отслеживания проблем отрисовки, или применить инструмент **Анализ кадра**, чтобы получить представление о производительности приложения.

 Если вы выбрали неверный кадр в окне сеанса диагностики или вы хотите проанализировать другой кадр, можно выбрать новый кадр в анализаторе графики. На вкладке **Целевой объект отрисовки** окна журнала графики в области образа цели отрисовки разверните **Список кадров** и выберите другой кадр для изучения.

 Дополнительные сведения о совместном использовании инструментов анализа графики см. в разделе [Примеры](graphics-diagnostics-examples.md).

## <a name="see-also"></a>См. также
- [Графика Direct3D 12](/windows/desktop/direct3d12/direct3d-12-graphics)