---
title: Диагностика графики | Документация Майкрософт
description: Диагностика графики в Visual Studio — это набор инструментов для ведения журнала и анализа действий Direct3D. Используйте их для устранения проблем с отрисовкой и производительностью.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- vs.graphics
ms.assetid: fa69c550-62a7-41b5-bb1f-7eb04af1a6e8
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: b6b769131831a0f1f94aa4fcc8e94a9a88bf9890
ms.sourcegitcommit: e3a364c014ccdada0860cc4930d428808e20d667
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2021
ms.locfileid: "112386128"
---
# <a name="visual-studio-graphics-diagnostics"></a>Диагностика графики в Visual Studio
>[!NOTE]
> Для игр на основе DirectX 12 в Visual Studio рекомендуется использовать PIX для Windows. [PIX для Windows](https://aka.ms/PIXonWindows) — это средство для настройки производительности и отладки с полной поддержкой DirectX 12. [Ознакомьтесь с дополнительными сведениями](visual-studio-graphics-diagnostics-directx-12.md) или [скачайте средство](https://aka.ms/downloadPIX).

*Диагностика графики* Visual Studio — это набор инструментов для регистрации и последующего анализа проблем с производительностью и отрисовкой в приложениях Direct3D. Диагностику графики можно использовать для приложений, которые выполняются локально на компьютере под управлением Windows, в эмуляторе устройства Windows либо на удаленном компьютере или устройстве.

 Рабочий процесс диагностики графики начинается с регистрации того, как приложение использует Direct3D — в оперативном режиме непосредственно во время выполнения. Это позволяет сразу проанализировать поведение приложения, предоставить соответствующие сведения для общего доступа либо сохранить их для использования в дальнейшем. Сеансы записи можно инициировать и контролировать вручную с помощью Visual Studio или программы командной строки для захвата **dxcap.exe**. Сеансы записи также можно инициировать и контролировать программными средствами с помощью API-интерфейсов захвата в компоненте диагностики графики.

 После записи сеанса регистрации его содержимое можно в любое время воспроизвести с помощью *анализатора графики* Visual Studio, воссоздавая записанные кадры с применением точно таких же ресурсов и команд отрисовки, которые использовались в приложении. Затем с помощью инструментов, предоставляемых в окне анализатора графики, любые записанные кадры можно проанализировать в деталях. С помощью этих инструментов можно проверить любой вызов Direct3D API, ресурс, объект состояния конвейера, этап конвейера или даже полный журнал всех пикселей в записанном кадре. Благодаря совместному использованию этих инструментов проблемы с отрисовкой можно анализировать интуитивно, начиная с ее проявления на записанном кадре и выполняя детализацию до первопричины в исходном коде приложения, шейдерах или графических ресурсах.

 Для диагностики проблем с производительностью записанный кадр можно проанализировать с помощью инструмента *Анализ кадров*. Этот инструмент анализирует потенциальные оптимизации производительности, автоматически изменяя способ использования Direct3D приложением и оценивая все отклонения. Возможно, раньше вам приходилось вручную вносить и оценивать такие изменения просто для того, чтобы подобрать нужное. Благодаря анализу кадров вы можете вносить только те изменения, вы обязательно дадут результат.

 Диагностика графики помогает обогатить графическую составляющую приложения Direct3D и оптимизировать его выполнение.

 См. сведения о [возможностях диагностики графики в Visual Studio](overview-of-visual-studio-graphics-diagnostics.md).

## <a name="in-this-section"></a>В этом разделе
 [Обзор.](overview-of-visual-studio-graphics-diagnostics.md) Содержатся вводные сведения о рабочем процессе и средствах диагностики графики.

 [Начало работы.](getting-started-with-visual-studio-graphics-diagnostics.md) Объясняется, как установить диагностику графики в Visual Studio и применить его для приложения Direct3D.

 [Захват графической информации.](capturing-graphics-information.md) Объясняется, что для использования диагностики графики при изучении проблемы с отрисовкой в приложении сначала необходимо записать информацию о том, как приложение использует DirectX. Во время сеанса записи приложение работает в обычном режиме, а вы *захватываете* (т. е. выбираете) интересующие вас кадры. Захваченные данные содержат подробные сведения о том, как отрисовываются кадры. Собранные данные можно сохранить в виде документа журнала графики, чтобы просмотреть его позже или показать другим членам команды.

 [Использование GPU.](../../profiling/gpu-usage.md) Этот инструмент позволяет использовать диагностику графики для профилирования приложения. Этот инструмент можно использовать в сочетании с другими инструментами профилирования, такими как «Загрузка ЦП», для сопоставления активности ЦП и GPU, которая может вызывать появление проблем с производительностью в приложении.

 *Документ журнала графики.* Чтобы начать исследование записанного журнала графики, в окне документа журнала графики выберите записанный кадр или отдельный пиксель. Это позволит подробно рассмотреть [события](graphics-log-document.md) (т. е. вызовы API DirectX), которые влияют на него.

 [Анализ кадра.](graphics-frame-analysis.md) После выбора кадра используйте анализ кадров графики для изучения и настройки производительности отрисовки.

 [Список событий.](graphics-event-list.md) Выбрав кадр, примените **список событий графики** для просмотра его событий и определения того, как они связаны с проблемой с отрисовкой.

 [Состояние.](graphics-state.md) Окно состояния помогает понять состояние графики на момент возникновения текущего события.

 [Этапы конвейера.](graphics-pipeline-stages.md) В окне **Этапы графического конвейера** можно изучить, как выбранное событие обрабатывается каждым этапом графического конвейера, чтобы найти место, где проблема с отрисовкой возникает впервые. Анализ этапов конвейера особенно полезен, когда объект не отображается из-за неверного преобразования или когда один из этапов выдает результат, не соответствующий ожиданиям следующего этапа.

 [Стек вызовов событий.](graphics-event-call-stack.md) **Стек вызовов событий графики** используется для просмотра стека вызовов по выбранному событию, позволяя быстро перейти к коду приложения, который связан с проблемой с отрисовкой.

 [Журнал пикселей.](graphics-pixel-history.md) В окне **Журнал пикселей графики** можно проанализировать, как события влияют на текущий выбранный пиксель, и определить событие или сочетание событий, которое вызывает определенные типы проблем с отрисовкой. Журнал пикселей особенно полезен, когда объект обрабатывается неправильно из-за того, что выходные данные пиксельного шейдера неверны или были неправильно объединены с буфером кадров, или когда объект даже не появляется, поскольку его пиксели были удалены до попадания в буфер кадров.

 [Таблица объектов.](graphics-object-table.md) **Таблица объектов графики** используется для просмотра свойств и содержимого конкретных объектов и ресурсов Direct3D, влияющих на выбранное событие. Таблица объектов может помочь определить контекст графического устройства, который активен во время события, и изучить содержимое графических ресурсов, например буферов констант, буферов вершин и текстур.

 [Отладчик HLSL.](hlsl-shader-debugger.md) Чтобы изучить поведение кода шейдера для выбранного события и этапа конвейера графики, воспользуйтесь **отладчиком HLSL**, где можно выполнять код пошагово, проверять содержимое переменных и выполнять другие стандартные задачи отладки. Отладчик HLSL можно также использовать для проверки кода вычислительного шейдера независимо от того, обрабатываются ли его результаты далее конвейером графики или просто считываются приложением.

 [Программа командной строки для захвата.](command-line-capture-tool.md) Используйте программу командной строки для быстрого захвата и воспроизведения графических данных, не прибегая к Visual Studio или программному захвату. В частности, программу командной строки можно использовать в целях автоматизации или в тестовой среде.

 [Примеры.](graphics-diagnostics-examples.md) Изучите несколько примеров совместного использования средств диагностики графики для выявления разных типов проблем с отрисовкой.

## <a name="related-sections"></a>Связанные разделы

| Заголовок | Описание |
| - | - |
| [Обзор функций отладчика](../debugger-feature-tour.md) | Содержит вводные сведения о функциональных возможностях отладки в [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]. |
| [Графика и игры DirectX](/windows/win32/directx) | Содержит ссылки на статьи, посвященные технологиям графики DirectX. |
| [Поддержка DirectX 12 в Visual Studio](visual-studio-graphics-diagnostics-directx-12.md) | Сведения о поддержке DirectX 12 в Visual Studio |
