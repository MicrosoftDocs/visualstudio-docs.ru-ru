---
title: Пакет SDK для окно справки (Майкрософт) | Документация Майкрософт
description: Сведения о задачах средства просмотра справки Visual Studio, таких как создание статьи, создание пакета средства просмотра справки и развертывание набора статей.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 620d7dcd-d462-475e-a449-fbfa06ff12c5
author: leslierichardson95
ms.author: lerich
manager: jmartens
ms.workload:
- vssdk
ms.openlocfilehash: c53191c5f6e02c0b37d29f89a65119f1edab92ea
ms.sourcegitcommit: f2916d8fd296b92cc402597d1d1eecda4f6cccbf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2021
ms.locfileid: "105063322"
---
# <a name="microsoft-help-viewer-sdk"></a>Пакет SDK окна справки (Майкрософт)

Эта статья содержит следующие задачи для интеграторов окна справки Visual Studio:

- Создание раздела (поддержка F1)

- Создание пакета фирменной символики содержимого в средстве просмотра справки

- Развертывание набора статей

- Добавление справки в оболочку Visual Studio (интегрированная или изолированная)

- Дополнительные ресурсы

## <a name="create-a-topic-f1-support"></a>Создание раздела (поддержка F1)

В этом разделе содержится обзор компонентов представленного раздела, требования к разделам, краткое описание создания раздела (включая требования поддержки F1) и, наконец, пример раздела с отображаемым результатом.

**Обзор раздела справки**

При вызове раздела для подготовки к просмотру средство просмотра справки получает элементы пакета фирменной символики, связанные с тем, что во время установки или последнего обновления, а также раздел XHTML, и объединяет два этих параметра в представление представления содержимого (данные и данные раздела).  Пакет фирменной символики содержит логотипы, поддержку поведения содержимого и текст фирменной символики (авторские права и т. д.).  Дополнительные сведения о элементах пакета фирменной символики см. в разделе "Создание пакета фирменной символики" ниже.  В случае отсутствия пакета фирменной символики, связанного с этим разделом, в средстве просмотра справки будет использоваться пакет фирменной символики, расположенный в корне приложения для просмотра справки (Branding_en-US. MSHC).

**Требования к разделу окна справки**

Для правильного отображения в средстве просмотра справки необработанное содержимое раздела должно состоять из W3C Basic 1,1 XHTML.

Раздел обычно содержит два раздела:

- Метаданные (см. Справочник по метаданным содержимого): данные о теме, например уникальный идентификатор раздела, значение ключевого слова, идентификатор ОГЛАВЛЕНИя раздела, идентификатор родительского узла и т. д.

- Содержимое текста: совместимо с W3C Basic 1,1 XHTML, включая поддерживаемые поведения содержимого (Свертываемая область, фрагмент кода и т. д.). Ниже приведен полный список.

Поддерживаемые элементы управления для пакета фирменной символики Visual Studio:

- Ссылки

- CodeSnippet

- коллапсиблеареа

- Наследуемый член

- лангуажеспеЦификтекст

Поддерживаемые строки языка (без учета регистра):

- JavaScript

- CSharp или c #

- кплусплус или VisualC + + или c++

- jscript

- VisualBasic или VB

- f # или FSharp или FS

- Other — строка, представляющая имя языка

**Создание раздела средства просмотра справки**

Создайте новый документ XHTML с именем ContosoTopic4.htm и добавьте тег Title (ниже).

```html
<html>
<head>
<title>Contoso Topic 4</title>
</head>

<body>

</body>
</html>

```

Затем добавьте данные, чтобы определить, как будет представлен раздел (с собственной фирменной символикой), как сослаться на этот раздел для F1, где этот раздел существует в СОДЕРЖАНИи, его идентификатор (для ссылки на ссылку в других разделах) и т. д. Полный список поддерживаемых метаданных см. в таблице "метаданные содержимого" ниже.

- В этом случае мы будем использовать наш пакет фирменной символики — вариант пакета фирменной символики для окна справки Visual Studio.

- Добавьте имя и значение Meta («Microsoft. Help. F1» Content = «ContosoTopic4»), которые будут соответствовать указанному значению F1 в контейнере свойств интегрированной среды разработки. (Дополнительные сведения см. в разделе о поддержке F1.) Это значение, совпадающее с вызовом F1 в интегрированной среде разработки для вывода этого раздела при выборе в интегрированной среде разработки F1.

- Добавьте идентификатор раздела. Это строка, которая используется в других разделах для ссылки на этот раздел. Это идентификатор окна справки для этого раздела.

- Для ОГЛАВЛЕНИя добавьте родительский узел этого раздела, чтобы определить, где будет отображаться этот узел содержания раздела.

- Для ОГЛАВЛЕНИя добавьте в этот раздел порядок узлов. Если родительский узел имеет `n` число дочерних узлов, определите в порядке следования дочерних узлов в этом расположении раздела. Например, в этом разделе содержится номер 4 из 4 дочерних разделов.

Пример раздела метаданных:

```html
<html>
<head>
<title>Contoso Topic 4</title>

<meta name="SelfBranded" content="false" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Microsoft.Help.Id" content="ContosoTopic4" />
<meta name="Microsoft.Help.F1" content=" ContosoTopic4" />
    <meta name="Language" content="en-us" />
<meta name="Microsoft.Help.TocParent" content="ContosoTopic0" />
<meta name="Microsoft.Help.TocOrder" content="4" />

</head>

<body>

</body>
</html>
```

**Текст раздела**

Текст (не включая верхний и нижний колонтитул) раздела будет содержать ссылки на страницы, раздел примечаний, Свертываемая область, фрагмент кода и раздел текста, относящегося к конкретному языку.  Сведения об этих областях представленного раздела см. в разделе Фирменная символика.

1. Добавьте тег заголовка раздела:  `<div class="title">Contoso Topic 4</div>`

2. Добавить раздел примечаний: `<div class="alert"> add your table tag and text </div>`

3. Добавление сворачиваемой области:  `<CollapsibleArea Expanded="1" Title="Collapsible Area Test Heading"> add text  </CollapsibleArea>`

4. Добавьте фрагмент кода:  `<CodeSnippet EnableCopyCode="true" Language="CSharp" ContainsMarkup="false" DisplayLanguage="C#" > a block of code </CodeSnippet>`

5. Добавить текст, зависящий от языка кода.  `<LanguageSpecificText devLangcs="CS" devLangvb="VB" devLangcpp="C++" devLangnu="F#" />` Обратите внимание, что `devLangnu=` позволяет вводить другие языки. Например, `devLangnu="Fortran"` отображает Fortran, когда фрагмент кода дисплайлангуаже = Fortran.

6. Добавить ссылки на страницы: `<a href="ms-xhelp:///?Id=ContosoTopic1">Main Topic</a>`

> [!NOTE]
> Примечание. для неподдерживаемого нового языка "язык интерфейса" (например, F #, COBOL, Fortran) фрагмент кода будет монохромным.

**Пример средства просмотра справки** В коде показано, как определить метаданные, фрагмент кода, свертываемые область и текст, зависящий от языка.

```html
<?xml version="1.0" encoding="utf-8"?>
<html>
<head>
<title>Contoso Topic 4</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Microsoft.Help.Id" content="ContosoTopic4" />
<meta name="Microsoft.Help.F1" content=" ContosoTopic4" />
    <meta name="Language" content="en-us" />
<meta name="Microsoft.Help.TocParent" content="ContosoTopic0" />
<meta name="Microsoft.Help.TocOrder" content="4" />
<meta name="SelfBranded" content="false" />
</head>

<body>
<div class="title">Contoso Topic 4</div>

  <div id="header">
<table id="bottomTable" cellpadding="0" cellspacing="0"  width="100%">
        <tr id="headerTableRow2"><td align="left">
            <span id="nsrTitle">Contoso Topic 1</span>
          </td>
<td align="right">
</td></tr>
<tr id="headerTableRow1"><td align="left">
            <span id="runningHeaderText">Contoso Widgets & Sprockets</span>
          </td></tr>
      </table>
</div>

<h2>Table of Contents</h2>

<ul class="toc">
<li class="tocline1"><a href="#introduction" target="_self">1.0 Introduction</a></li>
<li class="tocline1"><a href="#seealso" target="_self">See Also</a></li>
</ul>

<div class="topic">

<div id="mainSection">
<div id="mainBody">

<a name="introduction"></a>
<h2>1.0 Introduction</h2>
<p>[This documentation is for sample purposes only.]</p>

<p>Contoso Topic 1 contains examples of:
<ul>
<li>Collapsible Area</li>
<li>Bookmark ("See also")</li>
<li>Code Snippets from Branding Package</li>
</ul>
 </p>
<div class="alert"><table><tr><th>
<strong>Note </strong></th></tr>
<tr><td>
<p>This is an example of a <span class="label">Note </span>section.
Call out important items for your reader in this <span class="label">Note </span>box.
</p></td></tr>
</table>
</div>
</div>

<CollapsibleArea Expanded="1" Title="Collapsible Area Test Heading">

            <a id="sectionToggle0"><!----></a>

<div>
Example of Collapsible Area
<br/>
Lorem ipsum dolor sit amet...
</div>
</CollapsibleArea>

<div id="snippetGroup" >
<CodeSnippet EnableCopyCode="true" Language="VisualBasic" ContainsMarkup="false" DisplayLanguage="Visual Basic" >
Private Sub ToolStripRenderer1_RenderGrip(sender as Object, e as ToolStripGripRenderEventArgs) _ Handles ToolStripRenderer1.RenderGrip
Dim messageBoxVB as New System.Text.StringBuilder()
    messageBoxVB.AppendFormat("{0} = {1}", "GripBounds", e.GripBounds)
    messageBoxVB.AppendLine()
 ...
    MessageBox.Show(messageBoxVB.ToString(),"RenderGrip Event")
End Sub
</CodeSnippet>

<CodeSnippet EnableCopyCode="true" Language="CSharp" ContainsMarkup="false" DisplayLanguage="C#" >
private void ToolStripRenderer1_RenderGrip(Object sender, ToolStripGripRenderEventArgs e)
{
System.Text.StringBuilder messageBoxCS = new System.Text.StringBuilder();
messageBoxCS.AppendFormat("{0} = {1}", "GripBounds", e.GripBounds );
messageBoxCS.AppendLine();
...
MessageBox.Show(messageBoxCS.ToString(), "RenderGrip Event" );
}
</CodeSnippet>

<CodeSnippet EnableCopyCode="true" Language="fsharp" ContainsMarkup="false" DisplayLanguage="F#" >
some F# code
</CodeSnippet>
</div>

<h4 class="subHeading">Example of code specific text</h4>Language = <LanguageSpecificText devLangcs="CS" devLangvb="VB" devLangcpp="C++" devLangnu="F#" />

<a name="seealso"></a>
<h1 class="heading">See Also</h1>

    <div id="seeAlsoSection" class="section">
    <div class="seeAlsoStyle">
        <a href="ms-xhelp:///?Id=ContosoTopic1">Main Topic</a>
    </div>
 </div>
</div>
</div>
</body>
</html>
```

**Поддержка F1**

В Visual Studio при выборе клавиши F1 создаются значения, полученные из положения курсора в интегрированной среде разработки, и заполняет "контейнер свойств" заданными значениями (в зависимости от положения курсора). Когда курсор находится над функцией x, функция x активна/в фокусе и заполняет контейнер свойств значениями.  При выборе клавиши F1 контейнер свойств заполняется, и код Visual Studio F1 проверяет, является ли источник справки по умолчанию локальным или сетевым (по умолчанию используется значение Online). затем создает соответствующую строку на основе параметра Users (Online по умолчанию) — Shell Execute (дополнительные параметры запуска exe) с параметрами локального средства просмотра справки и ключевых слов (-ов) из контейнера свойств, если локальная справка используется по умолчанию или URL-адрес MSDN с ключевым словом в списке параметров.

Если для клавиши F1 возвращаются три строки, которые называются строкой с несколькими значениями, принимают первый термин, ищет попадание и, если они найдены, все готово. Если нет, перейдите к следующей строке.  Порядок важен. Представление ключевых слов с несколькими значениями должно быть длинной строкой с самой короткой строкой.  Чтобы проверить это в случае использования многозначных ключевых слов, просмотрите строку URL-адреса F1 в Интернете, в которой будет содержаться выбранное ключевое слово.

В Visual Studio 2012 мы намеренно сделали более надежный делитель между режимами "в сети" и "вне сети", так что если пользователь находился в режиме "в сети", мы просто передали запрос F1 непосредственно в нашу службу запросов в Интернете на MSDN, а не через агент библиотеки справки, который мы использовали в Visual Studio 2010. Затем мы полагаетесь на состояние "установлено содержимое поставщика = true", чтобы определить, нужно ли делать что-то другое в этом контексте. Если значение равно true, то эта логика анализа и маршрутизации выполняется в зависимости от того, что вы хотите поддерживать для ваших клиентов. Если значение равно false, то просто перейдите на сайт MSDN. Если параметр пользователя имеет значение Local, все вызовы поступают в локальный обработчик справки.

Схема потока F1:

![Поток F1](../../extensibility/internals/media/f1flow.png "F1flow")

Если для источника содержимого справки по умолчанию в окне справки выбрано значение в сети (запустить в браузере):

- Функции участника Visual Studio (VSP) выдают значение в контейнер свойств F1 (префикс контейнера свойств. ключевое слово и URL-адрес в Интернете для префикса, найденного в реестре): F1 отправляет браузеру URL-адрес и параметры VSP.

- Функции Visual Studio (редактор языка, пункты меню для Visual Studio и т. д.): F1 отправляет браузеру URL-адрес Visual Studio.

Если для источника содержимого справки по умолчанию в окне справки выбрано значение Локальная справка (запуск в средстве просмотра справки):

- Функции VSP, в которых ключевое слово совпадает между контейнером свойств F1 и индексом локального хранилища (то есть префиксом контейнера свойств. ключевое слово — это значение, найденное в локальном индексе хранилища): F1 отрисовывает раздел в средстве просмотра справки.

- Функции Visual Studio (нет параметра для VSP для переопределения контейнера свойств, созданного из компонентов Visual Studio): F1 отрисовывает раздел Visual Studio в средстве просмотра справки.

Задайте следующие значения реестра, чтобы включить резервный переход на F1 для содержимого справки поставщика. Откат клавиш F1 означает, что средство просмотра справки настроено на поиск содержимого справки F1 в Интернете, а содержимое поставщика устанавливается локально на жесткий диск пользователя. Средство просмотра справки должно просмотреть локальную справку по содержимому, несмотря на то, что параметр по умолчанию предназначен для справки в Интернете.

1. Задайте значение **вендорконтент** в разделе реестра Help 2,3:

   - Для 32-разрядных операционных систем:

        HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Help\v2.3\Catalogs\VisualStudio15

        "Вендорконтент" = DWORD: 00000001

   - Для 64-разрядных операционных систем:

        HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Help\v2.3\Catalogs\VisualStudio15

        "Вендорконтент" = DWORD: 00000001

2. Зарегистрируйте пространство имен партнеров в разделе реестра Help 2,3:

   - Для 32-разрядных операционных систем:

      <em> \\ Пространство имен \><</em> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Help\v2.3\Partner

      «Location» = «offline»

   - Для 64-разрядных операционных систем:

      <em> \\ Пространство имен \><</em> HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Help\v2.3\Partner

      «Location» = «offline»

**Анализ базового пространства имен Native**

Чтобы включить синтаксический анализ базового пространства имен, в реестре добавьте новый DWORD с именем: Басенативенамеспацес и задайте для него значение 1 (под ключом каталога, который требуется поддерживать).  Например, если вы хотите использовать каталог Visual Studio, можно добавить ключ в путь:

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Help\v2.3\Catalogs\VisualStudio15

При обнаружении ключевого слова F1 в формате "/" будет выполнен синтаксический анализ символа "/", что приведет к следующей конструкции:

- Заголовок: будет пространством имен, которое можно использовать для регистрации в реестре.

- МЕТОД. это будет ключевое слово, которое передается через.

Например, при наличии пользовательской библиотеки с именем Кустомлибрари и метода, именуемого MyTestMethod, при по запроса F1 он будет отформатирован как `CustomLibrary/MyTestMethod` .

Пользователь может зарегистрировать Кустомлибрари в качестве пространства имен в кусте Partners, а также указать требуемый ключ местоположения, а ключевое слово, передаваемое в запрос, будет MyTestMethod.

**Включение средства отладки справки в интегрированной среде разработки**

Добавьте следующий раздел реестра и значение:

::: moniker range="vs-2017"

**HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\15.0\Dynamic Help**

::: moniker-end

::: moniker range=">=vs-2019"

**HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\16.0\Dynamic Help**

::: moniker-end

Значение: отображать выходные данные отладки в данных розничной торговли: Да

В интегрированной среде разработки в пункте меню "Справка" выберите **Отладка контекст справки**.

**Метаданные содержимого**

В следующей таблице любая строка, которая появляется между скобками, — это заполнитель, который должен быть заменен распознанным значением. Например, в \<meta name="Microsoft.Help.Locale" content="[language code]" /> тексте "[код языка]" необходимо заменить на значение "en-US".

| Свойство (представление HTML) | Описание |
| - | - |
| \< meta name="Microsoft.Help.Locale" content="[language-code]" /> | Задает языковой стандарт для этого раздела. Если этот тег используется в разделе, он должен использоваться только один раз и должен быть вставлен над любым другим тегом справки Майкрософт. Если этот тег не используется, текст текста раздела индексируется с помощью средства разбиения по словам, связанного с языковым стандартом продукта, если оно указано. в противном случае используется средство разбиения по словам для английского языка (EN-US). Этот тег соответствует исок RFC 4646. Чтобы обеспечить правильную работу справки Майкрософт, используйте это свойство вместо атрибута общего языка. |
| \< meta name="Microsoft.Help.TopicLocale" content="[language-code]" /> | Задает языковой стандарт для этого раздела, если также используются другие языковые стандарты. Если этот тег используется в разделе, его необходимо использовать только один раз. Используйте этот тег, если каталог содержит содержимое на нескольких языках. Несколько разделов в каталоге могут иметь один и тот же идентификатор, но каждый из них должен указывать уникальный Топиклокале. Раздел, в котором указывается Топиклокале, соответствующий языку каталога, — это раздел, который отображается в содержании. Однако все языковые версии раздела отображаются в результатах поиска. |
| \< title>Титуль\</title> | Задает заголовок этого раздела. Этот тег является обязательным и должен использоваться только один раз в разделе. Если текст раздела не содержит \<div> раздел Title, этот заголовок отображается в разделе и в содержании. |
| \< meta name=" Microsoft.Help.Keywords" content="[aKeywordPhrase]"/> | Задает текст ссылки, отображаемой на панели «индекс» в средстве просмотра справки. При нажатии ссылки отображается раздел. Можно указать несколько ключевых слов индекса для раздела или опустить этот тег, если не нужно, чтобы ссылки на этот раздел отображались в индексе. Ключевые слова "K" из более ранних версий справки можно преобразовать в это свойство. |
| \< meta name="Microsoft.Help.Id" content="[TopicID]"/> | Задает идентификатор для этого раздела. Этот тег является обязательным и должен использоваться только один раз в разделе. Идентификатор должен быть уникальным в разделах каталога, имеющих одинаковый параметр языкового стандарта. В другом разделе можно создать ссылку на этот раздел с помощью этого идентификатора. |
| \< meta name="Microsoft.Help.F1" content="[System.Windows.Controls.Primitives.IRecyclingItemContainerGenerator]"/> | Задает ключевое слово F1 для этого раздела. Можно указать несколько ключевых слов F1 для раздела или опустить этот тег, если этот раздел не должен отображаться, когда пользователь приложения нажмет клавишу F1. Как правило, для раздела задано только одно ключевое слово F1. Ключевые слова "F" из более ранних версий справки можно преобразовать в это свойство. |
| \< meta name="Description" content="[topic description]" /> | Содержит краткую сводку по содержимому этого раздела. Если этот тег используется в разделе, его необходимо использовать только один раз. Доступ к этому свойству осуществляется непосредственно библиотекой запросов. Он не хранится в файле индекса. |
| Meta Name = "Microsoft. Help. Токпарент" Content = "[parent_Id]"/> | Указывает родительский раздел этого раздела в содержании. Этот тег является обязательным и должен использоваться только один раз в разделе. Значением является Microsoft.Help.Id родителя. Раздел может содержать только одно расположение в содержании. "-1" считается ИДЕНТИФИКАТОРом раздела для корня ОГЛАВЛЕНИя. В [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] Эта страница является домашней страницей средства просмотра справки. Это та же причина, по которой мы добавили Токпарент =-1 к некоторым темам, чтобы они отображались на верхнем уровне. Домашняя страница средства просмотра справки — это системная страница, которая является незаменяемой. Если VSP пытается добавить страницу с ИДЕНТИФИКАТОРом-1, она может быть добавлена в набор содержимого, но средство просмотра справки всегда будет использовать страницу System — средство просмотра справки Home. |
| \< meta name="Microsoft.Help.TocOrder" content="[positive integer]"/> | Указывает, где в оглавлении этот раздел отображается относительно соответствующих разделов. Этот тег является обязательным и должен использоваться только один раз в разделе. Значение представлено целым числом. Раздел, указывающий целочисленное значение с меньшим значением, отображается над темой, которая указывает целое число с большим значением. |
| \< meta name="Microsoft.Help.Product" content="[product code]"/> | Указывает продукт, описанный в этом разделе. Если этот тег используется в разделе, его необходимо использовать только один раз. Эти сведения также могут быть переданы в качестве параметра, передаваемого в индексатор справки. |
| \< meta name="Microsoft.Help.ProductVersion" content="[version number]"/> | Указывает версию продукта, описанную в этом разделе. Если этот тег используется в разделе, его необходимо использовать только один раз. Эти сведения также могут быть переданы в качестве параметра, передаваемого в индексатор справки. |
| \< meta name="Microsoft.Help.Category" content="[string]"/> | Используется продуктами для распознавания подразделов содержимого. Можно указать несколько подразделов для раздела или опустить этот тег, если не нужно, чтобы ссылки определяли какие-либо подразделы. Этот тег используется для хранения атрибутов Таржетос и TargetFrameworkMoniker при преобразовании раздела из более ранней версии справки. Содержимое имеет формат AttributeName: AttributeValue. |
| \< meta name="Microsoft.Help.TopicVersion content="[topic version number]"/> | Указывает эту версию раздела, если в каталоге существует несколько версий. Поскольку Microsoft.Help.Id не обязательно должен быть уникальным, этот тег необходим, если в каталоге существует несколько версий раздела, например, если каталог содержит раздел для платформа .NET Framework 3,5 и раздел для платформа .NET Framework 4 и оба имеют одинаковый Microsoft.Help.Id. |
| \< meta name="SelfBranded" content="[TRUE or FALSE]"/> | Указывает, используется ли в этом разделе пакет фирменной символики для запуска диспетчера библиотек справки или пакет фирменной символики, относящийся к данной теме. Этот тег должен быть либо TRUE, либо FALSE. Если это так, пакет фирменной символики для связанного раздела переопределяет пакет фирменной символики, заданный при запуске диспетчера библиотек справки, чтобы раздел отображался так, как задумано, даже если он отличается от отрисовки другого содержимого. Если значение равно FALSE, текущий раздел отображается в соответствии с пакетом фирменной символики, заданным при запуске диспетчера библиотек справки. По умолчанию диспетчер библиотек справки предполагает, что для самонастройки задано значение false, если переменная Селфбрандед не объявлена как ИСТИНная. Поэтому нет необходимости объявлять \<meta name="SelfBranded" content="FALSE"/> . |

## <a name="create-a-branding-package"></a>Создание пакета фирменной символики

Выпуск Visual Studio охватывает ряд различных продуктов Visual Studio, включая изолированные и интегрированные оболочки для партнеров Visual Studio.  Каждый из этих продуктов требует некоторой степени поддержки фирменной символики содержимого справки на основе разделов, уникальной для продукта.  Например, разделы Visual Studio должны иметь единую фирменную презентацию, в то время как в SQL Studio, оболочке для оболочки ISO, требуется собственная уникальная Справка по фирменной символике содержимого для каждого раздела.  Интегрированному участнику оболочки может потребоваться, чтобы разделы справки наблюдались в родительском содержимом справки Visual Studio, сохраняя при этом собственные фирменные символики.

Пакеты фирменной символики устанавливаются продуктом, содержащим средство просмотра справки.  Для продуктов Visual Studio:

- Резервный пакет фирменной символики (Branding_ \<locale> . MSHC) устанавливается в корне приложения Help viewer 2,3 (например: C:\Program Files (x86) \Microsoft Help Viewer\v2.3) с помощью языкового пакета средства просмотра справки.  Это используется в случаях, когда пакет фирменной символики продукта не установлен (содержимое не установлено) или если установленный пакет фирменной символики поврежден.  Элементы Visual Studio (эмблема и обратная связь) игнорируются, если используется пакет фирменной символики для корневого приложения.

- При установке содержимого Visual Studio из службы пакета содержимого также устанавливается пакет фирменной символики (для первого сценария установки содержимого).  Если пакет фирменной символики обновлен, то обновление устанавливается при возникновении следующего обновления содержимого или установки дополнительного пакета.

Окно справки (Майкрософт) поддерживает фирменную символику разделов на основе метаданных раздела.

- Где метаданные раздела определяют собственное значение = true, подготавливает раздел как есть, не предпринимайте никаких действий (как фирменная символика).

- Где метаданные раздела определяют собственные фирменные значения = false, используйте пакет фирменной символики, связанный со значением метаданных Топиквендор.

- Где Metadata раздела определяет Name = "Microsoft. Help. Топиквендор" Content = \< branding package name in vendor MSHA> , используйте пакет фирменной символики, определенный в значении содержимого.

- В каталоге Visual Studio имеется приоритетное приложение фирменной символики пакетов.  Применяется первая фирменная символика по умолчанию Visual Studio, а затем, если она определена в метаданных раздела и поддерживается со связанным пакетом фирменной символики (как определено в MSHA установки), в качестве переопределения применяется фирменная символика, определенная поставщиком.

Элементы фирменной символики обычно делятся на три основные категории:

- Элементы заголовка (примеры включают ссылку на отзыв, текст условного заявления об отказе, логотип)

- Поведение содержимого (примеры включают в себя элементы управления "развернуть/свернуть" и элементы фрагментов кода)

- Элементы нижнего колонтитула (пример авторского права)

Элементы, которые считаются элементами с фирменной символикой, включают (см. описание в этой спецификации):

- Логотип каталога или продукта (например, Visual Studio)

- Ссылки на отзыв и элементы электронной почты

- Текст заявления об отказе

- Текст об авторских правах

Вспомогательные файлы в пакете фирменной символики для средства просмотра справки Visual Studio включают:

- Графика (эмблемы, значки и т. д.)

- Branding.js файлы скриптов, поддерживающие поведение содержимого

- Branding.xml — строки, которые постоянно используются в содержимом каталога.  Примечание. для элементов текста локализации Visual Studio в branding.xml включите _locID = "". \<unique value>

- Фирменная символика. определения стилей для согласованности представления в стиле CSS

- Печать определений стилей CSS для единообразной печатной презентации

Как отмечалось выше, пакеты фирменной символики связаны с разделом:

- Если в метаданных определено Селфбрандед = false, раздел наследует пакет фирменной символики каталога.

- Или, если Селфбрандед = false и имеется уникальный пакет фирменной символики, определенный в MSHA и доступный при установке содержимого

Для использования VSPs, реализующего пользовательские пакеты фирменной символики (VSP Content, Селфбрандед = true), можно начать с резервного пакета фирменной символики (установленного с помощью средства просмотра справки) и изменить имя файла соответствующим образом.  Файл Branding_ \<locale> . MSHC — это ZIP-файл с расширением, измененным на MSHC, поэтому просто измените расширение с MSHC на ZIP и извлеките содержимое.  Ниже приведены сведения о фирменной символике элементов пакета и их изменении (например, изменение логотипа на логотип VSP и ссылка на логотип в файле Branding.xml, обновление Branding.xml в зависимости от VSP и т. д.).

После внесения всех изменений создайте ZIP-файл, содержащий нужные элементы фирменной символики, и измените расширение на. MSHC.

Чтобы связать пользовательский пакет фирменной символики, создайте MSHA, содержащий ссылку на файл MSHC фирменной символики вместе с содержимым MSHC (содержащего разделы).  Как создать базовый MSHA, см. ниже "MSHA".

Файл Branding.xml содержит список элементов, используемых для согласованного отображения конкретных элементов в разделе, который содержит раздел \<meta name="Microsoft.Help.SelfBranded" content="false"/> .  Список элементов Visual Studio в файле Branding.xml приведен ниже.  Этот список предназначен для использования в качестве шаблона для внедрения оболочки ISO, где они изменяют эти элементы (например, логотип, Отзывы и авторские права) для удовлетворения своих потребностей в фирменной символике продукта.

Примечание. переменные, отмеченные "{n}", имеют зависимости кода — удаление или изменение этих значений приведут к ошибкам и, возможно, к сбою приложения. Идентификаторы локализации (например, _locID = "CodeSnippet. n") включены в пакет фирменной символики Visual Studio.

**Branding.xml**

| Элемент | Описание |
| - | - |
| Функция: | **коллапсиблеареа** |
| Используйте следующую команду: | Разворачивание свертывания текста элемента управления содержимым |
| **Элемент** | **Значение** |
| експандтекст | Разверните |
| коллапсетекст | Свернуть |
| Функция: | **CodeSnippet** |
| Используйте следующую команду: | Текст элемента управления фрагмента кода.  Примечание. содержимое фрагмента кода с "неразрывным" пространством будет заменено на "пространство". |
| **Элемент** | **Значение** |
| копитоклипбоард | Копировать в буфер обмена |
| виевколоризедтекст | Просмотр с выделением цветом |
| комбинедвбтабдисплайлангуаже | Visual Basic (пример) |
| вбдекларатион | Объявление |
| вбусаже | Использование |
| Функция: | **Отзыв, нижний колонтитул и эмблема** |
| Используйте следующую команду: | Предоставьте элемент управления обратной связи для клиента, чтобы отправить отзыв по текущему разделу по электронной почте.  Текст об авторских правах на содержимое.  Определение логотипа. |
| **Элемент** | **Значение (эти строки можно изменить в соответствии с потребностями, необходимым для нужды содержимого.)** |
| Информация | © Корпорация Microsoft (Microsoft Corporation), 2013. Все права защищены. |
| сендфидбакк | \<a href="{0}" {1}>Отправить отзыв \</a> по этому разделу в корпорацию Майкрософт. |
| FeedbackLink | |
| логотитле | [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] |
| логофиленаме | vs_logo_bk.gif |
| логофиленамехк | vs_logo_wh.gif |
| Функция: | **Заявление об отказе** |
| Используйте следующую команду: | Набор относящихся к регистру отказов для содержимого машинного перевода. |
| **Элемент** | **Значение** |
| MT_Editable | Эта статья переведена на машинный перевод. При наличии подключения к Интернету выберите "просмотреть этот раздел в сети", чтобы просмотреть эту страницу в режиме редактирования с исходным содержимым на английском языке одновременно. |
| MT_NonEditable | Эта статья переведена на машинный перевод. При наличии подключения к Интернету выберите "просмотреть этот раздел в сети", чтобы просмотреть эту страницу в режиме редактирования с исходным содержимым на английском языке одновременно. |
| MT_QualityEditable | Эта статья переведена вручную. При наличии подключения к Интернету выберите "просмотреть этот раздел в сети", чтобы просмотреть эту страницу в режиме редактирования с исходным содержимым на английском языке одновременно. |
| MT_QualityNonEditable | Эта статья переведена вручную. При наличии подключения к Интернету выберите "просмотреть этот раздел в сети", чтобы просмотреть эту страницу в режиме редактирования с исходным содержимым на английском языке одновременно. |
| MT_BetaContents | Эта статья переведена на машинный перевод для предварительного выпуска. При наличии подключения к Интернету выберите "просмотреть этот раздел в сети", чтобы просмотреть эту страницу в режиме редактирования с исходным содержимым на английском языке одновременно. |
| MT_BetaRecycledContents | Эта статья была переведена вручную для предварительного выпуска. При наличии подключения к Интернету выберите "просмотреть этот раздел в сети", чтобы просмотреть эту страницу в режиме редактирования с исходным содержимым на английском языке одновременно. |
| Функция: | **линктабле** |
| Используйте следующую команду: | Поддержка ссылок на разделы в Интернете |
| **Элемент** | **Значение** |
| линктаблетитле | Таблица связей |
| топиценулинктекст | Просмотрите английскую версию \</a> этой статьи, которая доступна на вашем компьютере. |
| топиконлинелинктекст | Просмотреть этот раздел в \<a href="{0}" {1}> Интернете\</a> |
| онлинетекст | Миграция по сети |
| Функция: | **Управление звуком видео** |
| Используйте следующую команду: | Отображение элементов и текста для видеоматериала |
| **Элемент** | **Значение** |
| мултимедианотсуппортед | Для поддержки содержимого необходимо установить Internet Explorer 9 или более поздней версии {0} . |
| видеотекст | отображение видео |
| аудиотекст | Потоковая передача звука |
| онлиневидеолинктекст | \<p>Чтобы просмотреть видео, связанное с этим разделом, щелкните {0} \<a href="{1}"> {2} здесь \</a> .\</p> |
| онлинеаудиолинктекст | \<p>Чтобы прослушать звук, связанный с этим разделом, щелкните {0} \<a href="{1}"> {2} здесь \</a> .\</p> |
| Функция: | **Управление содержимым не установлено** |
| Используйте следующую команду: | Текстовые элементы (строки), используемые для отрисовки contentnotinstalled.htm |
| **Элемент** | **Значение** |
| контентнотинсталледтитле | Содержимое на вашем компьютере не найдено. |
| контентнотинсталледдовнлоадконтенттекст | \<p>Чтобы загрузить содержимое на компьютер, \<a href="{0}" {1}> перейдите на вкладку Управление \</a> .\</p> |
| контентнотинсталледтекст | \<p>На компьютере не установлено ни одного содержимого. Обратитесь к администратору для установки содержимого локальной справки.\</p> |
| Функция: | **Элемент управления раздела не найден** |
| Используйте следующую команду: | Текстовые элементы (строки), используемые для отрисовки topicnotfound.htm |
| **Элемент** | **Значение** |
| топикнотфаундтитле | Не удается найти запрошенный раздел на компьютере. |
| топикнотфаундвиевонлинетекст | \<p>Запрошенный раздел не найден на компьютере, но вы можете \<a href="{0}" {1}> просмотреть раздел в Интернете \</a> .\</p> |
| топикнотфаунддовнлоадконтенттекст | \<p>Ссылки на Похожие разделы см. в области навигации или на \<a href="{0}" {1}> вкладке Управление \</a> для загрузки содержимого на компьютер.\</p> |
| топикнотфаундтекст | \<p>Запрошенный раздел не найден на вашем компьютере.\</p> |
| Функция: | **Поврежденный элемент управления раздела** |
| Используйте следующую команду: | Текстовые элементы (строки), используемые для отрисовки topiccorrupted.htm |
| **Элемент** | **Значение** |
| топиккорруптедтитле | Не удалось отобразить запрошенный раздел. |
| топиккорруптедвиевонлинетекст | \<p>Средству просмотра справки не удалось отобразить запрошенный раздел. Возможно, произошла ошибка в содержимом раздела или базовой системной зависимости.\</p> |
| Функция: | **Элемент управления домашней страницы** |
| Используйте следующую команду: | Текст, поддерживающий отображение содержимого узла верхнего уровня окна справки. |
| **Элемент** | **Значение** |
| HomePageTitle | Домашняя страница средства просмотра справки |
| хомепажеинтродуктион | \<p>Добро пожаловать в окно справки (Майкрософт) — важный источник информации для всех пользователей, использующих средства, продукты, технологии и службы Майкрософт. Средство просмотра справки предоставляет доступ к инструкциям и справочным сведениям, примерам кода, техническим статьям и т. д. Чтобы найти нужные материалы, просмотрите оглавление, используйте полнотекстовый поиск или перейдите по содержимому с помощью ключевого слова index.\</p> |
| хомепажеконтентинсталлтекст | \<p>\<br />Используйте \<a href="{0}" {1}> вкладку Управление содержимым, \</a> чтобы сделать следующее: \<ul> \<li> Добавить содержимое на компьютер. \</li> \<li> Проверьте наличие обновлений для локального содержимого. \</li> \<li> Удаление содержимого с компьютера.\</li>\</ul>\</p> |
| хомепажеинсталледбукс | Установленные книги |
| хомепаженобуксинсталлед | Содержимое на вашем компьютере не найдено. |
| хомепажехелпсеттингс | Параметры содержимого справки |
| хомепажехелпсеттингстекст | \<p>Текущий параметр — локальная справка. В окне справки отображается содержимое, установленное на компьютере. \<br /> Чтобы изменить источник содержимого справки, в строке меню Visual Studio выберите \<span style="{0}"> Справка, задайте параметры справки \</span> .\<br />\</p> |
| Мегабайт | МБ |

**branding.js**

Файл branding.js содержит JavaScript, используемый элементами фирменной символики средства просмотра справки Visual Studio.  Ниже приведен список элементов фирменной символики и вспомогательной функции JavaScript.  Все строки, которые должны быть локализованы для этого файла, определены в разделе "локализуемые строки" в верхней части этого файла.  Файл ИКЛ был создан для строк Loc в файле branding.js.

|**Функция фирменной символики**|**Функция JavaScript**|**Описание**|
|-|-|-|
|Var...||Определение переменных|
|Получение языка пользовательского кода|сетусерпреференцеланг|Сопоставляет индекс # с языком кода|
|Установка и получение значений файлов cookie|setCookie||
|Наследуемый член|чанжемемберслабел|Развернуть или свернуть наследуемый член|
|Когда Селфбрандед = false|onLoad|Прочтите строку запроса, чтобы проверить, является ли он запросом на печать.  Установите все CodeSnippets, чтобы сосредоточиться на вкладке предпочитаемый пользователем.  Если это запрос на печать, установите для Испринтерфриендли значение true. Проверьте режим высокой контрастности.|
|Фрагмент кода|аддспеЦификтекстлангуажетагсет||
||жетиндексфромдевланг||
||чанжетаб||
||сеткодесниппетланг||
||сеткуррентланг||
||копитоклипбоард||
|коллапсиблеареа|аддтоколлапсиблеконтролсет|запись всего объекта свертываемого элемента управления в список.|
||CA_Click|в зависимости от состояния сворачиваемой области определяет, какое изображение и текст следует представлять.|
|Контрастная поддержка для логотипа|Исблаккбаккграунд ()|Вызывается для определения, является ли фон черным.  Точность только в режиме высокой контрастности.|
||Ишигхконтраст ()|использовать цветной диапазон для обнаружения режима высокой контрастности|
||Онхигхконтраст (черный)|Вызывается при обнаружении высокой контрастности|
|Функция LST|||
||Аддтоланспектекстидсет (идентификатор)||
||Упдателст (Куррентланг)||
||Жетдевлангфромкодесниппет (lang)||
|Функции мультимедиа|подпись (начало, конец, текст, стиль)||
||Финдаллмедиаконтролс (Нормализедид)||
||Жетактивеплайер (Нормализедид)||
||Каптионсонофф (идентификатор)||
||Тосекондс (t)||
||Жеталлкомментс (node)||
||Стилеректифи (styleName, styleValue)||
||Шовкк (идентификатор)||
||Подзаголовок (идентификатор)||

**HTM, ФАЙЛЫ**

Пакет фирменной символики содержит набор HTM-файлов, которые поддерживают сценарии для обмена сведениями о ключах, чтобы помочь пользователям содержимого, например домашнюю страницу, содержащую раздел, в котором описывается, какие наборы содержимого установлены, и страницы, сообщающие пользователю о том, что разделы не удается найти в локальном наборе разделов. Эти HTM файлы можно изменять для каждого продукта.  Поставщики оболочки ISO могут взять пакет фирменной символики по умолчанию и изменить поведение и содержимое этих страниц в соответствии с их нуждами.  Эти файлы ссылаются на соответствующий пакет фирменной символики, чтобы теги фирменной символики могли получить соответствующее содержимое из файла branding.xml.

|**Файл**|**Использование**|**Отображаемый источник содержимого**|
|-|-|-|
|homepage.htm|Это страница, на которой отображается текущее установленное содержимое, а также любое другое сообщение, подходящее пользователю о своем содержимом.  Этот файл содержит дополнительный атрибут метаданных "Microsoft.Help.Id" Content = "-1", который размещает это содержимое в верхней части ОГЛАВЛЕНИя локального содержимого.||
||<META_HOME_PAGE_TITLE_ADD/>|Branding.xml, тег \<HomePageTitle>|
||<HOME_PAGE_INTRODUCTION_SECTION_ADD/>|Branding.xml, тег \<HomePageIntroduction>|
||<HOME_PAGE_CONTENT_INSTALL_SECTION_ADD/>|Branding.xml, тег \<HomePageContentInstallText>|
||<HOME_PAGE_BOOKS_INSTALLED_SECTION_ADD/>|Раздел заголовков Branding.xml тег \<HomePageInstalledBooks> , данные, созданные из приложения,  \<HomePageNoBooksInstalled> Если книги не установлены.|
||<HOME_PAGE_SETTINGS_SECTION_ADD/>|Раздел заголовка Branding.xml тег \<HomePageHelpSettings> , текст раздела \<HomePageHelpSettingsText> .|
|topiccorrupted.htm|Если раздел существует в локальном наборе, но по какой-либо причине не может быть отображено (поврежденное содержимое).||
||<META_TOPIC_CORRUPTED_TITLE_ADD/>|Branding.xml, тег \<TopicCorruptedTitle>|
||<TOPIC_CORRUPTED_SECTION_ADD/>|Branding.xml, тег \<TopicCorruptedViewOnlineText>|
|topicnotfound.htm|Если раздел не найден в локальном наборе содержимого и не доступен в сети||
||<META_TOPIC_NOT_FOUND_TITLE_ADD/>|Branding.xml, тег \<TopicNotFoundTitle>|
||<META_TOPIC_NOT_FOUND_ID_ADD/>|Branding.xml, тег \<TopicNotFoundViewOnlineText> + \<TopicNotFoundDownloadContentText>|
||<TOPIC_NOT_FOUND_SECTION_ADD/>|Branding.xml, тег \<TopicNotFoundText>|
|contentnotinstalled.htm|Если для продукта не установлено локальное содержимое.||
||<META_CONTENT_NOT_INSTALLED_TITLE_ADD/>|Branding.xml, тег \<ContentNotInstalledTitle>|
||<META_CONTENT_NOT_INSTALLED_ID_ADD/>|Branding.xml, тег \<ContentNotInstalledDownloadContentText>|
||<CONTENT_NOT_INSTALLED_SECTION_ADD/>|Branding.xml, тег \<ContentNotInstalledText>|

**Файлы CSS**

Пакет фирменной символики средства просмотра справки Visual Studio содержит два файла CSS для поддержки единообразного представления содержимого справки Visual Studio:

- Branding. CSS — содержит элементы CSS для отрисовки, где Селфбрандед = false

- Printer. CSS — содержит элементы CSS для отрисовки, где Селфбрандед = false

В файлы фирменной символики. CSS входят определения для представления в разделе Visual Studio (заменяются фирменная символика. CSS, содержащаяся в Branding_ \<locale> . MSHC из службы пакетов, может измениться).

**Графические файлы**

В содержимом Visual Studio отображается эмблема Visual Studio и другая графика.  Полный список графических файлов в пакете фирменной символики средства просмотра справки Visual Studio приведен ниже.

|**Файл**|**Использование**|**Примеры**|
|-|-|-|
|clear.gif|Используется для визуализации сворачиваемой области||
|footer_slice.gif|Презентация нижнего колонтитула||
|info_icon.gif|Используется при отображении информации|Отказ от ответственности|
|online_icon.gif|Этот значок будет связан с онлайн-ссылками||
|tabLeftBD.gif|Используется для отрисовки контейнера фрагмента кода||
|tabRightBD.gif|Используется для отрисовки контейнера фрагмента кода||
|vs_logo_bk.gif|Используется для ссылок на эмблему с нормальным контрастом, как определено в теге Branding.xml \<LogoFileName> .  Для продуктов Visual Studio имя логотипа — vs_logo_bk.gif.||
|vs_logo_wh.gif|Используется для обычных ссылок на эмблему, как определено в теге Branding.xml \<LogoFileNameHC> .  Для продуктов Visual Studio имя логотипа — vs_logo_wh.gif.||
|ccOff.png|Рисунок субтитров||
|ccOn.png|Рисунок субтитров||
|ImageSprite.png|Используется для визуализации сворачиваемой области|развернутая или свернутая графика|

## <a name="deploy-a-set-of-topics"></a>Развертывание набора разделов

Это простое и быстрое руководство по созданию набора развертывания содержимого средства просмотра справки, состоящего из файла MSHA и набора CAB-файлов или Мшкс, содержащих разделы. MSHA — это XML-файл, описывающий набор файлов CAB или MSHC. Средство просмотра справки может прочитать MSHA, чтобы получить список содержимого (. CAB или. Файлы MSHC) доступны для локальной установки.

Это лишь учебник, описывающий очень простую схему XML для средства просмотра справки MSHA.  Ниже приводится пример реализации, представленный в этом кратком обзоре, и пример Хелпконтентсетуп. MSHA.

Имя MSHA для целей этого учебника — Хелпконтентсетуп. msha (имя файла может быть любым, с расширением. MSHA). Хелпконтентсетуп. msha (пример ниже) должен содержать список доступных CAB-файлов или Мшкс.  Тип файла должен быть одинаковым в пределах MSHA (не поддерживает сочетание типов файлов MSHA и CAB). Для каждого CAB-файла или MSHC должен быть \<div class="package"> ... \</div> (см. пример ниже).

Примечание. в приведенном ниже примере реализации мы включили пакет фирменной символики. Это крайне важно для включения, чтобы получить необходимые элементы отрисовки содержимого Visual Studio и поведения содержимого.

Пример файла Хелпконтентсетуп. msha: (замените "имя набора содержимого 1", "имя набора содержимого 2" и т. д. именами файлов.)

```html
<html>
<head />
<body class="vendor-book">
<div class="details">
<span class="vendor">Your Company</span>
<span class="locale">en-us</span>
<span class="product">Your Company Help Content</span>
<span class="name">Your Company Help Content</span>
</div>
<div class="package-list">
<div class="package">
<span class="name">Your_Company _Content_Set_1</span>
<span class="deployed">True</span>
<a class="current-link" href="Your_Company _Content_Set_1.mshc">Your_Company _Content_Set_1.mshc </a>
</div>
<div class="package">
<span class="name">Your_Company _Content_Set_2</span>
<span class="deployed">True</span>
<a class="current-link"href=" Your_Company _Content_Set_2.mshc "> Your_Company _Content_Set_2.mshc </a>
</div>.
```

1. Создать локальную папку, что вроде "К:\самплеконтент"

2. В этом примере мы будем использовать файлы MSHC для хранения разделов.  MSHC — это ZIP-файл с расширением ZIP, для которого изменено значение. MSHC.

3. Создайте файл Хелпконтентсетуп. msha в виде текстового файла (Блокнот использовался для создания файла) и сохраните его в указанной выше папке (см. шаг 1).

Класс "фирменная символика" существует и уникален. Фирменная символика MSHC включена в этот учебник, чтобы установленное содержимое содержало фирменную символику, а поведение содержимого в Мшкс будет иметь соответствующие элементы поддержки, содержащиеся в пакете фирменной символики. Без этого ошибки будут возникать, когда система ищет элементы поддержки, которые не являются частью скопированного (установленного) содержимого.

Чтобы получить пакет фирменной символики Visual Studio, скопируйте файл Branding_en-US. MSHC в папку C:\Program Files (x86) \Microsoft Help Viewer\v2.3\ in the Work Folder.

```html
<html>
<head />
<body class="vendor-book">
<div class="details">
<span class="vendor">Your Company</span>
<span class="locale">en-us</span>
<span class="product">Your Company Help Content</span>
<span class="name">Your Company Help Content</span>
</div>
<div class="package-list">
<div class="package">
<span class="name">Your_Company _Content_Set_1</span>
<span class="deployed">True</span>
<a class="current-link" href="Your_Company _Content_Set_1.mshc">Your_Company _Content_Set_1.mshc </a>
</div>
<div class="package">
<span class="name">Your_Company _Content_Set_2</span>
<span class="deployed">True</span>
<a class="current-link"href=" Your_Company _Content_Set_2.mshc "> Your_Company _Content_Set_2.mshc </a>
</div>
<div class="package">
<span class="packageType">branding</span>
<span class="name">Branding_en-US</span>
<span class="deployed">True</span>
<a class="current-link" href="Branding_en-US.mshc">Branding_en-US.mshc</a>
</div>
</div>
</body>
</html>
```

**Сводка**

Использование и расширение описанных выше действий позволит VSPs развернуть свои наборы содержимого для окна справки Visual Studio.

### <a name="add-help-to-the-visual-studio-shell-integrated-and-isolated"></a>Добавление справки в оболочку Visual Studio (интегрированная и изолированная)

**Введение**

В этом пошаговом руководстве показано, как включить содержимое справки в приложение оболочки Visual Studio, а затем развернуть его.

**Требования**

1. [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)]

2. [Visual Studio 2013 изолированной среды](https://visualstudio.microsoft.com/vs/older-downloads/isolated-shell/)

**Обзор**

[!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)]Оболочка — это версия [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] интегрированной среды разработки, на которой можно создать приложение. Такие приложения содержат изолированную оболочку вместе с создаваемыми расширениями. Используйте шаблоны проектов изолированной оболочки, которые включены в [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] пакет SDK, для сборки расширений.

Основные шаги по созданию изолированного приложения на основе оболочки и его помощи:

1. Получите [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] распространяемый пакет оболочки ISO (загружаемый пакет Майкрософт).

2. В Visual Studio создайте расширение справки на основе изолированной оболочки, например, расширение справки Contoso, описанное далее в этом пошаговом руководстве.

3. Заключите расширение и распространяемый пакет оболочки ISO в MSI-файл развертывания (Настройка приложения). В этом пошаговом руководстве не содержится шаг установки.

Создайте хранилище содержимого Visual Studio. Для сценария интегрированной оболочки измените значение Visual Studio12 на имя каталога продуктов следующим образом:

- Создать папку C:\ProgramData\Microsoft\HelpLibrary2\Catalogs\VisualStudio15.

- Создайте файл с именем CatalogType.xml и добавьте его в папку. Файл должен содержать следующие строки кода:

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <catalogType>UserManaged</catalogType>
    ```

Определите хранилище содержимого в реестре. Для интегрированной оболочки измените VisualStudio15 на имя каталога продуктов:

- HKLM\SOFTWARE\Wow6432Node\Microsoft\Help\v2.3\Catalogs\VisualStudio15

   Ключ: LocationPath строковое значение: C:\ProgramData\Microsoft\HelpLibrary2\Catalogs\VisualStudio15\

- HKLM\SOFTWARE\Wow6432Node\Microsoft\Help\v2.3\Catalogs\VisualStudio15\en-US

   Ключ: CatalogName строковое значение: [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] Документация

**Создание проекта**

Чтобы создать расширение изолированной оболочки, выполните следующие действия.

1. В Visual Studio в разделе **файл** выберите **Новый проект**, в разделе **другие типы проектов** выберите **расширяемость**, а затем выберите  **изолированная оболочка Visual Studio**. Присвойте проекту имя, `ContosoHelpShell` чтобы создать проект расширения, основанный на шаблоне изолированной оболочки Visual Studio.

2. В обозреватель решений в проекте Контосохелпшеллуи в папке файлы ресурсов откройте файл ApplicationCommands. vsct. Убедитесь, что эта строка снабжена комментариями (выполните поиск по запросу "No_Help"): `<!-- <define name="No_HelpMenuCommands"/> -->`

3. Нажмите клавишу F5, чтобы скомпилировать и запустить **отладку**. В экспериментальном экземпляре интегрированной среды разработки изолированной оболочки выберите меню **Справка** . Убедитесь, что отображаются команды **Просмотр справки**, **Добавление и удаление содержимого справки** и **Настройка параметров справки** .

4. В обозреватель решений в проекте Контошелпшелл в папке "Настройка оболочки" Откройте Контосохелпшелл. pkgdef. Чтобы определить каталог справки Contoso, добавьте следующие строки:

    ```
     [$RootKey$\Help]
    "Product"="Contoso"
    "Catalog"="Contoso"
    "Version"="100"
    "BrandingPackage"="ContosoBrandingPackage.mshc"
    ```

5. В обозреватель решений в проекте Контошелпшелл откройте Контосохелпшелл. Application. pkgdef в папке "Настройка оболочки". Чтобы включить справку F1, добавьте следующие строки:

    ```
    // F1 Help Provider

    [$RootKey$\HelpProviders\{C99BDC23-FF29-46bf-9658-ADD634CCAED8}]
    "Name"="13407"
    "Package"="{DA9FB551-C724-11d0-AE1F-00A0C90FFFC3}"
    @="Help3 Provider"
    [$RootKey$\HelpProviders]
    @="{C99BDC23-FF29-46bf-9658-ADD634CCAED8}"
    [$RootKey$\Services\{C99BDC23-FF29-46bf-9658-ADD634CCAED8}]
    "Name"="Help3 Provider"
    @="{4A791146-19E4-11D3-B86B-00C04F79F802}"
    ```

6. В обозреватель решений в контекстном меню решения Контосохелпшелл выберите пункт меню **Свойства** . В разделе **Свойства конфигурации** выберите **Configuration Manager**. В столбце **Конфигурация** измените все значения "Отладка" на "выпуск".

7. Создайте решение. При этом создается набор файлов в папке выпуска, который будет использоваться в следующем разделе.

Чтобы проверить это, как если бы оно было развернуто:

1. На компьютере, на котором вы развертываете Contoso, установите скачанную (из более поздней версии) оболочку ISO.

2. Создайте папку в \\ \Program Files (x86) \\ и назовите ее `Contoso` .

3. Скопируйте содержимое из папки Release Контосохелпшелл в \\ папку \Program Files (x86) \контосо\.

4. Запустите редактор реестра, выбрав команду  **выполнить** в меню **Пуск** и введя `Regedit` . В редакторе реестра выберите **файл**, а затем **Импорт**. Перейдите в папку проекта Контосохелпшелл. В подпапке Контосохелпшелл выберите Контосохелпшелл. reg.

5. Создайте хранилище содержимого.

    Для оболочки ISO — создание хранилища содержимого Contoso C:\ProgramData\Microsoft\HelpLibrary2\Catalogs\ContosoDev12

    Для [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] интегрированной оболочки создайте папку C:\ProgramData\Microsoft\HelpLibrary2\Catalogs\VisualStudio15

6. Создайте CatalogType.xml и добавьте в хранилище содержимого (предыдущий шаг), содержащее:

   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <catalogType>UserManaged</catalogType>
   ```

7. Добавьте следующие разделы реестра:

    HKLM\SOFTWARE\Wow6432Node\Microsoft\Help\v2.3\Catalogs\VisualStudio15Key: LocationPath строковый параметр:

    Для оболочки ISO:

    C:ProgramDataMicrosoftHelpLibrary2CatalogsVisualStudio15

    [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] Интегрированная оболочка:

    C:ProgramDataMicrosoftHelpLibrary2CatalogsVisualStudio15en-US

    Ключ: CatalogName строковое значение: [!INCLUDE[vs_dev12](../../extensibility/includes/vs_dev12_md.md)] документация. Для оболочки ISO это имя каталога.

8. Скопируйте содержимое (CAB-файлы или MSHC и MSHA) в локальную папку.

9. Пример командной строки интегрированной оболочки для тестирования хранилища содержимого. Для оболочки ISO измените значения каталога и Лаунчингапп, чтобы они соответствовали продукту.

     «C:\Program Files (x86) \Microsoft Help Viewer\v2.3\HlpViewer.exe «/CatalogName. VisualStudio15/Хелпкуери Method =» Page&ID = ContosoTopic0 "/Лаунчингапп Microsoft, VisualStudio, 12.0

10. Запустите приложение Contoso (из корневого каталога приложения Contoso). В оболочке ISO выберите пункт меню " **Справка** " и измените параметр " **задать параметры справки** ", чтобы **использовать локальную справку**.

11. В оболочке выберите пункт меню " **Справка** " и **просмотрите справку**. Должно запуститься локальное средство просмотра справки. Перейдите на вкладку **Управление содержимым** . В разделе **источник установки** выберите переключатель **диск** . Нажмите кнопку **...** и перейдите к локальной папке, содержащей содержимое Contoso (скопированное в локальную папку на предыдущем шаге). Выберите Хелпконтентсетуп. MSHA. Компания Contoso должна отобразиться в виде книги в области выбора книги. Выберите **Добавить**, а затем нажмите кнопку **Обновить** (в правом нижнем углу).

12. В интегрированной среде разработки Contoso нажмите клавишу F1, чтобы проверить функциональность F1.

## <a name="additional-resources"></a>Дополнительные ресурсы

Сведения об API среды выполнения см. в разделе [API справки Windows](/previous-versions/windows/desktop/helpapi/helpapi-portal).

Дополнительные сведения о том, как использовать API справки, см. в разделе [примеры кода окна справки](https://marketplace.visualstudio.com/items?itemName=RobChandlerHelpMVP.HelpViewer20CodeExamples).

Вы можете отправить предложения о функциях в [сообщество разработчиков](https://aka.ms/feedback/suggest?space=8).
