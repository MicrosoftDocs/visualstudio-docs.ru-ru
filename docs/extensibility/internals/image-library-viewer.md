---
title: Средство просмотра библиотеки изображений | Документация Майкрософт
description: Сведения о средстве просмотра библиотеки изображений Visual Studio, которое загружает и выполняет поиск манифестов изображений, позволяя просматривать атрибуты изображений и управлять ими.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 9d9c7fbb-ebae-4b20-9dd8-3c9070c0d0d1
author: leslierichardson95
ms.author: lerich
manager: jmartens
ms.workload:
- vssdk
ms.openlocfilehash: d60443e97bc557bc964d59750417b2662e4c3c8f
ms.sourcegitcommit: f2916d8fd296b92cc402597d1d1eecda4f6cccbf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2021
ms.locfileid: "105085979"
---
# <a name="image-library-viewer"></a>Средство просмотра библиотеки образов
Средство просмотра библиотеки изображений Visual Studio позволяет загружать и искать манифесты изображений, позволяя пользователю манипулировать ими точно так же, как и в Visual Studio. Пользователь может изменять фон, размеры, DPI, высокую контрастность и другие параметры. Средство также отображает сведения о загрузке для каждого манифеста изображения и отображает сведения об источнике для каждого изображения в манифесте образа. Это средство полезно для следующих средств:

1. Диагностика ошибок

2. Обеспечение правильной настройки атрибутов в манифестах пользовательских образов

3. Поиск образов в каталоге образов Visual Studio, чтобы расширение Visual Studio могла использовать изображения, соответствующие стилю Visual Studio

   ![Средство просмотра библиотеки изображений — главный имиджевый баннер](../../extensibility/internals/media/image-library-viewer-hero.png "Средство просмотра библиотеки изображений — главный имиджевый баннер")

   **Моникер образа**

   Моникер образа (или моникер) — это пара GUID: ID, которая однозначно определяет ресурс изображения или ресурс списка изображений в библиотеке изображений.

   **Файлы манифестов изображений**

   Файлы манифеста образа (. имажеманифест) — это XML-файлы, определяющие набор ресурсов изображений, моникеров, представляющих эти ресурсы, а также реальные изображения или изображения, представляющие каждый ресурс. Манифесты изображений могут определять автономные образы или списки изображений для устаревшей поддержки пользовательского интерфейса. Кроме того, существуют атрибуты, которые можно задать для ресурса или отдельных изображений каждого ресурса, чтобы изменить время и способ отображения этих ресурсов.

   **Схема манифеста образа**

   Полный манифест образа выглядит следующим образом:

```xml
<ImageManifest>
      <!-- zero or one Symbols elements -->
      <Symbols>
        <!-- zero or more Guid, ID, or String elements -->
      </Symbols>
      <!-- zero or one Images elements -->
      <Images>
        <!-- zero or more Image elements -->
      </Images>
      <!-- zero or one ImageLists elements -->
      <ImageLists>
        <!-- zero or more ImageList elements -->
      </ImageLists>
</ImageManifest>
```

 **Символы**

 Для удобства чтения и обслуживания манифест образа может использовать символы для значений атрибутов. Символы определяются следующим образом:

```xml
<Symbols>
      <Import Manifest="manifest" />
      <Guid Name="ShellCommandGuid" Value="8ee4f65d-bab4-4cde-b8e7-ac412abbda8a" />
      <ID Name="cmdidSaveAll" Value="1000" />
      <String Name="AssemblyName" Value="Microsoft.VisualStudio.Shell.UI.Internal" />
</Symbols>
```

|**Вложенный элемент**|**Определение**|
|-|-|
|Импорт|Импортирует символы заданного файла манифеста для использования в текущем манифесте.|
|Guid|Символ представляет GUID и должен соответствовать форматированию GUID.|
|ID|Символ представляет идентификатор и должен быть неотрицательным целым числом.|
|Строка|Символ представляет произвольное строковое значение.|

 Символы чувствительны к регистру и указываются с помощью синтаксиса $ (symbol-name):

```xml
<Image Guid="$(ShellCommandGuid)" ID="$(cmdidSaveAll)" >
      <Source Uri="/$(AssemblyName);Component/Resources/image.xaml" />
</Image>
```

 Некоторые символы предопределены для всех манифестов. Их можно использовать в атрибуте URI \<Source> \<Import> элемента или для ссылки на пути на локальном компьютере.

|**Символ**|**Описание**|
|-|-|
|CommonProgramFiles|Значение переменной среды% CommonProgramFiles%|
|LocalAppData|Значение переменной среды% LocalAppData%|
|манифестфолдер|Папка, содержащая файл манифеста|
|MyDocuments|Полный путь к папке "Мои документы" текущего пользователя|
|ProgramFiles|Значение переменной окружения% ProgramFiles%|
|Система|Папка Windows\System32|
|WinDir|Значение переменной среды% WinDir%|

 **Изображение**

 \<Image>Элемент определяет изображение, на которое может ссылаться моникер. Идентификатор GUID и идентификатор, сопринятый вместе, формируют моникер образа. Моникер для образа должен быть уникальным во всей библиотеке изображений. Если в нескольких изображениях имеется заданное специальное имя, то во время сборки библиотеки будет найден первый из них.

 Он должен содержать хотя бы один источник. Хотя источники, не зависящие от размера, предоставляют лучшие результаты в широком диапазоне размеров, они не требуются. Если служба запрашивает изображение размера, не определенного в \<Image> элементе, и нет источника, не зависящего от размера, служба выберет оптимальный источник, относящийся к размеру, и масштабирует его до запрошенного размера.

```xml
<Image Guid="guid" ID="int" AllowColorInversion="true/false">
      <Source ... />
      <!-- optional additional Source elements -->
</Image>
```

|**Attribute**|**Определение**|
|-|-|
|Guid|Необходимости Часть идентификатора GUID моникера образа|
|ID|Необходимости Часть идентификатора моникера образа|
|алловколоринверсион|[Необязательно, по умолчанию true] Указывает, может ли изображение изменяться с помощью программного инвертирования цветов при использовании темного фона.|

 **Источник**

 \<Source>Элемент определяет один исходный ресурс источника изображения (XAML и PNG).

```xml
<Source Uri="uri" Background="background">
      <!-- optional NativeResource element -->
 </Source>
```

|**Attribute**|**Определение**|
|-|-|
|URI|Необходимости URI, который определяет, откуда можно загрузить изображение. Может принимать одно из следующих значений:<br /><br /> — URI типа " [Pack](/dotnet/framework/wpf/app-development/pack-uris-in-wpf) " с помощью центра Application:///.<br /><br /> — Абсолютная ссылка на ресурс компонента.<br /><br /> — Путь к файлу, содержащему машинный ресурс;|
|Историческая справка|Используемых Указывает, какой тип фона предполагается использовать в качестве источника.<br /><br /> Может принимать одно из следующих значений:<br /><br /> - *Light*— источник можно использовать на светлом фоне.<br /><br /> - *Темное*: источник можно использовать на темном фоне.<br /><br /> - *HighContrast*. источник можно использовать в любом фоне в режиме высокая контрастность.<br /><br /> - *Хигхконтрастлигхт*. источник можно использовать на светлом фоне в режиме высокая контрастность.<br /><br /> -*Хигхконтрастдарк*. источник можно использовать на темном фоне в режиме высокая контрастность.<br /><br /> Если атрибут **Background** отсутствует, источник можно использовать в любом фоновом режиме.<br /><br /> Если **фон** имеет *светлое*, *темное*, *хигхконтрастлигхт* или *хигхконтрастдарк*, цвета источника никогда не переносятся. Если параметр **Background** опущен или имеет значение *HighContrast*, то Инверсия цветов источника управляется атрибутом **алловколоринверсион** изображения.|

 \<Source>Элемент может иметь только один из следующих необязательных вложенных элементов:

|**Элемент**|**Атрибуты (все обязательные)**|**Определение**|
|-|-|-|
|\<Size>|Значение|Источник будет использоваться для изображений заданного размера (в единицах устройства). Изображение будет квадратным.|
|\<SizeRange>|MinSize, MaxSize|Источник будет использоваться для изображений из MinSize в MaxSize (в единицах устройства) включительно. Изображение будет квадратным.|
|\<Dimensions>|Width, Height|Источник будет использоваться для изображений с заданной шириной и высотой (в единицах устройства).|
|\<DimensionRange>|MinWidth, MinHeight,<br /><br /> MaxWidth, MaxHeight|Источник будет использоваться для изображений с минимальной ширины и высоты до максимальной ширины и высоты (в единицах устройства) включительно.|

 \<Source>Элемент также может иметь необязательный вложенный \<NativeResource> элемент, который определяет \<Source> , что загружается из машинной сборки, а не из управляемой сборки.

```xml
<NativeResource Type="type" ID="int" />
```

|**Attribute**|**Определение**|
|-|-|
|Type|Необходимости Тип машинного ресурса: XAML или PNG|
|ID|Необходимости Часть целочисленного идентификатора машинного ресурса|

 **ImageList**

 \<ImageList>Элемент определяет коллекцию изображений, которые могут возвращаться в одной полосе. При необходимости полоса строится по требованию.

```xml
<ImageList>
      <ContainedImage Guid="guid" ID="int" External="true/false" />
      <!-- optional additional ContainedImage elements -->
 </ImageList>
```

|**Attribute**|**Определение**|
|-|-|
|Guid|Необходимости Часть идентификатора GUID моникера образа|
|ID|Необходимости Часть идентификатора моникера образа|
|External|[Необязательно, по умолчанию false] Указывает, ссылается ли моникер изображения на изображение в текущем манифесте.|

 Моникер для автономного образа не должен ссылаться на образ, определенный в текущем манифесте. Если содержащийся образ не удается найти в библиотеке изображений, вместо него будет использоваться пустое изображение заполнителя.

## <a name="how-to-use-the-tool"></a>Использование средства
 **Проверка манифеста пользовательского образа**

 Для создания пользовательского манифеста рекомендуется использовать средство Манифестфромресаурцес для автоформирования манифеста. Чтобы проверить пользовательский манифест, запустите средство просмотра библиотеки изображений и выберите файл > задать пути... , чтобы открыть диалоговое окно Поиск каталогов. Средство будет использовать каталоги поиска для загрузки манифестов изображений, но оно также будет использовать их для поиска DLL-файлов, содержащих изображения в манифесте, поэтому убедитесь, что в этом диалоговом окне включены каталоги манифеста и библиотеки DLL.

 ![Средство просмотра библиотеки изображений — поиск](../../extensibility/internals/media/image-library-viewer-search.png "Средство просмотра библиотеки изображений — поиск")

 Нажмите кнопку **Добавить...** , чтобы выбрать новые каталоги поиска для поиска манифестов и соответствующих библиотек DLL. Средство запомнит эти каталоги поиска, а также включить или отключить его, установив или отменив проверку каталога.

 По умолчанию средство будет пытаться найти каталог установки Visual Studio и добавить эти каталоги в список каталоги поиска. Вы можете вручную добавить каталоги, которые не удается найти в средстве.

 После загрузки всех манифестов средство можно использовать для переключения цветов **фона** , **dpi**, **высокой контрастности** или **грайскалинг** для изображений, чтобы пользователь мог визуально проанализировать ресурсы изображения, чтобы убедиться, что они правильно отображаются для различных параметров.

 ![Средство просмотра библиотеки изображений — фон](../../extensibility/internals/media/image-library-viewer-background.png "Средство просмотра библиотеки изображений — фон")

 Цвет фона можно установить в значение "Светлый", "Темный" или "Пользовательское". Если выбрать "пользовательский цвет", откроется диалоговое окно выбора цвета и в нижней части поля со списком фона будет добавлен этот пользовательский цвет для упрощения отзыва.

 ![Средство просмотра библиотеки изображений — настраиваемый цвет](../../extensibility/internals/media/image-library-viewer-custom-color.png "Средство просмотра библиотеки изображений — настраиваемый цвет")

 При выборе моникера изображения на панели сведений об изображении справа отображаются сведения о каждом реальном изображении. Панель также позволяет пользователям копировать моникер по имени или необработанному идентификатору GUID: значение идентификатора.

 ![Средство просмотра библиотеки изображений — подробности об изображении](../../extensibility/internals/media/image-library-viewer-image-details.png "Средство просмотра библиотеки изображений — подробности об изображении")

 Сведения, отображаемые для каждого источника изображения, включают в себя тип фона, на котором он отображается, будь то возможность включить в тему или поддерживать высокая контрастность, каковы размеры, в зависимости от того, является ли он независимым от размера, а также поступает ли изображение из машинной сборки.

 ![Средство просмотра библиотеки изображений — тема Can](../../extensibility/internals/media/image-library-viewer-can-theme.png "Средство просмотра библиотеки изображений — тема Can")

 При проверке манифеста образа рекомендуется развернуть манифест и БИБЛИОТЕКУ изображений в реальных расположениях. Это позволит убедиться, что все относительные пути работают правильно, и что библиотека изображений может найти и загрузить манифест и DLL-файл образа.

 **Поиск Кновнмоникерс каталога образов**

 Для лучшего соответствия стилю Visual Studio расширение Visual Studio может использовать образы в каталоге образов Visual Studio, а не создавать и использовать собственные. Это имеет преимущество отсутствия поддержки этих образов и гарантирует, что образ будет иметь резервный образ с высоким разрешением, поэтому он должен выглядеть правильно во всех параметрах DPI, поддерживаемых Visual Studio.

 Средство просмотра библиотеки изображений позволяет выполнять поиск манифеста, чтобы пользователь мог найти моникер, представляющий ресурс изображения, и использовать этот моникер в коде. Чтобы найти изображения, введите нужное условие поиска в поле поиска и нажмите клавишу ВВОД. В строке состояния внизу отображается количество найденных совпадений из общего количества образов во всех манифестах.

 ![Средство просмотра библиотеки изображений — фильтр](../../extensibility/internals/media/image-library-viewer-filter.png "Средство просмотра библиотеки изображений — фильтр")

 При поиске моникеров изображений в существующих манифестах рекомендуется искать и использовать только моникеры каталога образов Visual Studio, другие намеренно общедоступные моникеры или собственные пользовательские моникеры. Если используются неоткрытые моникеры, Пользовательский интерфейс может быть недоступен или его образы изменяются непредвиденным образом при изменении или обновлении этих общедоступных моникеров и изображений.

 Кроме того, возможен поиск по идентификатору GUID. Этот тип поиска полезен для фильтрации списка в одном манифесте или в одном подразделе манифеста, если этот манифест содержит несколько идентификаторов GUID.

 ![Средство просмотра библиотеки изображений — GUID фильтра](../../extensibility/internals/media/image-library-viewer-filter-guid.png "Средство просмотра библиотеки изображений — GUID фильтра")

 Наконец, возможен также поиск по ИДЕНТИФИКАТОРу.

 ![Средство просмотра библиотеки изображений — идентификатор фильтра](../../extensibility/internals/media/image-library-viewer-filter-id.png "Средство просмотра библиотеки изображений — идентификатор фильтра")

## <a name="notes"></a>Примечания

- По умолчанию средство запрашивает несколько манифестов образов, имеющихся в каталоге установки Visual Studio. Единственный из них, имеющий общедоступные моникеры, — это манифест **Microsoft. VisualStudio. имажекаталог** . GUID: ae27a6b0-E345-4288-96df-5eaf394ee369 **(не переопределяйте этот** GUID в пользовательском манифесте): кновнмоникерс

- Средство пытается запуститься, чтобы загрузить все найденные манифесты изображений, поэтому для отображения приложения может потребоваться несколько секунд. При загрузке манифестов он также может выполняться с высокой скоростью или без реагирования.

## <a name="sample-output"></a>Пример выходных данных
 Это средство не создает никаких выходных данных.
