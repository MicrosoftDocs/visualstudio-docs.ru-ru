---
title: Создание пользовательских шаблонов проектов и элементов | Документация Майкрософт
description: Сведения о том, как с помощью шаблонов для создания шаблонов в пакете SDK для Visual Studio включать шаблоны в более крупные расширения.
ms.custom: SEO-VS-2020
ms.date: 3/16/2019
ms.topic: overview
ms.assetid: 586da5dc-f678-402b-afd0-0332959fd7a6
author: leslierichardson95
ms.author: lerich
manager: jmartens
ms.workload:
- vssdk
ms.openlocfilehash: afddd162312ac686e97df84bec0f48dc0478c898
ms.sourcegitcommit: f2916d8fd296b92cc402597d1d1eecda4f6cccbf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2021
ms.locfileid: "105055769"
---
# <a name="create-custom-project-and-item-templates"></a>Создание пользовательских шаблонов проектов и элементов

Пакет SDK для Visual Studio включает шаблоны проектов, которые создают пользовательский шаблон проекта и пользовательский шаблон элемента. Эти шаблоны включают некоторые общие подстановки параметров и создаются в виде ZIP-файлов. Они не развертываются автоматически и недоступны в экспериментальном экземпляре. Необходимо скопировать созданный ZIP-файл в каталог пользовательских шаблонов.

Шаблоны для создания шаблонов позволяют включать шаблоны в более крупные расширения. Это позволяет реализовать управление версиями в исходных файлах и создать группу проектов шаблонов в одном пакете VSIX.

Кроме того, можно настроить шаблон для установки пакетов NuGet. Дополнительные сведения см. в статье [Пакеты NuGet в шаблонах Visual Studio](/nuget/visual-studio-extensibility/visual-studio-templates).

Для основных сценариев создания шаблонов следует использовать мастер **экспорта шаблонов**, который сохраняет выходные данные в сжатом файле. Дополнительные сведения о создании базовых шаблонов см. в статье [Создание шаблонов проектов и элементов](../ide/creating-project-and-item-templates.md).

> [!NOTE]
> Начиная с Visual Studio 2017 проверка наличия пользовательских шаблонов проектов и элементов больше не будет выполняться. Вместо этого расширение должно предоставлять файлы манифеста шаблона, в которых указано расположение установки этих шаблонов. Для обновления расширений VSIX можно использовать Visual Studio 2017. При развертывании расширения с помощью MSI необходимо создать файлы манифеста шаблона вручную. Дополнительные сведения см. в статье [Обновление пользовательских шаблонов проектов и элементов для Visual Studio 2017](../extensibility/upgrading-custom-project-and-item-templates-for-visual-studio-2017.md). Схема манифеста шаблона описана в [Справочнике по схемам манифестов шаблонов Visual Studio](../extensibility/visual-studio-template-manifest-schema-reference.md).

## <a name="create-a-project-template"></a>Создание шаблона проекта

1. Создайте проект Project Template. Шаблон проекта можно найти в диалоговом окне **Новый проект**, выполнив поиск по словосочетанию "project template" и выбрав версию шаблона проекта для C# или Visual Basic.

     Шаблон создает файл класса, значок, файл *.vstemplate*, редактируемый файл проекта с именем *ProjectTemplate.vbproj* или *ProjectTemplate.csproj*, а также некоторые файлы, которые обычно создаются в других типах проектов, такие как файл *resources.resx*, файл *AssemblyInfo* и файл *.settings*. Каждый файл кода содержит общие подстановки параметров, если это необходимо.

![Выбор проекта Project Template](media/project-template-selection.png)

2. Добавьте и удалите элементы в проекте в соответствии с требованиями проекта. Не удаляйте редактируемый файл проекта, файл *AssemblyInfo* и файл *.vstemplate*.

3. Обновите файл *.vstemplate*, чтобы в нем была отражена информация о добавленных и удаленных элементах проекта. Элемент [Project](../extensibility/project-element-visual-studio-templates.md) должен содержать элемент [ProjectItem](../extensibility/projectitem-element-visual-studio-item-templates.md) для каждого файла, который будет включен в шаблон.

4. Измените файлы кода и другое содержимое, доступное для пользователя, и добавьте соответствующие подстановки параметров.

5. Измените созданное содержимое в соответствии со своими потребностями.

6. Выполните построение проекта.

     Visual Studio создает файл *ZIP*, содержащий шаблон. Он не развертывается и недоступен в экспериментальном экземпляре.

## <a name="create-an-item-template"></a>Создание шаблона элемента

1. Создайте проект Item Template.

     Шаблон создает файл класса, значок, файл *.vstemplate* и файл *AssemblyInfo*. Файл класса содержит некоторые общие подстановки параметров.

2. Добавьте и удалите элементы в проекте в соответствии с требованиями проекта.

3. Обновите файл *.vstemplate*, чтобы в нем была отражена информация о добавленных и удаленных элементах проекта. Элемент [Project](../extensibility/project-element-visual-studio-templates.md) должен содержать элемент [ProjectItem](../extensibility/projectitem-element-visual-studio-item-templates.md) для каждого файла, который будет включен в шаблон.

4. Измените файлы кода и другое содержимое, доступное для пользователя, и добавьте соответствующие подстановки параметров.

5. Измените созданное содержимое в соответствии со своими потребностями.

6. Выполните построение проекта.

     Visual Studio создает сжатый файл, содержащий шаблон. Он не развертывается и недоступен в экспериментальном экземпляре.

## <a name="deployment"></a>Развертывание

### <a name="to-deploy-the-project-or-item-template"></a>Развертывание шаблона проекта или элемента

1. Создайте проект VSIX. Дополнительные сведения см. в разделе [Шаблон проекта VSIX](../extensibility/vsix-project-template.md).

2. Задайте проект VSIX в качестве запускаемого проекта. В **Обозревателе решений** выберите узел проекта VSIX, щелкните его правой кнопкой мыши и выберите пункт **Назначить запускаемым проектом**.

3. Задайте проект для шаблона проекта (Project Template) в качестве ресурса для проекта VSIX. Откройте файл *.vsixmanifest*. Перейдите на вкладку **Ресурсы** и выберите **Создать**.

    1. В поле **Тип** задайте значение **Microsoft.VisualStudio.ProjectTemplate** или **Microsoft.VisualStudio.ItemTemplate**.

    2. В поле "Источник" выберите **Проект в текущем решении**, а затем проект, содержащий шаблон.

4. Нажмите клавишу **F5**, чтобы собрать решение. Откроется экспериментальный экземпляр.

5. В проекте для шаблона проекта (Project Template) вы увидите свой шаблон проекта, указанный в диалоговом окне **Новый проект** (**Файл** > **Создать** > **Проект**) в узле Visual C# или Visual Basic. В проекте для шаблона элемента (Item Template) вы должны увидеть свой шаблон элемента в диалоговом окне **Добавление нового элемента**. Чтобы открыть диалоговое окно **Добавление нового элемента**, в **Обозревателе решений** выберите узел проекта и последовательно выберите пункты **Добавить** > **Новый элемент**.

## <a name="see-also"></a>См. также

- [Справочник по шаблонам Visual Studio](../ide/creating-project-and-item-templates.md)
- [Пакеты NuGet в шаблонах Visual Studio](/nuget/visual-studio-extensibility/visual-studio-templates)
