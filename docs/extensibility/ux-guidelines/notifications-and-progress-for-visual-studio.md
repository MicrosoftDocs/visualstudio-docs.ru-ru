---
title: Уведомления и ход выполнения для Visual Studio | Документация Майкрософт
description: Узнайте о нескольких способах информирования пользователей о том, что происходит в Visual Studio в отношении задач разработки программного обеспечения.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: f0ef65e9-0f1f-45f4-9f25-6e2398691168
author: leslierichardson95
ms.author: lerich
manager: jmartens
ms.workload:
- vssdk
ms.openlocfilehash: a6b273c1ee2ee83c713500d972ecab27a67b3145
ms.sourcegitcommit: f2916d8fd296b92cc402597d1d1eecda4f6cccbf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2021
ms.locfileid: "105068548"
---
# <a name="notifications-and-progress-for-visual-studio"></a>Уведомления и ход выполнения для Visual Studio
## <a name="notification-systems"></a><a name="BKMK_NotificationSystems"></a> Системы уведомлений

### <a name="overview"></a>Обзор
 Существует несколько способов информирования пользователя о том, что происходит в Visual Studio в отношении задач разработки программного обеспечения.

 При реализации любого типа уведомления:

- **Для параметра число уведомлений следует использовать минимальное** действительное значение. Уведомления должны применяться к большинству пользователей Visual Studio, а также к пользователям определенной области функций или функций. Чрезмерное использование уведомлений может сидетракк пользователя или уменьшить предполагаемую простоту использования системы.

- **Убедитесь, что вы выводяте четкие и** исходящие сообщения, которые пользователь может использовать для вызова соответствующего контекста для более сложных вариантов выбора и выполнения дальнейших действий.

- **Выставить соответствующие синхронные и асинхронные сообщения соответствующим образом.** Синхронные уведомления указывают на то, что что-то требует немедленного внимания, например при сбое веб-службы или возникновении исключения в коде. Пользователь должен быть уведомлен о таких ситуациях, которые требуют ввода данных, например в модальном диалоговом окне. Асинхронные уведомления — это те, которые пользователь должен узнать о, но не обязательно должен сразу же приступить к работе, например при завершении операции сборки или завершении развертывания веб-сайта. Эти сообщения должны быть более внешними и не прерывать поток задач пользователя.

- **Используйте модальные диалоговые окна, только если это необходимо, чтобы запретить пользователю предпринимать дальнейшие действия** , прежде чем подтверждать сообщение или принимать решение, представленное в диалоговом окне.

- **Удалите внешние уведомления, когда они стали недействительными.** Не требуйте от пользователя отклонять уведомление, если оно уже выполнило действия для устранения проблемы, о которой они были уведомлены.

- **Имейте в виду, что уведомления могут привести к ложным корреляциям.** Пользователи могут предполагать, что одно или несколько действий активировали уведомление, когда на самом деле не было связи с причинами. В сообщении с уведомлением об контексте, триггере и источнике уведомления необходимо очистить.

### <a name="choosing-the-right-method"></a>Выбор правильного метода
 Используйте эту таблицу, чтобы выбрать правильный метод уведомления пользователя о вашем сообщении.

|Метод|Использовать|Не использовать|
|------------|---------|----------------|
|[Модальные диалоговые окна сообщений об ошибках](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_ModalErrorMessageDialogs)|Используйте, когда требуется ответ пользователя, прежде чем продолжать работу.|Не используйте, если нет необходимости блокировать пользователя и прерывать последовательность. Старайтесь не использовать модальные диалоговые окна, если сообщение можно отобразить другим, менее агрессивным способом.|
|[Строка состояния интегрированной среды разработки](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_IDEStatusBar)|Используется при наличии окружающих текстовых сведений о состоянии процесса.|Не используйте отдельно. Лучше использовать в сочетании с другим механизмом обратной связи.|
|[Встроенная информационная панель](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_EmbeddedInfobar)|В окне инструментов или в окне документа используйте для уведомления о ходе выполнения, состоянии ошибки, результатах и (или) данных, которые могут быть получены.|Не используйте, если информация не имеет отношения к расположению, где размещена информационная панель.<br /><br /> Не используйте за пределами окна документа или средства.|
|[Изменения курсора мыши](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_MouseCursorChanges)|Может использоваться для уведомления о том, что процесс выполняется. Также используется для уведомления об изменении состояния мыши, например, когда выполняется перетаскивание или когда курсор мыши находится в определенном режиме, например в режиме рисования.|Не используйте для кратковременных изменений в ходе выполнения или колышущийся курсора (например, если он привязан к частям более длительного процесса, а не ко всему процессу).|
|[Индикаторы хода выполнения](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_NotSysProgressIndicators)|Используется, когда необходимо сообщать о ходе выполнения (как в случае, так и в неопределенном состоянии). Существует множество типов индикаторов выполнения и конкретное использование каждого из них. См. [индикатор выполнения](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_ProgressIndicators).||
|[Окно уведомлений Visual Studio](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_VSNotificationsToolWindow)|Окно уведомлений не является общедоступным для расширения. Однако он используется для обмена сообщениями о Visual Studio, в том числе критических проблем с лицензией и информационными уведомлениями об обновлениях в Visual Studio или пакетах.|Не используйте для других типов уведомлений.|
|[Список ошибок](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_ErrorList)|Если эта неполадка связана непосредственно с открытым решением пользователя с проблемой (ошибка/предупреждение/информация), может потребоваться выполнить действия над кодом.<br /><br /> Это может быть, например:<br /><br /> — Сообщения компилятора (ошибка/предупреждение/информация)<br /><br /> — Анализатор кода/диагностические сообщения о коде<br /><br /> — Сообщения сборки<br /><br /> Может быть уместным для проблем, связанных с файлами проекта или решения, но сначала следует рассмотреть обозреватель решений.|Не используйте для элементов, не имеющих связей с кодом открытого решения пользователя.|
|Уведомления редактора: лампочка|Используйте, если имеется исправление, устраняющее проблему, которая существует в открытом файле.<br /><br /> Обратите внимание, что лампочка также должна использоваться для размещения быстрых действий, выполняемых с кодом пользователя по запросу, например для рефакторинга, но в этом случае не будет отображаться как "стиль уведомления".|Не используйте для элементов, не имеющих связей с открытым файлом.|
|Уведомления редактора: волнистые линии|Используйте, чтобы предупредить пользователя о проблемах с определенным диапазоном открытого кода (например, красной волнистой линией для ошибок).|Не используйте для элементов, которые не связаны с определенным диапазоном открытого кода.|
|[Встроенные строки состояния](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_EmbeddedStatusBars)|Используется для предоставления состояния, связанного с содержимым или процессом, в контексте конкретного окна инструментов, окна документа или диалогового окна.|Не используйте для общих уведомлений о продукте, процессов или элементов, не имеющих связей с содержимым в определенном окне.|
|[Уведомления в области уведомлений Windows](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_WindowsTray)|Используется для отображения уведомлений о внепроцессных процессах или сопутствующих приложениях.|Не используйте для уведомлений, относящихся к интегрированной среде разработки.|
|[Сигнальные уведомления](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_NotificationBubbles)|Используйте для уведомления удаленного процесса или изменения **за пределами** интегрированной среды разработки.|Не используйте в качестве средства уведомления пользователей о процессах **в** интегрированной среде разработки.|

### <a name="notification-methods"></a>Методы уведомления

#### <a name="modal-error-message-dialogs"></a><a name="BKMK_ModalErrorMessageDialogs"></a> Модальные диалоговые окна сообщений об ошибках
 Модальное диалоговое окно сообщения об ошибке используется для вывода сообщения об ошибке, требующего подтверждения или действия пользователя.

 ![Модальное сообщение об ошибке](../../extensibility/ux-guidelines/media/0901-01_modalerrormessage.png "0901 — 01_ModalErrorMessage")

 **Модальное диалоговое окно сообщения об ошибке с предупреждением пользователя о недопустимой строке подключения к базе данных**

#### <a name="ide-status-bar"></a><a name="BKMK_IDEStatusBar"></a> Строка состояния интегрированной среды разработки
 Вероятность того, что пользователи заметят текст строки состояния, соотносятся со всеми возможностями компьютера и конкретным опытом работы с платформой Windows. Клиентская база Visual Studio, как правило, имеет опыт работы в обеих областях, хотя даже опытные пользователи Windows могут пропустить изменения в строке состояния. Таким образом, строка состояния лучше использовать в информационных целях или в качестве избыточной подсказки для информации, представленной в других местах. Любые важные сведения, которые пользователь должен устранить немедленно, должны быть предоставлены в диалоговом окне или в окне инструмента "уведомления".

 Строка состояния Visual Studio предназначена для отображения нескольких типов информации. Она делится на регионы для отзывов, конструктора, индикатора выполнения, анимации и клиента.

 Область отзывов и область конструктора всегда видны. Индикатор выполнения и области анимации всегда являются динамическими и основаны на контексте пользователя. Область конструктора имеет статическую ширину, определяемую длиной строки, извлеченной из сопроводительного ресурса для текстового сообщения. Это позволяет локализации изменять ширину без необходимости изменения кода. Для английского языка ширина этой строки составляет примерно 220 пикселей. Область конструктора будет работать нормально, а область обратной связи будет задействовать оставшееся пространство.

 Строка состояния также выдается цветом для добавления визуального и функционального значения путем обмена различными изменениями состояния интегрированной среды разработки, например, когда интегрированная среда разработки находится в режиме отладки.

 ![Изменения цвета строки состояния интегрированной среды разработки](../../extensibility/ux-guidelines/media/0901-02_idestatusbar.png "0901 — 02_IDEStatusBar")

 **Цвета строки состояния IDE**

#### <a name="embedded-infobar"></a><a name="BKMK_EmbeddedInfobar"></a> Встроенная информационная панель
 Информационную панель можно использовать в верхней части окна документа или окна инструментов для информирования пользователя о состоянии или условии. Он также может предложить команды, чтобы пользователь мог легко предпринять действия. Информационная панель — это стандартный элемент управления оболочки. Старайтесь не создавать собственные, которые будут работать и отображаться несоответствующим другим пользователям в интегрированной среде разработки. Сведения о реализации и рекомендации по использованию см. в разделе [инфобарс](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_Infobars) .

 ![Встроенная информационная панель](../../extensibility/ux-guidelines/media/0901-03_embeddedinfobar.png "0901 — 03_EmbeddedInfobar")

 **Информационная панель, внедренная в окно документа, которая предупреждает пользователя о том, что интегрированная среда разработки находится в режиме отладки с предысторией, и редактор не реагирует так же, как в стандартном режиме отладки.**

#### <a name="mouse-cursor-changes"></a><a name="BKMK_MouseCursorChanges"></a> Изменения курсора мыши
 При изменении курсора мыши используйте цвета, которые привязаны к службе Всколор и уже связаны с курсором. Изменения курсора можно использовать для указания текущей операции, а также для зон попадания, в которых пользователь наводит указатель мыши на целевой объект, который можно перетаскивать, перетаскивать или использовать для выбора объекта.

 Используйте курсор мыши «занято» или «ожидание» только в том случае, если все доступное время ЦП должно быть зарезервировано для операции, не позволяя пользователю выражать дальнейшие входные данные. В большинстве случаев с хорошо написанными приложениями, использующими многопоточность, случаи, когда пользователи не могут выполнять другие операции, должны быть редкими.

 Помните, что изменения курсора полезны в качестве избыточной подсказки для информации, представленной в других местах. Не следует полагаться на изменение курсора как единственный способ взаимодействия с пользователем, особенно при попытке передать что-то важное, которое должен решить пользователь.

#### <a name="progress-indicators"></a><a name="BKMK_NotSysProgressIndicators"></a> Индикаторы хода выполнения
 Индикаторы хода выполнения важны для предоставления отзывов пользователей во время процессов, выполнение которых занимает больше нескольких секунд. Индикаторы хода выполнения могут отображаться на месте (рядом с точкой запуска выполняемого действия), во встроенной строке состояния в модальном диалоговом окне или в строке состояния Visual Studio. Следуйте указаниям в [индикаторах хода выполнения](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_ProgressIndicators) , касающихся их использования и реализации.

#### <a name="visual-studio-notifications-window"></a><a name="BKMK_VSNotificationsToolWindow"></a> Окно уведомлений Visual Studio
 В окне уведомлений Visual Studio разработчики уведомляются о лицензировании, среде (Visual Studio), расширениях и обновлениях. Пользователи могут отклонять отдельные уведомления или игнорировать определенные типы уведомлений. Управление списком игнорируемых уведомлений осуществляется на странице **средства > параметры** .

 Окно уведомлений в настоящее время не расширяемо.

 ![Окно уведомлений Visual Studio](../../extensibility/ux-guidelines/media/0901-06_vsnotificationswindow.png "0901 — 06_VSNotificationsWindow")

 **Окно инструментов уведомлений Visual Studio**

#### <a name="error-list"></a><a name="BKMK_ErrorList"></a> Список ошибок
 Уведомление в списке ошибок указывает на ошибки и предупреждения, произошедшие во время компиляции и процесса сборки, а также позволяет пользователю перемещаться по коду с конкретной ошибкой кода.

 ![Список ошибок](../../extensibility/ux-guidelines/media/0901-08_errorlist.png "0901 — 08_ErrorList")

 **Список ошибок в Visual Studio**

#### <a name="embedded-status-bars"></a><a name="BKMK_EmbeddedStatusBars"></a> Встроенные строки состояния
 Так как строка состояния интегрированной среды разработки является динамической, а контекст области клиента задан как активное окно документа и сведения обновляются в контексте пользователя и (или) системных ответов, трудно поддерживать непрерывное отображение информации или предоставлять состояние для долгосрочных асинхронных процессов. Например, строка состояния интегрированной среды разработки не подходит для уведомлений о результатах тестового запуска для нескольких запусков и (или) немедленных операций выбора элементов. Важно хранить такие сведения о состоянии в контексте документа или окна инструментов, где пользователь выбирает или запускает процесс.

 ![Встроенная строка состояния](../../extensibility/ux-guidelines/media/0901-09_embeddedstatusbar.png "0901 — 09_EmbeddedStatusBar")

 **Встроенная строка состояния в Visual Studio**

#### <a name="windows-tray-notifications"></a><a name="BKMK_WindowsTray"></a> Уведомления в области уведомлений Windows
 Область уведомлений Windows находится рядом с системными часами на панели задач Windows. Многие служебные программы и программные компоненты предоставляют значки в этой области, чтобы пользователь мог получить контекстное меню для задач на уровне системы, таких как изменение разрешения экрана или получение обновлений программного обеспечения.

 Уведомления уровня среды должны отображаться в центре уведомлений Visual Studio, а не в области уведомлений Windows.

#### <a name="notification-bubbles"></a><a name="BKMK_NotificationBubbles"></a> Сигнальные уведомления
 Сигнальные уведомления могут отображаться в виде информационных сообщений в редакторе или конструкторе или в составе области уведомлений Windows. Пользователь воспринимает эти пузырьки как проблемы, которые они могут устранить позже, что является преимуществом для некритических уведомлений. Пузырьки не подходят для критически важных сведений, которые пользователь должен решить сразу. Если вы используете пузырьковые уведомления в Visual Studio, следуйте указаниям в руководстве по работе с [Windows Desktop для получения уведомлений](/windows/desktop/uxguide/mess-notif).

 ![Всплывающее уведомление](../../extensibility/ux-guidelines/media/0901-07_notificationbubbles.png "0901 — 07_NotificationBubbles")

 **Всплывающее уведомление в области уведомлений Windows, используемой для Visual Studio**

## <a name="progress-indicators"></a><a name="BKMK_ProgressIndicators"></a> Индикаторы хода выполнения

### <a name="overview"></a>Обзор
 Индикаторы выполнения являются важной частью системы уведомлений для предоставления отзывов пользователей. Они сообщают пользователю о том, что процессы и операции будут выполнены. В число известных типов индикаторов входят индикаторы выполнения, вращающиеся курсоры и анимированные значки. Тип и размещение индикатора хода выполнения зависит от контекста, в том числе от того, что сообщается, а также от того, как долго будет выполняться процесс или операция.

#### <a name="factors"></a>Факторы
 Чтобы определить, какой тип индикатора подходит, необходимо определить следующие факторы.

1. **Время:** время, в течение которого будет выполняться операция

2. **Модальность:** является ли операция модальной для среды (блокирует пользовательский интерфейс до завершения процесса).

3. **Постоянный/переходный:** следует ли сообщать о результатах выполнения и (или) просматривать их позже

4. Выработка и **неопределенность:** указывает, можно ли вычислить время завершения операции и ход выполнения.

5. **Расположение в графическом или текстовом расположении:** независимо от того, захватывается ли ход выполнения или процесс в тексте сообщения или определенного элемента управления, например элемента управления "дерево".

6. **Близость:** указывает, должен ли ход выполнения находиться близко к интерфейсу пользователя, с которым он связан. (Например, может находиться в строке состояния, которая может быть на самом деле или рядом с кнопкой, которая запускает этот процесс?)

#### <a name="determinate-progress"></a>Выполнение прекращения

|Тип хода выполнения|Когда и как использовать|Примечания|
|-------------------|-------------------------|-----------|
|Индикатор выполнения (завершение)|Ожидаемая длительность >5 секунд.<br /><br /> Может включать текстовое описание сведений о процессе.|**Не** внедрять текст в анимацию.|
|Информационная панель|Обмен сообщениями, связанный с контекстным ИНТЕРФЕЙСом. См. [инфобарс](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_Infobars).<br /><br /> Может включать текстовое описание сведений о процессе.|**Не** используйте несколько инфобарс, если необходимо указать несколько процессов. Вместо этого используйте полосы хода выполнения с накоплением.|
|Окно вывода|Временное уведомление: процесс на уровне приложения, который пользователь хочет **проверить** сведения после завершения.|**Не** используйте, если в дальнейшем пользователю потребуется обращаться к данным.|
|Файл журнала|Связывание с невременным уведомлением в случаях, когда важно **сохранить** сведения после завершения.||
|Строка состояния|Временное уведомление: процесс на уровне приложения, который пользователю **не понадобятся** сведения после завершения.<br /><br /> Включает встроенный индикатор выполнения.<br /><br /> Может включать текстовое описание сведений о процессе.||

#### <a name="indeterminate-progress"></a>Неопределенный ход выполнения

|Тип хода выполнения|Когда и как использовать|Примечания|
|-------------------|-------------------------|-----------|
|Индикатор выполнения (неопределенный)|Ожидаемая длительность >5 секунд.<br /><br /> Может включать текстовое описание сведений о процессе.|**Не** внедрять текст в анимацию.|
|Ants (анимированные горизонтальные точки)|Круговой путь к серверу.<br /><br /> Размещена близкая точка контекста в верхней части родительского контейнера.|**Не** используйте, если он не является родительским для всего контейнера.|
|Счетчик (кольцо выполнения)|Процесс, связанный с контекстным ИНТЕРФЕЙСом, или место, в котором учитывается место.<br /><br /> Может включать текстовое описание сведений о процессе.||
|Информационная панель|Обмен сообщениями, связанный с контекстным ИНТЕРФЕЙСом. См. [инфобарс](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_Infobars).|**Не** используйте несколько инфобарс, если необходимо указать несколько процессов. Вместо этого используйте полосы хода выполнения с накоплением.|
|Окно вывода|Временное уведомление: процесс на уровне приложения, по которому пользователь будет **просматривать** сведения о завершении.|**Не** используйте для информации, которая должна сохраняться в сеансах.|
|Файл журнала|Связывание с невременным уведомлением в случаях, когда важно **сохранить** сведения после завершения.||
|Строка состояния|Временное уведомление: процесс на уровне приложения, который пользователю **не понадобятся** сведения после завершения.<br /><br /> Включает встроенный индикатор выполнения.<br /><br /> Может включать текстовое описание сведений о процессе.||

### <a name="progress-indicator-types"></a>Типы индикаторов выполнения

#### <a name="progress-bars"></a>Индикаторы выполнения

##### <a name="indeterminate"></a>Неопределенному
 ![Неопределенный индикатор выполнения](../../extensibility/ux-guidelines/media/0901-04_indeterminate.png "0901 — 04_Indeterminate")

 **Неопределенный индикатор выполнения**

 "Неопределенное" означает, что общий ход выполнения операции или процесса определить нельзя. Используйте неопределенные индикаторы выполнения для операций, требующих неограниченное количество времени или обращающихся к неизвестному количеству объектов. Используйте текстовое описание, чтобы сопровождаться происходящими событиями. Используйте время ожидания для предоставления границ операциям, основанным на времени. Неопределенные индикаторы выполнения используют анимацию для отображения хода выполнения, но не предоставляют никакой другой информации. Не выбирайте неопределенный индикатор выполнения, основанный только на возможном отсутствии точности.

##### <a name="determinate"></a>Завершение работы
 ![Прервать индикатор выполнения](../../extensibility/ux-guidelines/media/0901-05_determinate.png "0901 — 05_Determinate")

 **Прервать индикатор выполнения**

 "Прервать" означает, что операция или процесс требует ограниченное количество времени, даже если это время не может быть точно предсказуемым. Ясно указывает на завершение. Не отключайте индикатор выполнения до 100%, пока операция не будет завершена. Завершение анимации индикатора выполнения перемещается слева направо от 0 до 100%.

 Никогда не переносите индикатор хода выполнения назад во время операции. Если операция начинается и достигает 100% по завершении, линейка должна двигаться вперед. Точка индикатора выполнения заключается в том, чтобы дать пользователю представление о том, сколько времени занимает вся операция, независимо от того, сколько из них вовлечено.

##### <a name="concurrent-reporting-stacked-progress-bars"></a>Параллельные отчеты (индикаторы выполнения с накоплением)
 Если операция займет длительное время, возможно, несколько минут, то можно использовать два индикатора выполнения, одна из которых показывает общий ход выполнения операции, а другая — для хода выполнения текущего шага. Например, если программа установки копирует много файлов, можно использовать один индикатор выполнения, чтобы указать, сколько времени занимает весь процесс, а вторая может указать, какой процент текущего файла или каталога копируется. Не сообщайте о более чем пяти параллельных операциях или процессах, использующих индикаторы выполнения с накоплением. При наличии более пяти одновременных операций или процессов для отчета используйте модальное диалоговое окно с кнопкой Отмена и сообщите сведения о ходе выполнения окно вывода.

##### <a name="textual-descriptions"></a>Текстовые описания
 Используйте текстовое описание, чтобы прилагаться к происходящим и предполагаемому времени завершения. Если невозможно определить, сколько времени займет операция, лучшим выбором для предоставления обратной связи может быть анимированный значок, а не индикатор выполнения.

 Visual Studio предоставляет стандартный индикатор хода выполнения в строке состояния, который может использоваться любым продуктом, интегрированным в Visual Studio. Для текстового описания того, что происходит во время анимации индикатора выполнения, текст строки состояния может быть обновлен.

#### <a name="other-progress-indicators"></a>Другие индикаторы хода выполнения

##### <a name="ants-animated-horizontal-dots"></a>Ants (анимированные горизонтальные точки)
 ![Анимационный движок выполнения](../../extensibility/ux-guidelines/media/0903-01_ants.png "0903 — 01_Ants")

 «Ants», «анимированные горизонтальные точки», предоставляют визуальную ссылку на неопределенный серверный процесс приема-передачи.

##### <a name="spinner-progress-ring"></a>Счетчик (кольцо выполнения)
 ![Индикатор выполнения](../../extensibility/ux-guidelines/media/0903-02_spinner.png "0903 — 02_Spinner")

 Счетчик (также называемый «кольцом хода выполнения») — это неопределенный индикатор хода выполнения, который в основном используется в связи с контекстным пользовательским интерфейсом. Отображение счетчика в близком отношении к связанному содержимому, например к тексту заголовка категории, сообщения или элементу управления.

##### <a name="cursor-feedback"></a>Обратная связь курсора
 Для операций, которые занимают от 2-7 секунд, укажите обратную связь курсора. Как правило, это означает использование курсора ожидания, предоставляемого операционной системой. Инструкции см. в разделе [свойство курсоров](/dotnet/api/system.windows.input.cursors.wait)в статье MSDN. Wait.

#### <a name="progress-indicator-locations"></a>Расположения индикаторов выполнения

##### <a name="status-bar"></a>Строка состояния
 Строка состояния позволяет приложению размещать сообщения и полезные сведения для пользователя, не прерывая работу пользователя. Как правило, в нижней части окна отображается состояние ход выполнения — область подсказки, которая содержит сообщение об измерении хода выполнения в сочетании с индикатором индикатора выполнения.

 ![Строка состояния с индикатором выполнения](../../extensibility/ux-guidelines/media/0903-03_statusbarprogressbar.png "0903 — 03_StatusBarProgressBar")

 **Строка состояния с индикатором выполнения**

 ![Строка состояния с сообщениями](../../extensibility/ux-guidelines/media/0903-04_statusbarmessage.png "0903 — 04_StatusBarMessage")

 **Строка состояния с текстовым описанием**

##### <a name="infobar"></a>Информационная панель
 Как и в строке состояния, информационная панель предоставляет контекстные уведомления и сообщения, которые также можно связать с неопределенными индикаторами хода выполнения, такими как индикатор выполнения или счетчик. Информационная панель не должна обеспечивать ход выполнения детализированного уровня или признаки хода выполнения. См. [инфобарс](../../extensibility/ux-guidelines/notifications-and-progress-for-visual-studio.md#BKMK_Infobars).

 ![Информационная панель с индикатором выполнения и сообщениями](../../extensibility/ux-guidelines/media/0903-05_infobar.png "0903 — 05_InfoBar")

 **Информационная панель с индикатором выполнения и текстовым описанием**

 ![Информационная панель внутри окна](../../extensibility/ux-guidelines/media/0903-06_infobarinwindow.png "0903 — 06_InfoBarInWindow")

##### <a name="inline"></a>Встроенный
 Индикатор встроенного хода выполнения может быть представлен любыми типами загрузчика хода выполнения. Обычно индикатор хода выполнения сопряжен с обменом сообщениями, но это не является обязательным.

 ![Встроенный индикатор выполнения](../../extensibility/ux-guidelines/media/0903-07_inlinespinner.png "0903 — 07_InlineSpinner")

 **Объединение счетчика с текстовым описанием**

 ![Встроенные упакованные индикаторы выполнения](../../extensibility/ux-guidelines/media/0903-08_inlinestackedprogress.png "0903 — 08_InlineStackedProgress")

 **Разрывать индикаторы выполнения с накоплением**

 ![Встроенная передача сообщений о ходе работы](../../extensibility/ux-guidelines/media/0903-09_inlinetext.png "0903 — 09_InlineText")

 **Обозреватель сервера встроенный текст: обновление...**

##### <a name="tool-windows"></a>Окна инструментов
 Глобальный индикатор хода выполнения представляется неопределенной полосой выполнения, расположенной непосредственно под панелью инструментов.

 ![Глобальный неопределенный индикатор выполнения](../../extensibility/ux-guidelines/media/0903-23_globalindeterminate.png "0903 — 23_GlobalIndeterminate")

 **Team Explorer глобальный неопределенный индикатор хода выполнения**

##### <a name="dialogs"></a>Диалоговые окна
 Диалоговые окна могут содержать любые типы загрузчиков хода выполнения. Индикаторы хода выполнения могут сочетаться с обменом сообщениями, а также вместе с несколькими уровнями индикации хода выполнения для представления детализированных и вложенных процессов.

 ![Диалоговое окно с несколькими типами индикаторов выполнения](../../extensibility/ux-guidelines/media/0903-11_dialog.png "0903 — 11_Dialog")

 **Диалоговое окно Visual Studio с параллельными процессами и несколькими типами индикаторов хода выполнения**

 ![Диалоговое окно с загрузчиком хода выполнения и передачей сообщений](../../extensibility/ux-guidelines/media/0903-12_dialog2.png "0903 — 12_Dialog2")

 **Диалоговое окно Visual Studio с помощью загрузчика хода выполнения и встроенной команды обмена сообщениями**

##### <a name="document-well"></a>Контейнер документа
 В документе может отображаться несколько типов загрузчиков хода выполнения в сочетании с элементами управления.

 ![Передача сообщений о ходе выполнения в документе](../../extensibility/ux-guidelines/media/0903-13_documentwell.png "0903 — 13_DocumentWell")

 **Неопределенный индикатор выполнения под панелью инструментов**

##### <a name="output-window"></a>Окно вывода
 Окно вывода подходит для обработки хода выполнения процесса и текущего состояния хода выполнения через встроенный текстовый обмен сообщениями. Следует использовать строку состояния вместе с отчетами о состоянии окна вывода.

 ![Передача сообщений о ходе выполнения в окне вывода](../../extensibility/ux-guidelines/media/0903-14_outputwindow.png "0903 — 14_OutputWindow")

 **окно вывода с текущим состоянием процесса и сообщениями о ожидании**

## <a name="infobars"></a><a name="BKMK_Infobars"></a> инфобарс

### <a name="overview"></a>Обзор
 Инфобарс Придайте пользователю индикатор близко к своему моменту внимания и использование общего элемента управления информационной панели обеспечивает согласованность внешнего вида и взаимодействия.

 ![Информационная панель](../../extensibility/ux-guidelines/media/0904-01_infobar.png "0904 — 01_Infobar")

 **Инфобарс в Visual Studio**

#### <a name="appropriate-uses-for-an-infobar"></a>Подходящие варианты использования информационной панели

- Предоставление пользователю неблокирующего, но важного сообщения, относящегося к текущему контексту

- Чтобы указать, что пользовательский интерфейс находится в определенном состоянии или условии, который несет некоторые последствия взаимодействия, такие как историческая отладка

- Уведомление пользователя о том, что система обнаружила проблемы, например, когда расширение вызывает проблемы с производительностью

- Предоставление пользователю возможности простого выполнения действий, например, когда редактор обнаруживает, что файл содержит смешанные символы табуляции и пробелы

##### <a name="do"></a>Рекомендуется

- Текст сообщения информационной панели должен быть коротким и в точке.

- Текст для ссылок и кнопок сохраняется в кратком виде.

- Убедитесь, что параметры действия, предоставленные пользователям, минимальны, отображая только необходимые действия.

##### <a name="dont"></a>Не надо:

- Используйте информационную панель для предоставления стандартных команд, которые следует разместить на панели инструментов.

- Используйте информационную панель вместо модального диалогового окна.

- Создание плавающего сообщения за пределами окна.

- Используйте несколько инфобарс в нескольких местах в одном окне.

#### <a name="can-multiple-infobars-show-at-the-same-time"></a>Может ли одновременно отображаться несколько инфобарс?
 Да, несколько инфобарс могут быть показаны одновременно. Они будут отображаться в первом последующем порядке, а Первая информационная панель отобразится в верхней и дополнительной инфобарс, показанной ниже.

 Пользователь увидит не более трех инфобарс за раз, после чего, если доступно больше инфобарс, область информационной панели станет прокручиваемой.

### <a name="creating-an-infobar"></a>Создание информационной панели
 Информационная панель содержит четыре раздела: слева направо.

- **Значок:** Здесь нужно добавить любой значок, который вы хотите отобразить для информационной панели, например значок предупреждения.

- **Текст:** Можно добавить текст, описывающий пользователя сценария или ситуации, а также ссылки внутри текста, если это необходимо. Не забывайте, чтобы текст был кратко сохранен.

- **Действия:** В этом разделе содержатся ссылки и кнопки для действий, которые пользователь может выполнять на информационной панели.

- **Кнопка "Закрыть":** В последнем разделе справа может быть кнопка «Закрыть».

#### <a name="creating-a-standard-infobar-in-managed-code"></a>Создание стандартной информационной панели в управляемом коде
 Класс Инфобармодел можно использовать для создания источника данных для информационной панели. Используйте один из следующих четырех конструкторов:

```
public InfoBarModel(IEnumerable<IVsInfoBarTextSpan> textSpans, ImageMoniker image = default(ImageMoniker), bool isCloseButtonVisible = true);

```

```
public InfoBarModel(string text, ImageMoniker image = default(ImageMoniker), bool isCloseButtonVisible = true);

```

```
public InfoBarModel(IEnumerable<IVsInfoBarTextSpan> textSpans, IEnumerable<IVsInfoBarActionItem> actionItems, ImageMoniker image = default(ImageMoniker), bool isCloseButtonVisible = true);

```

```
public InfoBarModel(string text, IEnumerable<IVsInfoBarActionItem> actionItems, ImageMoniker image = default(ImageMoniker), bool isCloseButtonVisible = true);
```

 Ниже приведен пример, создающий Инфобармодел с текстом с гиперссылкой, кнопкой действия и значком.

 ![Информационная панель с гиперссылкой](../../extensibility/ux-guidelines/media/0904-02_infobarhyperlink.png "0904 — 02_InfobarHyperlink")

```
var infoBar = new InfoBarModel(
    textSpans: new[]
    {
        new InfoBarTextSpan("This is a "),
        new InfoBarHyperlink("hyperlink"),
        new InfoBarTextSpan(" InfoBar.")
    },
    actionItems: new[]
    {
        new InfoBarButton("Click Me")
    },
    image: KnownMonikers.StatusInformation,
    isCloseButtonVisible: true);

```

#### <a name="creating-a-standard-infobar-in-native-code"></a>Создание стандартной информационной панели в машинном коде
 Реализуйте интерфейс Ивсинфобар, чтобы предоставить информационную панель из машинного кода.

```
public interface IVsInfoBar
{
    IVsInfoBarActionItemCollection ActionItems { get; }
    ImageMoniker Image { get; }
    bool IsCloseButtonVisible { get; }
    IVsInfoBarTextSpanCollection TextSpans { get; }
}

```

#### <a name="getting-an-infobar-uielement-from-an-infobar"></a>Получение интерфейса UIElement информационной панели из информационной панели
 Реализация Инфобармодел или Ивсинфобар — это модели данных, которые должны быть включены в интерфейс UIElement, чтобы их можно было отобразить в UI. UIElement можно получить с помощью службы SVsInfoBarUIFactory/Ивсинфобаруифактори.

```
private bool TryCreateInfoBarUI(IVsInfoBar infoBar, out IVsInfoBarUIElement uiElement)
{
    IVsInfoBarUIFactory infoBarUIFactory = serviceProvider.GetService(typeof(SVsInfoBarUIFactory)) as IVsInfoBarUIFactory;
    if (infoBarUIFactory == null)
    {
        uiElement = null;
        return false;
    }

    uiElement = infoBarUIFactory.CreateInfoBar(infoBar);
    return uiElement != null;
}
```

### <a name="placement"></a>Размещение
 Инфобарс можно отобразить в одном или нескольких следующих расположениях:

- Окна инструментов

- На вкладке документа

> [!IMPORTANT]
> Можно разместить информационную панель, чтобы дать сообщение о глобальном контексте. Это будет отображаться между панелями инструментов и документом. Это не рекомендуется, так как оно вызывает проблемы с "переходом и запоздалые" интегрированной среды разработки и следует избегать, если не требуется совершенно необходимая и соответствующая требованиям.

#### <a name="placing-an-infobar-in-a-toolwindowpane"></a>Размещение информационной панели в ToolWindowPane
 Метод ToolWindowPane. Аддинфобар (Ивсинфобар) можно использовать для добавления информационной панели в окно инструментов. Этот API может либо добавить Ивсинфобар (из которого Инфобармодел является реализацией по умолчанию), либо IVsUIElement.

#### <a name="placing-an-infobar-in-a-document-or-non-toolwindowpane"></a>Размещение информационной панели в документе или не ToolWindowPane
 Чтобы поместить информационную панель в любой сбой IVsWindowFrame, используйте свойство VSFPROPID_InfoBarHost, чтобы получить Ивсинфобархост для рамки, а затем добавьте элемент UIElement информационной панели.

```
private void AddInfoBar(IVsWindowFrame frame, IVsUIElement uiElement)
{
    IVsInfoBarHost infoBarHost;
    if (TryGetInfoBarHost(frame, out infoBarHost))
    {
        infoBarHost.AddInfoBar(uiElement);
    }
}
private bool TryGetInfoBarHost(IVsWindowFrame frame, out IVsInfoBarHost infoBarHost)
{
    object infoBarHostObj;
    if (ErrorHandler.Failed(frame.GetProperty((int)__VSFPROPID7.VSFPROPID_InfoBarHost, out infoBarHostObj)))
    {
        infoBarHost = null;
        return false;
    }

    infoBarHost = infoBarHostObj as IVsInfoBarHost;
    return infoBarHost != null;
}

```

#### <a name="placing-an-infobar-in-the-main-window"></a>Размещение информационной панели в главном окне
 Чтобы поместить информационную панель в главное окно, используйте VSSPROPID_MainWindowInfoBarHost службы IVsShell, чтобы получить Ивсинфобархост главного окна, а затем добавьте в нее элемент UIElement информационной панели.

### <a name="will-i-know-when-the-user-takes-action-in-my-infobar"></a>Будет ли я узнать, когда пользователь примет действие на информационной панели?
 Да, все действия события будут возвращены автору информационной панели. После этого он перемещается к автору информационной панели для выполнения действий в интегрированной среде разработки на основе выбора пользователя на информационной панели. Инфобарс будет автоматически удалено с узла, на котором была нажата кнопка "Закрыть", но требуется дополнительная работа, если после закрытия необходимо удалить другие инфобарс. Кроме того, необходимо регистрировать данные телеметрии независимо от каждой информационной панели.

#### <a name="receiving-infobar-events-in-a-toolwindowpane"></a>Получение событий информационной панели в ToolWindowPane
 ToolWindowPane имеет два события для инфобарс. Событие Инфобарклосед возникает при закрытии информационной панели в ToolWindowPane. Событие Инфобарактионитемкликкед возникает при щелчке по гиперссылке или кнопке внутри информационной панели.

#### <a name="receiving-infobar-events-directly-from-the-uielement"></a>Получение событий информационной панели непосредственно из UIElement
 Ивсинфобаруиелемент. Advise можно использовать для подписки на события непосредственно из UIElement на информационной панели. Реализация Ивсинфобаруиевентс позволит автору получить события закрытия и нажатия кнопки.

```
public interface IVsInfoBarUIEvents
{
    void OnActionItemClicked(IVsInfoBarUIElement infoBarUIElement, IVsInfoBarActionItem actionItem);
    void OnClosed(IVsInfoBarUIElement infoBarUIElement);
}

```

## <a name="error-validation"></a><a name="BKMK_ErrorValidation"></a> Проверка ошибок
 Когда пользователь вводит неприемлемые данные, например при пропуске обязательного поля или при вводе данных в неправильном формате, лучше использовать проверку элемента управления или обратную связь рядом с элементом управления вместо всплывающего диалогового окна ошибки.

### <a name="field-validation"></a>Проверка значений полей
 Проверка форм и полей состоит из трех компонентов: элемента управления, значка и подсказки. Хотя это можно сделать с помощью нескольких типов элементов управления, в качестве примера будет использоваться текстовое поле.

 ![Проверка поля &#40;пуст&#41;](../../extensibility/ux-guidelines/media/0905-01_fieldvalidation.png "0905 — 01_FieldValidation")

 Если поле является обязательным, необходимо указать текст водяного знака, **\<Required>** а фон поля должен быть светло-желтым (всколор: `Environment.ControlEditRequiredBackground` ), а передний план — серым (всколор: `Environment.ControlEditRequiredHintText` ):

 ![Проверка полей с меткой "Обязательно для заполнения"](../../extensibility/ux-guidelines/media/0905-02_fieldvalidationrequired.png "0905 — 02_FieldValidationRequired")

 Программа может определить, что элемент управления находится в состоянии *недопустимого содержимого, введенного* при перемещении фокуса на другой элемент управления или при нажатии пользователем кнопки фиксации [ОК] или при сохранении документа или формы пользователем.

 Когда определяется недопустимое состояние содержимого, значок появляется либо внутри элемента управления, либо непосредственно рядом с ним. Всплывающая подсказка, описывающая ошибку, должна отображаться при наведении указателя мыши на значок или элемент управления. Кроме того, вокруг элемента управления, который создает недопустимое состояние, должна появиться граница с 1 пикселем.

 ![Характеристика схемы проверки полей](../../extensibility/ux-guidelines/media/0905-03_layoutspecs.png "0905 — 03_LayoutSpecs")

 **Спецификации макета для проверки полей**

#### <a name="acceptable-variations-for-icon-location"></a>Приемлемые варианты расположения значков
 Существует множество уникальных случаев, в которых пользователям необходимо знать об ошибках проверки. Учитывая тип элемента управления и конфигурацию пользовательского интерфейса, выберите значок, соответствующий вашей ситуации.

 ![Допустимое расположение значка](../../extensibility/ux-guidelines/media/0905-04_iconlocation.png "0905 — 04_IconLocation")

 **Приемлемые варианты для расположений значков проверки полей**

#### <a name="validation-requiring-a-round-trip-to-a-server-or-network-connection"></a>Проверка, запрашивающая обмен данными с сервером или сетевым подключением
 В некоторых случаях для проверки содержимого требуется круговое обращение к серверу, и было бы важно отображать ход выполнения, проверку и состояние ошибок пользователя. На рисунке ниже показан пример такого случая и рекомендуемый пользовательский интерфейс.

 ![Проверка, включающая двустороннюю передачу сигналов на сервер и обратно](../../extensibility/ux-guidelines/media/0905-05_roundtrip.png "0905 — 05_RoundTrip")

 **Проверка, включающая двустороннюю передачу сигналов на сервер и обратно**

 Обратите внимание, что необходимо предоставить достаточно свободного места справа от элемента управления, чтобы обеспечить соответствие "проверке..." и "повторить" текст.

#### <a name="in-place-warning-text"></a>Текст предупреждения на месте
 Если имеется доступное место для размещения сообщения об ошибке близко к элементу управления в состоянии ошибки, рекомендуется использовать только подсказку.

 ![Предупреждение в&#45;месте](../../extensibility/ux-guidelines/media/0905-06_inplacewarning.png "0905 — 06_InPlaceWarning")

 **Текст предупреждения на месте**

#### <a name="watermarks"></a>Водяные знаки
 Иногда весь элемент управления или окно находится в состоянии ошибки. В этом случае для указания ошибки используйте водяной знак.

 ![Водяной знак](../../extensibility/ux-guidelines/media/0905-07_watermark.png "0905 — 07_Watermark")

 **Проверка поля водяного знака**
