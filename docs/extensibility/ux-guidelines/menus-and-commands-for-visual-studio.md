---
title: Меню и команды для Visual Studio | Документация Майкрософт
description: Сведения о том, как панели команд обеспечивают гибкость пользовательского интерфейса при создании новых функций для Visual Studio.
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 0a1ed675-2bd1-4603-ba3a-f40dfb5cfb69
author: acangialosi
ms.author: anthc
manager: jmartens
ms.workload:
- vssdk
ms.openlocfilehash: d28242b70c0c9808cc7eb066341cd2973d2372a2
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99971587"
---
# <a name="menus-and-commands-for-visual-studio"></a>Меню и команды для Visual Studio
## <a name="command-usage"></a>Использование команды

### <a name="overview"></a>Обзор
 В отличие от Microsoft Office, которая состоит из множества отдельных продуктов, Visual Studio содержит множество продуктов, которые каждый из них вносят свои наборы команд в глобальную интегрированную среду разработки Visual Studio. Интегрированная среда разработки управляет сложными тысячами команд путем фильтрации функциональных возможностей, доступных пользователю в зависимости от контекста.

 При изменении контекста пользователя, например при переключении из окна конструктора в окно редактирования кода, функции, не связанные с новым контекстом, исчезают. В то же время новые функциональные возможности помещаются вместе со связанными динамическими сведениями, такими как свойства и параметры панели элементов. Пользователь не должен заметить замену набора доступных команд. Если пользователь отвлекается от команды, которые появляются или отменяют, то для разработки пользовательского интерфейса требуется корректировка. Текущий контекст пользователя всегда указывается одним или несколькими способами, например в заголовке окна интегрированной среды разработки, в окно свойств или в диалоговом окне страницы свойств.

 Панели команд обеспечивают гибкость в пользовательском интерфейсе. Единственная структура команд, присущая среде Visual Studio, является главным меню и основной панелью команд, которую можно настроить и даже скрыть. Другие панели команд отображаются и исчезают в зависимости от состояния приложения. Окна инструментов и редакторы документов также могут содержать встроенные панели инструментов в границах окна.

#### <a name="basic-guidelines"></a>Основные рекомендации

##### <a name="use-existing-shared-commands-command-groups-and-menus-whenever-possible"></a>При возможности используйте существующие общие команды, группы команд и меню.
 Поскольку команды обычно отображаются на основе контекста, использование существующих общих меню и групп команд гарантирует, что структура команд остается относительно стабильной между изменениями в контексте. Повторное использование общих команд и размещение новых команд, близких к связанным общим командам, приводит к снижению сложности интегрированной среды разработки и созданию более понятного интерфейса пользователя. Если необходимо определить новую команду, попытайтесь поместить ее в существующую общую группу команд. Если необходимо определить новую группу, поместите ее в существующее общее меню, близкое к связанной группе команд, перед созданием нового меню верхнего уровня.

##### <a name="do-not-create-icons-for-every-command"></a>Не создавайте значки для каждой команды.
 Прежде чем создавать значок команды, подумайте внимательно. Значки должны создаваться только для команд, которые:

- отображается на панели инструментов по умолчанию.

- , скорее всего, будут добавляться пользователями на панель инструментов с помощью диалогового окна **Настройка...** .

- наличие значка, связанного с тем же действием в другом продукте Майкрософт.

##### <a name="limit-the-addition-of-keyboard-shortcuts"></a>Ограничить Добавление сочетаний клавиш
 Подавляющее большинство пользователей использует небольшую часть всех доступных сочетаний клавиш. Если вы сомневаетесь, не привяжите функцию к сочетанию клавиш. Перед добавлением новых ярлыков обратитесь к группе взаимодействия с пользователем.

##### <a name="give-commands-a-default-menu-placement"></a>Присвойте командам размещение меню по умолчанию.
 Имейте в виду, что команды будут настраиваться другими пользователями и разрабатывать их соответствующим образом. Нет ничего вроде скрытой команды. Все команды Visual Studio отображаются в диалоговом окне " **сервис > Настройка** ", окне командной строки, автозавершения, **средств > параметров >** диалоговом окне "клавиатура" и "среда средств разработки" (DTE). Обязательно присвойте командам имя и подсказку в файле. CTC, чтобы пользователи могли легко находить их.

##### <a name="do-not-duplicate-shared-commands-on-an-embedded-toolbar"></a>Не повторяйте общие команды на внедренной панели инструментов.
 Удобно размещать команды в близком к области фокусе пользователя. Одним из способов сделать это является создание встроенной панели инструментов в верхней части окна инструментов или редактора документов. Команды, размещенные на панели инструментов, должны быть специфичны для области содержимого в пределах окна. Не повторяйте общие команды на этих панелях инструментов. Например, никогда не размещайте значок "Сохранить" во встроенной панели инструментов.

### <a name="content-and-command-visibility"></a>Видимость содержимого и команд
 Команды существуют в следующих областях: **Среда**, **Иерархия** и **документ**. Чтобы иметь уверенность в размещении команд, необходимо иметь представление о каждой области.

 Команды в области **среды** устанавливают основной контекст и совместно используются несколькими контекстами. Они изменяют видимость или расположение документов и окон инструментов. Между командами в области среды находятся **новые проекты**, **Подключение к серверу**, **присоединение процесса**, **вырезание**, **копирование**, **Вставка**, **Поиск**, **Параметры**, **Настройка**, **новое окно** и **Справка**.

 Команды в области **иерархии** управляют иерархиями в Visual Studio, включая **проект**, **команду** и **данные**. Они связаны с подконтекстом проекта, например **Отладка**, **Сборка**, **тестирование**, **архитектура** или **анализ**. Между командами в области иерархии: **Добавить новый элемент**, **новый запрос**, **Параметры проекта**, **Добавить новый источник данных**, **запустить мастер производительности** и **создать диаграмму**.

 Команды в области **документа** ведут себя над содержимым документа, например кодом, конструкцией или запросом рабочего элемента (WIQ). Они также работают с представлением окна инструментов или в других случаях для этого окна инструментов. Команды области документа также работают с объектами файлов, которые сами являются специфичными для иерархии, например для **удаления из проекта**. Между командами в области документа выполняется **рефакторинг > переименование**, **Создание копии рабочего элемента**, **Развернуть все**, **Свернуть все** и **создать задачу пользователя**.

### <a name="command-placement-decisions"></a>Принятие решений о размещении команд
 После того как вы решили создать команду, необходимо определить ее расположение и создать сочетание клавиш. Следуйте этому пути принятия решений, чтобы определить место размещения команды:

 ![Диаграмма решения размещения команды](../../extensibility/ux-guidelines/media/0501-a_commandplacement.png "0501 — a_CommandPlacement")

 **Путь принятия решений для размещения команд в Visual Studio**

### <a name="command-placement-in-menus"></a>Размещение команд в меню

#### <a name="main-menu-bar"></a>Строка главного меню
 Главная строка меню должна быть стандартным расположением для команд любого контекстного меню, предназначенного для конкретного контекста, которые вносят вклад в пользовательский интерфейс. Главная строка меню отличается от других структур команд в том, что среда использует ее для управления видимыми командами. Все остальные панели команд просто отключают команды, находящиеся вне контекста, независимо от того, размещены ли они в меню или на панели инструментов.

 Среда определяет набор команд, встроенных в главную строку меню, которые являются общими для всей среды IDE и нескольких доменов задач. Эти команды всегда видны независимо от того, какие пакеты VSPackage загружены в среду. Несмотря на то, что пакеты VSPackage могут расширять этот набор команд, каждая команда отвечает за набор команд из каждого продукта и размещение их команд.

 Структуру главного меню Visual Studio можно разделить на следующие категории меню:

##### <a name="core-menus"></a>Основные меню

- Файл

- Изменить

- Представление

- Инструменты

- Окно

- Справка

##### <a name="project-specific-menus"></a>Меню для конкретного проекта

- Project

- Сборка

- Отладка

##### <a name="context-specific-menus"></a>Контекстные меню

- Группа

- Данные

- Тест

- Architecture

- Анализ

##### <a name="document-specific-menus"></a>Меню для конкретного документа

- Формат

- Таблица

##### <a name="when-designing-main-menus-adhere-to-these-rules"></a>При проектировании основных меню придерживайтесь следующих правил:

- Не превышать 25 элементов верхнего уровня в заданном контексте

- Размер меню не должен превышать 600 пикселей в высоту.

- Оцените главное меню в нескольких контекстах, например в окончательном номере SKU и общем профиле.

- Всплывающие меню приемлемы.

- Всплывающие меню должны содержать по крайней мере три элемента и не более семи.

- Всплывающие меню должны поступать только на один уровень глубокий — некоторые элементы меню Visual Studio имеют каскадные подменю, но этот шаблон не рекомендуется.

- Используйте не более шести разделителей. Группирование должно соответствовать следующему рисунку:

     ![Рекомендации по группированию главного меню](../../extensibility/ux-guidelines/media/0501-b_mainmenus.png "0501 — b_MainMenus")

- Хотя на рисунке не обязательно должны быть сгруппированы, добавление дополнительных группирований ограничено.

- Каждая группировка должна иметь от двух до семи пунктов меню.

#### <a name="main-menu-ordering"></a>Порядок главного меню
 Прежде чем добавлять новый элемент верхнего уровня, Попробуйте поместить команду в существующее меню верхнего уровня. При добавлении нового меню верхнего уровня обязательно поместите его в нужное место. Определите, относится ли меню к проекту, контексту или документу. Не заключайте имя меню верхнего уровня в сокращенное и используйте только одно слово.

 Основные меню должны Букенд остальные команды. Файл, Правка и представление всегда должны быть слева, а инструменты, окно и Справка всегда должны быть справа.

#### <a name="context-menus"></a>Контекстные меню
 Помещение слишком большого количества функциональных возможностей в контекстные меню приведет к сложному изучению интерфейса. Все основные функции должны быть доступны в главной строке меню. Размещение команд следует согласовать с существующими командами, чтобы избежать дублирования команд. Для контекстных меню оболочка определяет стандартные группы меню, которые должны быть включены в зависимости от того, предназначено ли контекстное меню для решения, узла проекта или элемента проекта.

 При проектировании контекстных меню придерживайтесь тех же правил, что и для главного меню, а также:

- Не более 25 пунктов меню верхнего уровня.

- Всплывающие меню приемлемы, но не должны превышать один уровень в глубину никогда не использовать каскадные всплывающие окна.

- Используйте не более шести разделителей.

### <a name="command-placement-in-toolbars"></a>Размещение команд на панелях инструментов

#### <a name="general-toolbars"></a>Общие панели инструментов
 При проектировании и упорядочении панелей инструментов необходимо соблюдать следующие стандарты.

- Не используйте более одной команды для каждой кнопки. Одна кнопка = одно действие.

- Используйте текст вместе с значком только в том случае, если его нужно заменять меткой.

- Используйте поле со списком исключительно для свойств, которые будут переключаться несколько раз в одном сеансе. В противном случае предоставьте свойство в другом расположении.

- Ширина поля со списком должна быть равна ширине самого длинного элемента в ячейке + 30%. Например, если наибольший размер элемента составляет 200 пикселей, поле со списком должно иметь значение 260 пикселей в ширину.

- Ограничьте использование разделителей. Использование разделителя рядом с раскрывающимся списком является антишаблоном, поскольку форма самого раскрывающегося списка выступает в качестве визуального разделителя.

- Группы значков должны содержать от трех до шести значков.

- Если квалификаторы приводят к нескольким полезным командам, используйте разворачивающуюся кнопку, в которой хранится Последнее значение:

     ![Разбивка кнопок в Visual Studio](../../extensibility/ux-guidelines/media/0501-c_splitbuttons.png "0501 — c_SplitButtons")

     **Пример разворачивающейся кнопки. Шесть команд в левой части могут помещаться в одну кнопку.**

#### <a name="product-specific-toolbars"></a>Панели инструментов для конкретного продукта
 Каждый продукт может предоставить панель инструментов по умолчанию, которая содержит часто используемые и важные команды, а панель инструментов по умолчанию для каждого продукта должна появиться при первом запуске Visual Studio после установки продукта.

 Продукты также должны использовать общие группы команд и меню, предоставляемые интегрированной средой разработки. Каждая Общая Командная группа помещается в общее меню, предназначенное для упорядочения связанных команд в понятном для пользователя виде. Для снижения сложности важно использовать эту общую структуру команд.

#### <a name="global-toolbars"></a>Глобальные панели инструментов
 Глобальные панели инструментов должны помещаться в одной строке прямо из поля. При создании новой глобальной панели инструментов следуйте указаниям для этого типа панели инструментов.

 **Общие рекомендации по панели инструментов:**

- Каждая панель инструментов имеет 24 пиксела в общих элементах управления (захват, переполнение).

- Каждая кнопка панели инструментов имеет ширину 22 пикселя, включая заполнение. При нажатии значка разворачивающаяся кнопка добавляется еще две 11 пикселя ширины.

- Допускается дублирование команд на панелях инструментов.

  **Панели инструментов, относящиеся к документу** , отображаются, когда определенный тип файла является активным и исчезает при активации другого типа файлов.

- На панелях инструментов, относящихся к документу, может быть не более 12 кнопок.

- Общая ширина панели инструментов не может превышать 300 пикселей.

- Каждый тип файла может иметь либо одну встроенную панель инструментов, либо одну глобальную панель инструментов для конкретного документа, но не обе.

  **Контекстные панели инструментов** появляются, когда задан определенный контекст и обычно остаются активными для продолжительных периодов.

- Ограничение на количество кнопок для всех панелей инструментов, зависящих от контекста, равно 18.

- Если большинство пользователей не будут постоянно применять команды этой панели инструментов, когда контекст активен, не связывайте эту панель инструментов с контекстом.

- Убедитесь, что панель инструментов исчезает при выходе из контекста. Ни одна из этих панелей инструментов не должна отображаться при запуске.

  **Панели инструментов без контекста** никогда не отображаются автоматически. Они отображаются, только когда пользователь активирует их. Используйте максимальную ширину ниже 200 пикселей.

### <a name="general-organization-and-shell-defined-groups"></a>Общая организация и группы, определяемые оболочкой
 Используйте существующие общие команды, группы команд и меню. Если необходимо определить новую команду, попытайтесь поместить ее в существующую общую группу команд. Если необходимо определить новую группу, попытайтесь поместить ее в существующее общее меню, близкое к связанной группе команд, перед созданием нового меню верхнего уровня. Это сокращает сложность команды, обеспечивая единообразное размещение команд в интегрированной среде разработки.

 Меню общего **формата** , обычно отображаемое в контексте окон документов в стиле конструктора, показано на следующем рисунке:

 ![Меню формата Visual Studio с выносками](../../extensibility/ux-guidelines/media/0501-d_formatmenu.png "0501 — d_FormatMenu")

 **Группы меню в Visual Studio**

### <a name="reducing-and-reusing-commands"></a>Сокращение и повторное использование команд
 Команды обычно отображаются на основе контекста, чтобы сократить количество команд, отображаемых пользователем в любое заданное время. Однако следует также повторно использовать существующие общие меню и группы команд, чтобы структура команд оставалась относительно стабильной между изменениями в контексте.

 Повторное использование общих команд и размещение новых команд, близких к связанным общим командам, сокращает сложность интегрированной среды разработки и упрощает взаимодействие с пользователем.

## <a name="naming-commands"></a>Команды именования

### <a name="naming-conventions"></a>Соглашения об именах
 Единообразное именование команд является критически важным, чтобы пользователи могли находить и выполнять команды либо с помощью командной строки, либо путем привязки к сочетанию клавиш. Имена команд также помогают пользователю понять, какое назначение команда выполняет, когда она отображается на панели инструментов или в каскадном или в контекстном меню.

#### <a name="when-naming-commands"></a>При именовании команд:

- Создайте текст, чтобы его можно было легко локализовать. Дополнительные сведения о локализации текста см. в статье рекомендации по [локализации](/dotnet/standard/globalization-localization/best-practices-for-developing-world-ready-apps#localization-best-practices).

- Быть кратким. Команды должны использовать не более трех слов.

- Использовать прописные и строчные буквы: первая буква каждого слова должна быть прописной. Дополнительные сведения о форматировании текста в Visual Studio см. в разделе [стиль текста](../../extensibility/ux-guidelines/fonts-and-formatting-for-visual-studio.md#BKMK_TextStyle).

- Примите во внимание место, куда будет помещена команда. Он находится в меню верхнего уровня или в виде всплывающего окна? Например, при группировании команд выравнивания во всплывающем окне Команда верхнего уровня должна иметь значение "Выровнять", а команды всплывающего меню должны быть "Left", "Right", "Center", "выравнивать" и т. д. Оно будет избыточным для наименования команд всплывающего меню «выровняйте влево» или «выровняйте вправо».

     ![Меню формата Visual Studio](../../extensibility/ux-guidelines/media/0502-a_formatmenu.png "0502 — a_FormatMenu")

### <a name="using-icons-with-commands"></a>Использование значков с командами
 Используйте связывание значков с командами. Несмотря на то, что связывание уникального образа с командой хастенс возможности пользователя по определению этой команды, визуальная некоторая и неэффективность возникает при чрезмерном увеличении изображения. При принятии решения о создании значка команды можно выбрать следующие правила.

#### <a name="use-an-icon-with-a-command-only-if"></a>Используйте значок с командой только в том случае, если:

- С одной и той же командой связан значок в другом выразительном продукте Майкрософт, например в одном из Microsoft Office приложений.

- Команда будет помещена на панель инструментов по умолчанию.

- Команда является специализированной командой, которую пользователи, скорее всего, добавляют на панель инструментов с помощью диалогового окна **"Настройка..."** .

## <a name="access-and-shortcut-keys"></a>Доступ и сочетания клавиш

### <a name="overview"></a>Обзор
 Существует два вида назначений клавиш клавиатуры:

- **Ключи доступа** (также известные как ускорители) позволяют осуществлять доступ с клавиатуры через меню для команд и для каждой метки в пользовательском интерфейсе диалогового окна. Ключи доступа в основном предназначены для специальных возможностей, назначенных всем меню и большинству элементов управления диалогового окна, которые не предназначены для запоминания, влияют только на текущее окно и локализуются.

- **Сочетания клавиш** в основном используют последовательности ключей Control (Ctrl) и Function (FN). Они разработаны для опытных пользователей и помогают повысить производительность. Они назначаются только наиболее часто используемым командам и обеспечивают быстрый доступ во время обхода главного меню. Эти сочетания клавиш предназначены для запоминания, и по этой причине их следует назначать в соответствии со схемой профиля. Схемы сочетаний клавиш могут отличаться от профиля к профилю. Пользователь может настраивать сочетания клавиш с помощью **средств > параметры > клавиатуры**.

### <a name="assigning-access-keys"></a>Назначение ключей доступа
 Ключи доступа состоят из Alt + алфавитно-цифровых ключей. Назначение ключа доступа каждому элементу меню без исключения. Используйте Windows и общие соглашения для назначения ключей доступа. Например, ключ доступа для **File > New** всегда должен быть **ALT, F, N**.

 Не используйте однопиксельные буквы, например "i" (в верхнем или нижнем регистре) или строчную букву "l", и старайтесь не использовать символы с нижними выносными элементами (g, j, p, q и y), так как они трудно различать.

 По возможности старайтесь не использовать дублированные ключи. В случаях, когда дублирование недоступно, система меню обрабатывает конфликты, переполняя все команды, использующие этот ключ. Например, для гипотетической команды "Number" в меню "файл", которая дублирует ключ доступа "N", **ALT, f, n** создаст новый файл, а **ALT, f, n, n** выполнит команду "Number".

### <a name="assigning-shortcut-keys"></a>Назначение сочетаний клавиш
 Не следует назначать новые сочетания клавиш, так как они не являются обязательными для каждой команды и налог на систему (и память пользователя), если они используются. Данные из программа улучшения качества программного обеспечения (CEIP) показывают, что пользователи Visual Studio используют только небольшое подмножество встроенных сочетаний клавиш.

 При определении сочетаний клавиш следуйте приведенным ниже правилам.

- **Используйте последовательности ключей Control (Ctrl) и Function (FN).**

- **Сохранять часто используемые сочетания клавиш.** Сохраняйте самые популярные ярлыки.

- **Упрощение ввода сочетаний клавиш редактора.** Привяжите удобные к типу сочетания клавиш для команд, которые требуются большинству разработчиков при написании кода. Например, **Edit. инвокесмарттаг** должен иметь быстрый ярлык, например CTRL +/, а не Alt + Shift + F10.

- **Стремитесь к согласованным тематическим сочетаниям клавиш.**

- **Следуйте рекомендациям Windows, чтобы определить, какие ключи модификатора следует использовать.** Сочетания клавиш CTRL используются для команд, имеющих крупномасштабные эффекты, такие как команды, применяемые ко всему документу. Используйте сочетания клавиш Shift для команд, расширяющих или дополняющих действия стандартной сочетания клавиш. Не используйте сочетание клавиш CTRL + ALT.

- **Удалите лишние ярлыки.** Если у вас есть устаревшая функция, попробуйте удалить ярлыки, используемые с экстремальной нечастотой (менее 10 раз из данных CEIP), или умеренной нечастотной (менее 100 раз из данных CEIP), если ключ доступа обеспечивает быстрый доступ к одной и той же команде. Например: Alt, H, C откроет справку или содержимое.

  Нет простого способа проверить доступность ярлыка. Если вы хотите добавить ярлык, выполните следующие действия.

1. Проверьте список [сочетаний клавиш Visual Studio 2013](http://visualstudioshortcuts.com/2013/) , чтобы определить, есть ли аналогичные команды для группирования.

2. Последовательно выберите **пункты сервис > параметры > среда > клавиатура** и проверьте ярлык. Проверьте каждую схему назначений клавиш, указанную в разделе "применить следующую дополнительную схему назначений клавиш". Проверьте общие папки, профили C#, VB и C++, так как они имеют уникальные сочетания клавиш. Ярлык доступен, если он не сопоставлен ни в одном из этих мест.
