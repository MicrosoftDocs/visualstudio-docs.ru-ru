---
title: Проектирование модели подключения к бизнес-данным | Документация Майкрософт
description: Проектирование модели подключения к бизнес-данным (BDC). Добавьте сущности и методы. Определите параметры метода. Добавьте дескрипторы фильтра. Проверьте модель BDC.
ms.custom: SEO-VS-2020
ms.date: 02/02/2017
ms.topic: conceptual
dev_langs:
- VB
- CSharp
helpviewer_keywords:
- BDC [SharePoint development in Visual Studio], designing a model
- Business Data Connectivity service [SharePoint development in Visual Studio], designing a model
author: John-Hart
ms.author: johnhart
manager: jmartens
ms.workload:
- office
ms.openlocfilehash: 8fb1aa194688533855b7c5bd1d58a4e3b97ac749
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99948847"
---
# <a name="design-a-business-data-connectivity-model"></a>Проектирование модели подключения к бизнес-данным
  Вы можете разработать модель для службы подключения к бизнес-данным (BDC), добавив сущности и методы в файл модели. Сущность описывает коллекцию полей данных. Например, сущность может представлять таблицу в базе данных. Метод выполняет такие задачи, как добавление, удаление или обновление данных, представленных сущностями. Дополнительные сведения см. [в статье интеграция бизнес-данных в SharePoint](../sharepoint/integrating-business-data-into-sharepoint.md).

## <a name="add-entities"></a>Добавление сущностей
 Сущность можно добавить, перетащив или скопировав **сущность** из **панели элементов** Visual Studio в конструктор BDC. Дополнительные сведения см. [в разделе инструкции. Добавление сущности в модель](../sharepoint/how-to-add-an-entity-to-a-model.md).

 Определите поля сущности в классе. Например, можно добавить поле с именем `Address` в `Customer` класс. Можно либо добавить новый класс в проект, либо использовать существующий класс, созданный с помощью других средств, таких как реляционный конструктор объектов (реляционный конструктор R). Имя сущности и имя класса, представляющего сущность, не должны совпадать. Класс связывается с сущностью при определении методов в модели.

## <a name="add-methods"></a>Добавить методы
 Служба BDC вызывает методы в модели, когда пользователи просматривают, добавляют, обновляют или удаляют информацию в списке или веб-части, основанной на вашей модели. В модель необходимо добавить метод для каждой задачи, которую может выполнять пользователь. Создайте методы, выбрав любой из пяти основных типов методов из окна **сведения о методе BDC** . В следующей таблице описаны пять основных методов модели BDC.

|Метод|Описание|
|------------|-----------------|
|Finder|Возвращает коллекцию экземпляров сущности. Вызывается, когда пользователь открывает список или веб-часть. Дополнительные сведения см. [в разделе инструкции. Добавление метода поиска](../sharepoint/how-to-add-a-finder-method.md).|
|Конкретный поиск|Возвращает конкретный экземпляр сущности. Вызывается, когда пользователь просматривает сведения о конкретном элементе в списке. Дополнительные сведения см. [в разделе инструкции. Добавление конкретного метода поиска](../sharepoint/how-to-add-a-specific-finder-method.md).|
|Автор|Добавляет новые данные в источник данных сущности. Вызывается, когда пользователь наберет кнопку " **создать элемент** " на ленте списка, основанного на модели. Дополнительные сведения см. [в разделе инструкции. Добавление метода Creator](../sharepoint/how-to-add-a-creator-method.md).|
|Обновление|Изменяет данные в списке. Вызывается, когда пользователи обновляют сведения в списке. Дополнительные сведения см. [в разделе инструкции. Добавление метода обновления](../sharepoint/how-to-add-an-updater-method.md).|
|Удаление|Удаляет данные. Вызывается, когда пользователь удаляет элемент из списка. Дополнительные сведения см. [в разделе инструкции. Добавление метода удаления](../sharepoint/how-to-add-a-deleter-method.md).|

## <a name="define-method-parameters"></a>Определение параметров метода
 При создании метода Visual Studio добавляет входные и выходные параметры, соответствующие типу метода. Эти параметры являются просто заполнителями. В большинстве случаев необходимо изменить параметры так, чтобы они передавали или возвращали правильный тип данных. Например, по умолчанию метод поиска возвращает строку. В большинстве случаев необходимо изменить возвращаемый параметр метода Finder таким образом, чтобы он возвращал коллекцию сущностей. Это можно сделать, изменив дескриптор типа параметра. Дескриптор типа — это коллекция атрибутов, описывающих тип данных параметра. Дополнительные сведения см. [в разделе инструкции. определение дескриптора типа параметра](../sharepoint/how-to-define-the-type-descriptor-of-a-parameter.md).

 Visual Studio позволяет копировать дескрипторы типов между параметрами в модели. Например, можно определить дескриптор типа с именем `CustomerTD` для возвращаемого параметра `GetCustomer` метода. Дескриптор типа можно скопировать `CustomerTD` в **Обозреватель BDC**, а затем вставить этот дескриптор типа в входной параметр `CreateCustomer` метода. Это не позволит вам определять один и тот же дескриптор типа более одного раза.

## <a name="method-instances"></a>Экземпляры методов
 При создании метода Visual Studio добавляет экземпляр метода по умолчанию. Экземпляр метода — это ссылка на метод, а также значения по умолчанию для параметров. Один метод может иметь несколько экземпляров метода. Каждый экземпляр является сочетанием сигнатуры метода и набора значений по умолчанию. Дополнительные сведения см. [в разделе инструкции. определение дескриптора типа параметра](../sharepoint/how-to-define-the-type-descriptor-of-a-parameter.md).

 При запуске проекта экземпляры методов отображаются в раскрывающемся списке над списком SharePoint. Пользователи могут выбирать экземпляры метода для просмотра данных.

 Чтобы добавить значения по умолчанию в экземпляр метода, необходимо напрямую изменить XML модели. Дополнительные сведения см. в разделе [DefaultValue](/previous-versions/office/developer/sharepoint-2010/ee559319(v=office.14)).

## <a name="add-filter-descriptors"></a>Добавить дескрипторы фильтра
 Потребители модели могут захотеть получить экземпляры сущности, соответствующие некоторым критериям. Чтобы включить эту функцию, в метод можно добавить дескриптор фильтра. Дескрипторы фильтров позволяют потребителям модели фильтровать результирующие наборы методов, передавая значения методам перед их выполнением. Дополнительные сведения см. в разделе [инструкции. Добавление параметров фильтра в операции для ограничения экземпляров из внешней системы](/previous-versions/office/developer/sharepoint-2010/ee554889(v=office.14)).

 SharePoint предоставляет несколько функций, позволяющих пользователям предоставлять значения фильтров. Например, Бизнес-данные веб-части предоставляют текстовое поле фильтра. Пользователи могут ограничить данные в списке путем ввода значения в это текстовое поле. Дополнительные сведения о добавлении дескриптора фильтра в метод см. [в разделе инструкции. Добавление дескриптора фильтра в метод Finder](../sharepoint/how-to-add-a-filter-descriptor-to-a-finder-method.md).

### <a name="filter-descriptor-properties"></a>Свойства дескриптора фильтра
 Необходимо задать значение для **связанного дескриптора типа**, **имени** и свойств **типа** дескриптора фильтра. Все остальные свойства являются необязательными.

 **Связанное свойство дескриптора типа** связывает дескриптор фильтра с входным параметром. Когда пользователь предоставляет значение фильтра, служба BDC передает это значение в метод с помощью входного параметра.

 Свойство **Type** описывает шаблон фильтрации, который необходимо использовать. В SharePoint выбранный шаблон фильтрации влияет на текст, отображаемый в пользовательском интерфейсе. Например, для шаблона фильтрации по блоку **сравнения текст отображается** как элемент управления над веб-частью бизнес-данных. Дополнительные сведения о каждом шаблоне фильтрации см. [в разделе Типы фильтров, ПОДДЕРЖИВАЕМЫХ BDC](/previous-versions/office/developer/sharepoint-2010/ee556392(v=office.14)).

 Дополнительные сведения о свойствах дескриптора фильтра см. в разделе [FilterDescriptor](/previous-versions/office/developer/sharepoint-2010/ee557835(v=office.14)).

### <a name="provide-default-values"></a>Укажите значения по умолчанию
 В некоторых случаях пользователь может не предоставить значение фильтра. Можно указать значение по умолчанию, добавив значение по умолчанию в экземпляр метода или задав значение по умолчанию в коде метода. Дополнительные сведения о добавлении значения по умолчанию в экземпляр метода см. в разделе [MethodInstance](/previous-versions/office/developer/sharepoint-2010/ee556838(v=office.14)). Пример того, как задать значение входного параметра по умолчанию в коде метода, см. в разделе [как добавить дескриптор фильтра в метод Finder](../sharepoint/how-to-add-a-filter-descriptor-to-a-finder-method.md).

## <a name="validate-the-model"></a>Проверка модели
 Модель можно проверить во время разработки. Visual Studio определяет проблемы, которые могут препятствовать правильной работе модели. Эти проблемы отображаются в **Список ошибок** Visual Studio.

 Можно проверить модель, открыв контекстное меню конструктора BDC и выбрав **проверить**. Если модель содержит ошибки, они отображаются в **Список ошибок**. Можно быстро переместить курсор в код, который содержит ошибку, дважды щелкнув на нее в списке. В качестве альтернативы можно многократно выбрать клавиши **F8** или **SHIFT** + **F8** , чтобы перейти вперед или назад к ошибкам в списке.

 Ошибки проверки могут возникать при нарушении правил модели. Например, если свойство **IsCollection** дескриптора типа имеет значение **true**, но дескрипторы дочернего типа не существуют, то отображается ошибка проверки. Для понимания некоторых ошибок, отображаемых в **Список ошибок** Visual Studio, может потребоваться обратиться к правилам модели BDC. Дополнительные сведения о правилах модели BDC см. в разделе [Бдкметадата Schema](/previous-versions/office/developer/sharepoint-2010/ee556387(v=office.14)).

## <a name="debug-the-solution-that-contains-the-model"></a>Отладка решения, содержащего модель
 Отладку кода можно выполнять так же, как отладка любого кода в Visual Studio. Чтобы выполнить отладку кода, установите точки останова в любом месте кода, а затем запустите отладчик. Visual Studio открывает сайт SharePoint. В SharePoint создайте список или веб-часть, которая использует ваши бизнес-данные. Затем можно выполнить шаг с заходом в код. Дополнительные сведения об отладке проектов SharePoint см. в разделе [Устранение неполадок решений SharePoint](../sharepoint/troubleshooting-sharepoint-solutions.md).

 Можно также отлаживать код в пользовательских сборках, добавляемых в проект. Однако для отладки кода в пользовательской сборке необходимо добавить сборку в пакет решения. Дополнительные сведения см. [в разделе инструкции. Добавление и удаление дополнительных сборок](../sharepoint/how-to-add-and-remove-additional-assemblies.md).

 Дополнительные сведения о добавлении пользовательской сборки в проект см. в разделе [инструкции. Включение пользовательской сборки в компонент BDC](../sharepoint/how-to-include-a-custom-assembly-in-a-bdc-feature.md).

### <a name="configure-bdc-security"></a>Настройка безопасности BDC
 Прежде чем выполнять отладку решения, может потребоваться изменить параметры безопасности в SharePoint. Чтобы изменить эти параметры, откройте приложение службы подключения к бизнес-данным на веб-сайте центра администрирования SharePoint 2010. В диалоговом окне **Установка разрешений хранилища метаданных** добавьте учетную запись пользователя, а затем выберите любой из следующих параметров:

|Задача|Параметр|
|----------|------------|
|Для развертывания моделей в службе BDC.|Изменить|
|Для создания списков и веб-части с помощью внешних типов содержимого (сущностей) в модели.|Выбираемые в клиентах|
|Для создания, чтения, обновления и удаления данных сущности.|Execute|

 Дополнительные сведения об этих параметрах см. в разделе [Управление службой подключения к бизнес-данным](/previous-versions/office/sharepoint-server-2010/ee661742(v=office.14)).

 Также можно задать разрешения безопасности для отдельных моделей или внешних типов содержимого. Дополнительные сведения о настройке разрешений безопасности для модели см. в разделе [Управление моделями BDC](/previous-versions/office/sharepoint-server-2010/ee524073(v=office.14)). Дополнительные сведения о настройке разрешений безопасности для внешнего типа содержимого см. в разделе [Управление внешними типами содержимого](/previous-versions/office/sharepoint-server-2010/ee524076(v=office.14)).

> [!NOTE]
> Используйте эти параметры для отладки решения на локальном сервере SharePoint. Дополнительные сведения о настройке параметров безопасности, связанных с BDC, на рабочем сервере SharePoint см. в статье [Общие сведения о безопасности служб подключения к бизнес-данным](/previous-versions/office/sharepoint-server-2010/ee661743(v=office.14)).

### <a name="retract-models-that-become-corrupt"></a>Отозвать модели, которые станут поврежденными
 При первом запуске отладчика Visual Studio развертывает всю модель в SharePoint. Каждый раз после этого Visual Studio обновляет модель в SharePoint с помощью любых изменений, вносимых в развертывание.

 Могут возникнуть ситуации, когда необходимо полностью отозвать модель из SharePoint в Visual Studio. Например, модель может стать поврежденной.  Чтобы повторно развернуть модель в SharePoint, задайте для свойства **Добавочное обновление** модели **значение false**, а затем запустите отладчик. Свойство **Добавочное обновление** отображается в окне **свойства** при выборе узла, представляющего модель в **обозревателе BDC**. По умолчанию имя модели — **BdcModel1**.

### <a name="change-identifier-names-of-entities-in-the-model"></a>Изменение имен идентификаторов сущностей в модели
 Если изменить имя идентификатора после развертывания модели, может возникнуть ошибка развертывания. Эту ошибку невозможно устранить, задав для свойства **инкрементного обновления** модели **значение false**. Необходимо отозвать модель вручную, а затем снова развернуть решение. Дополнительные сведения см. в разделе [Устранение неполадок решений SharePoint](../sharepoint/troubleshooting-sharepoint-solutions.md). Эту ошибку можно избежать, задав для свойства **инкрементного обновления** **значение false** перед первоначальным развертыванием модели.

## <a name="locate-documentation-for-bdc-model-elements"></a>Поиск документации по элементам модели BDC
 Visual Studio добавляет в модель XML-элемент для каждой сущности, метода или другого создаваемого элемента. Атрибуты элементов отображаются в виде свойств в окне **Свойства** . Сведения об элементах и атрибутах, создаваемых Visual Studio при проектировании модели, см. в разделе [Бдкметадата Schema](/previous-versions/office/developer/sharepoint-2010/ee556387(v=office.14)).

## <a name="related-topics"></a>См. также

|Заголовок|Описание|
|-----------|-----------------|
|[Обзор средств проектирования моделей BDC](../sharepoint/bdc-model-design-tools-overview.md)|Описание средств, которые можно использовать для визуального проектирования модели для BDC.|
|[Как добавить сущность в модель](../sharepoint/how-to-add-an-entity-to-a-model.md)|Показывает, как добавить в модель внешние типы содержимого или сущности.|
|[Как добавить метод Finder](../sharepoint/how-to-add-a-finder-method.md)|Показывает, как добавить метод, позволяющий пользователям просматривать список сущностей в списке или веб-части.|
|[Как добавить конкретный метод поиска](../sharepoint/how-to-add-a-specific-finder-method.md)|Показывает, как добавить метод, позволяющий пользователям просматривать сведения о конкретной сущности.|
|[Как добавить метод Creator](../sharepoint/how-to-add-a-creator-method.md)|Показывает, как добавить метод, позволяющий пользователям добавлять записи в источник данных непосредственно из списка или веб-части.|
|[Как добавить метод удаления](../sharepoint/how-to-add-a-deleter-method.md)|Показывает, как добавить метод, позволяющий пользователям удалять данные из источника данных с помощью параметров в пользовательском интерфейсе списка или веб-части.|
|[Как добавить метод обновления](../sharepoint/how-to-add-an-updater-method.md)|Показывает, как добавить метод, который позволяет пользователям изменять записи данных в источнике данных непосредственно из списка или веб-части.|
|[Как добавить параметр в метод](../sharepoint/how-to-add-a-parameter-to-a-method.md)|Демонстрируется использование окна сведения о методе в Visual Studio для добавления входных и возвращаемых параметров в метод.|
|[Как определить дескриптор типа параметра](../sharepoint/how-to-define-the-type-descriptor-of-a-parameter.md)|Показывает, как определить типы данных параметров в модели.|
|[Как определить экземпляр метода](../sharepoint/how-to-define-a-method-instance.md)|Показывает, как создать экземпляр метода, выполняемого BDC.|
|[Как добавить дескриптор фильтра в метод Finder](../sharepoint/how-to-add-a-filter-descriptor-to-a-finder-method.md)|Показывает, как разрешить пользователям ограничивать количество экземпляров, возвращаемых методом поиска.|
|[Создание ассоциации между сущностями](../sharepoint/creating-an-association-between-entities.md)|Описывает, как можно определить связи между сущностями в модели. Бизнес-данные веб-части, внешние списки и пользовательские приложения могут отображать эти связи данных в пользовательском интерфейсе.|
|[Как создать ассоциацию между сущностями](../sharepoint/how-to-create-an-association-between-entities.md)|Показывает, как определить связи между сущностями в модели.|
|[Пошаговое руководство. Креатеан внешний список в SharePoint с помощью бизнес-данных](../sharepoint/walkthrough-creating-an-external-list-in-sharepoint-by-using-business-data.md)|Содержит пошаговые инструкции, демонстрирующие создание и тестирование модели, отображающей контакты в внешнем списке SharePoint.|
|[Интеграция бизнес-данных в SharePoint](../sharepoint/integrating-business-data-into-sharepoint.md)|Содержит общие сведения о создании и проектировании моделей для службы BDC.|
