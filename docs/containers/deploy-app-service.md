---
title: Развертывание контейнера ASP.NET Core в Службе приложений Azure
description: Сведения об использовании инструментов Visual Studio для работы с контейнерами с целью развертывания веб-приложения ASP.NET Core в контейнере Docker в Службе приложений Azure
ms.custom: SEO-VS-2020
author: ghogen
manager: jmartens
ms.technology: vs-azure
ms.devlang: dotnet
ms.topic: how-to
ms.date: 02/21/2021
ms.author: ghogen
ms.openlocfilehash: f9a4f26227d2cd3bd065fab88ba294f7341ea4ed
ms.sourcegitcommit: 5654b7a57a9af111a6f29239212d76086bc745c9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101684314"
---
# <a name="deploy-an-aspnet-core-container-to-azure-app-service-using-visual-studio"></a>Развертывание контейнера ASP.NET Core в Службе приложений Azure с помощью Visual Studio

В этом руководстве поэтапно показано, как с помощью Visual Studio опубликовать контейнерное приложение ASP.NET Core в [Службе приложений Azure](/azure/app-service). Служба приложений Azure подходит для веб-приложения с одним контейнером, размещенного в Azure.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/dotnet/?utm_source=acr-publish-doc&utm_medium=docs&utm_campaign=docs), прежде чем начинать работу.

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим руководством вам понадобится следующее:

::: moniker range="vs-2017"
- Установите последнюю версию [Visual Studio 2017](https://visualstudio.microsoft.com/vs/older-downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=vs+2017+download) с рабочей нагрузкой "ASP.NET и разработка веб-приложений"
::: moniker-end
::: moniker range=">=vs-2019"
- [Visual Studio 2019](https://visualstudio.microsoft.com/downloads) с рабочей нагрузкой *ASP.NET и веб-разработка*.
::: moniker-end
- Установка [Docker Desktop](https://docs.docker.com/docker-for-windows/install/)

## <a name="create-an-aspnet-core-web-app"></a>Создание веб-приложения ASP.NET Core

Давайте создадим простое приложение ASP.NET Core, которое мы будем использоваться в этом руководстве.

::: moniker range="vs-2017"
1. В меню Visual Studio выберите **Файл > Создать > Проект**.
2. В разделе **Шаблоны** диалогового окна **Новый проект** выберите **Visual C# > Веб-проект**.
3. Выберите **Новое веб-приложение ASP.NET Core**.
4. Присвойте новому приложению имя (или оставьте имя по умолчанию) и нажмите кнопку **ОК**.
5. Выберите **Веб-приложение**.
6. Поставьте флажок **Включить поддержку Docker**.
7. Выберите тип контейнера **Linux** и нажмите кнопку **ОК**. Развертывание контейнеров Windows в Службе приложений Azure не поддерживается.
::: moniker-end
::: moniker range=">= vs-2019"
1. В начальном окне Visual Studio выберите **Создать проект**.
1. Выберите **Веб-приложение ASP.NET Core**, а затем нажмите кнопку **Далее**.
1. Присвойте новому приложению имя (или оставьте имя по умолчанию) и нажмите кнопку **Далее**.
1. Выберите версию .NET, которую нужно использовать в качестве целевой. Если вы не знаете, какую версию выбрать, выберите версию LTS (долгосрочная поддержка).
1. Решите, требуется ли вам поддержка SSL, установив или сняв флажок **Настроить для HTTPS**.
1. Поставьте флажок **Включить поддержку Docker**.
1. Выберите тип контейнера и нажмите кнопку **Создать**.
::: moniker-end

## <a name="deploy-the-container-to-azure"></a>Развертывание контейнера в Azure

::: moniker range="vs-2017"

1. В **обозревателе решений** щелкните правой кнопкой проект и выберите **Опубликовать**.
1. В диалоговом окне целевого объекта публикации выберите **Служба приложений для Linux** или **Служба приложений**. Это название операционной системы, в которой будет размещаться веб-сервер.
1. Публикацию можно выполнить только в Службе приложений или одновременно в Службе приложений и в Реестре контейнеров Azure (ACR). Чтобы опубликовать контейнер в Реестре контейнеров Azure (ACR), выберите **Создать Службу приложений для контейнеров** и щелкните **Опубликовать**.

   ![Снимок экрана диалогового окна публикации](media/deploy-app-service/publish-app-service-linux-1.png)

   Чтобы опубликовать контейнер только в Службе приложений Azure, не используя Реестр контейнеров Azure, выберите **Создать** и щелкните **Опубликовать**.

1. Убедитесь в том, что вы вошли в учетную запись, связанную с подпиской Azure, и выберите уникальное имя, подписку, группу ресурсов, план размещения и реестр контейнеров (если применимо) или примите значения по умолчанию.

   ![Снимок экрана: параметры публикации](media/deploy-app-service/publish-app-service-linux-2.png)

1. Выберите **Создать**. Контейнер будет развернут в Azure в выбранных группе ресурсов и реестре контейнеров. Этот процесс займет некоторое время. По завершении на вкладке **Публикация** будут представлены сведения о публикации, включая URL-адрес сайта.

   ![Снимок экрана: вкладка публикации](media/deploy-app-service/publish-succeeded.PNG)

1. Щелкните ссылку на сайт, чтобы убедиться в том, что приложение работает в Azure надлежащим образом.

   ![Снимок экрана веб-приложения](media/deploy-app-service/web-application-running.png)

1. Профиль публикации сохраняется со всеми выбранными параметрами, включая группу ресурсов и реестр контейнеров.

1. Чтобы еще раз выполнить развертывание, используя тот же профиль публикации, нажмите кнопку **Опубликовать**, а затем кнопку **Опубликовать** в окне **Действие веб-публикации** или щелкните проект правой кнопкой мыши в **обозревателе решений** и выберите в контекстном меню пункт **Опубликовать**.
:::moniker-end
:::moniker range=">=vs-2019"
1. В **обозревателе решений** щелкните правой кнопкой проект и выберите **Опубликовать**.
1. В диалоговом окне **Публикация** выберите **Azure** в качестве целевого объекта.

   ![Снимок экрана: мастер публикации](media/deploy-app-service/publish-choices.png)

1. На вкладке **Указанный целевой объект** выберите требуемый целевой объект для развертывания, например **Служба приложений (Windows)** или **Служба приложений (Linux)** , в зависимости от типа контейнера.

   ![Снимок экрана: вкладка "Указанный целевой объект" мастера публикации](media/deploy-app-service/publish-app-service-windows.png)

1. Если вы не вошли в нужную учетную запись Azure с подпиской, которую хотите использовать, выполните вход с помощью кнопки в левом верхнем углу окна **Публикация**.

1. Вы можете использовать существующую службу приложений или создать новую, щелкнув ссылку **Создать Службу приложений Azure**. Найдите существующую службу приложений в представлении в виде дерева, развернув ее группу ресурсов, или измените значение параметра **Вид** на **Тип ресурса** для сортировки по типу.

   ![Снимок экрана: выбор Службы приложений](media/deploy-app-service/publish-app-service-windows2.png)

1. Если вы выберете вариант создания, в Azure будет создана группа ресурсов и служба приложений. При необходимости можно изменить их имена, но они должны быть уникальными.

   ![Снимок экрана: создание Службы приложений](media/deploy-app-service/publish-app-service-windows3.png)

1. Вы можете принять план размещения по умолчанию или изменить его на этом этапе или позже на портале Azure. По умолчанию предлагается план размещения `S1` (малый) в одном из поддерживаемых регионов. Чтобы создать план размещения, выберите **Создать** рядом с раскрывающимся списком **План размещения**. Откроется окно **План размещения**.

   ![Снимок экрана: параметры плана размещения](media/deploy-app-service/hosting-plan.png)

   Подробные сведения о параметрах плана размещения см. в статье [Обзор планов Службы приложений Azure](/azure/app-service/overview-hosting-plans).

1. Завершив выбор или создание этих ресурсов, нажмите кнопку **Готово**. Контейнер будет развернут в Azure в выбранной группе ресурсов и службе приложений. Этот процесс займет некоторое время. По завершении на вкладке **Публикация** будут представлены сведения о публикации, включая URL-адрес сайта.

   ![Снимок экрана: вкладка публикации](media/deploy-app-service/publish-succeeded-windows.png)

1. Щелкните ссылку на сайт, чтобы убедиться в том, что приложение работает в Azure надлежащим образом.

   ![Снимок экрана веб-приложения](media/deploy-app-service/web-application-running2.png)

1. Профиль публикации сохраняется со всеми выбранными параметрами, включая группу ресурсов и службу приложений.

1. Чтобы еще раз выполнить развертывание, используя тот же профиль публикации, нажмите кнопку **Опубликовать**, а затем кнопку **Опубликовать** в окне **Действие веб-публикации** или щелкните проект правой кнопкой мыши в **обозревателе решений** и выберите в контекстном меню пункт **Опубликовать**.
:::moniker-end

## <a name="view-container-settings"></a>Просмотр параметров контейнера

Развернутую службу приложений можно открыть на [портале Azure](https://portal.azure.com).

Чтобы просмотреть параметры развернутой Службы приложений, откройте меню **Параметры контейнера** (при использовании Visual Studio 2019 версии 16.4 или более поздней).

![Снимок экрана: меню "Параметры контейнера" на портале Azure](media/deploy-app-service/container-settings-menu.png)

После этого можно просмотреть сведения о контейнере, просмотреть или скачать журналы либо настроить непрерывное развертывание. См. раздел [CI/CD непрерывного развертывания Службы приложений Azure](/azure/app-service/containers/app-service-linux-ci-cd).

## <a name="clean-up-resources"></a>Очистка ресурсов

Чтобы удалить все ресурсы Azure, связанные с этим руководством, удалите группу ресурсов на [портале Azure](https://portal.azure.com). Чтобы найти группу ресурсов, связанную с опубликованным веб-приложением, выберите **Вид** > **Другие окна** > **Действие веб-публикации**, а затем щелкните значок шестеренки. Откройте вкладку **Публикация** с группой ресурсов.

На портале Azure выберите **Группы ресурсов**, а затем выберите группу ресурсов, чтобы открыть страницу сведений о ней. Проверьте, та ли это группа ресурсов, а затем выберите **Удалить группу ресурсов**, введите имя и щелкните **Удалить**.

## <a name="next-steps"></a>Следующие шаги

[Обзор Службы приложений Azure](/azure/app-service/overview)

## <a name="see-also"></a>См. также

[Развертывание в Реестр контейнеров Azure](hosting-web-apps-in-docker.md)