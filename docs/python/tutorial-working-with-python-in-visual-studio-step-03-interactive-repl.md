---
title: Python в Visual Studio. Учебник. Шаг 3. Интерактивное окно REPL
titleSuffix: ''
description: Шаг 3 базового пошагового руководства, посвященного возможностям Python в Visual Studio. Здесь рассматривается интерактивное окно REPL в Python.
ms.date: 01/28/2019
ms.topic: tutorial
author: JoshuaPartlow
ms.author: joshuapa
manager: jmartens
ms.custom: seodec18
ms.workload:
- python
- data-science
ms.openlocfilehash: e82073b77231f84452ba51402f407904142bbf8e
ms.sourcegitcommit: 925db7adb9cb554b081c7e727d09680d4863feed
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2021
ms.locfileid: "107941101"
---
# <a name="step-3-use-the-interactive-repl-window"></a>Шаг 3. Использование интерактивного окна REPL

**Предыдущий шаг. [Написание и запуск кода](tutorial-working-with-python-in-visual-studio-step-02-writing-code.md)**

**Интерактивное окно** Visual Studio для Python предоставляет цикл REPL (read–eval–print loop), который значительно сокращает обычный цикл "редактирование — сборка — отладка". **Интерактивное** окно предоставляет все возможности REPL, доступные в командной строке Python. Оно также очень упрощает обмен кодом с помощью исходных файлов в редакторе Visual Studio. Выполнение этой задачи с помощью командной строки представляет сложность.

> [!NOTE]
> Для решения проблем с REPL обязательно установите пакеты `ipython` и `ipykernel`. Сведения об установке пакетов см. в статье [Справочная информация по вкладкам окна "Окружения Python"](./python-environments-window-tab-reference.md#packages-tab).

1. Чтобы открыть **интерактивное** окно, в **обозревателе решений** щелкните правой кнопкой мыши среду Python проекта (например, **Python 3.6 (32-разрядная версия)**, как на рисунке выше) и выберите пункт **Открыть интерактивное окно**. Также можно выбрать **Вид** > **Другие окна** > **Интерактивные окна Python** в главном меню Visual Studio.

1. **Интерактивное** окно открывается под окном редактора со стандартной командной строкой REPL Python **>>>**. С помощью раскрывающегося списка **Окружения** можно выбрать определенный интерпретатор для работы. Кроме того, часто требуется увеличить **интерактивное** окно. Для этого можно перетащить разделитель между двумя окнами:

    ![Интерактивное окно Python; изменение размера перетаскиванием](media/vs-getting-started-python-11-interactive1b.png)

    > [!Tip]
    > Размеры любых окон в Visual Studio можно изменять, перетаскивая граничные разделители. Вы также можете перетаскивать окна за пределы окна Visual Studio и изменять их расположение внутри этого окна, как вам нравится. Подробные сведения см. в статье [Настройка макетов окон](../ide/customizing-window-layouts-in-visual-studio.md).

1. Введите несколько операторов, например `print("Hello, Visual Studio")`, и выражений, например `123/456`, чтобы сразу увидеть результаты:

    ![Мгновенные результаты в интерактивном окне Python](media/vs-getting-started-python-12-interactive2.png)

1. Когда вы начнете вводить многострочный оператор, например определение функции, в **интерактивном** окне отобразится приглашение Python **...** , которое позволяет продолжить строку и которое в отличие от командной строки REPL поддерживает автоматический отступ. Чтобы добавить новую строку **...** , нажмите `Shift+Enter`:

    ![Интерактивное окно Python с продолжением инструкции](media/vs-getting-started-python-13-interactive3.png)

1. Все элементы, вводимые в **интерактивном** окне, записываются в журнал. В нем также, в отличие от командной строки REPL, сохраняются многострочные элементы. Например, вместо того чтобы повторно создавать функцию по одной строке, можно просто восстановить все определение функции `f` как единое целое и изменить имя на `make_double`.

1. Visual Studio может передавать несколько строк кода из окна редактора в **интерактивное** окно. Эта возможность позволяет хранить код в исходном файле и легко передавать отдельные его части в **интерактивное** окно. После этого с такими фрагментами кода можно работать в удобной среде REPL вместо того, чтобы выполнять всю программу. Чтобы увидеть, как работает эта функция, замените цикл `for` в файле *PythonApplication1.py* следующим кодом:

    ```python
    # Create a string with spaces proportional to a cosine of x in degrees
    def make_dot_string(x):
        return ' ' * int(20 * cos(radians(x)) + 20) + 'o'
    ```

1. Выберите операторы функций `import`, `from` и `make_dot_string` в файле *.py*. Щелкните правой кнопкой мыши выделенный текст и выберите **Отправить код в интерактивное окно** (или нажмите клавиши **Ctrl**+**ВВОД**). Фрагмент кода будет немедленно вставлен в **интерактивное** окно, после чего начнется его выполнение. Так как код определил функцию, можно быстро проверить эту функцию, вызвав ее несколько раз:

    ![Отправка кода в интерактивное окно и его тестирование](media/vs-getting-started-python-14-interactive4.png)

    > [!Tip]
    > Если в редакторе *не* выделен фрагмент, при нажатии клавиш **CTRL**+**ВВОД** в **интерактивном** окне выполнится текущая строка кода, а курсор автоматически установится в следующей строке. Это позволяет легко выполнять код в пошаговом режиме, многократно нажимая клавиши **CTRL**+**ВВОД**, что невозможно при использовании командной строки Python. Таким образом также возможно пошаговое выполнение кода без запуска отладчика, в том числе не с самого начала программы.

1. Кроме того, можно скопировать и вставить несколько строк кода, например приведенный ниже фрагмент, в **интерактивное** окно из любого источника, что трудно сделать с помощью командной строки REPL для Python. При вставке **интерактивное** окно запускает этот код так же, как при вводе с клавиатуры.

    ```python
    for i in range(360):
        s = make_dot_string(i)
        print(s)
    ```

    ![Вставка нескольких строк кода с помощью команды отправки в интерактивное окно](media/vs-getting-started-python-15-interactive5.png)

1. Как можно видеть, код работает нормально, но выходные данные не очень впечатляют. Другое значение шага в цикле `for` сделает косинусоиду более наглядной. К счастью, так как весь цикл `for` хранится в журнале REPL как единое целое, можно легко вернуться и внести изменения, а затем еще раз проверить функцию. Сначала восстановите цикл `for`, нажав клавишу со стрелкой вверх. Затем нажмите клавишу со стрелкой влево или вправо, чтобы начать переход по коду (пока вы не сделаете это, при нажатии клавиш со стрелками вверх и вниз будет происходить переход по журналу). Перейдите к спецификации `range` и измените ее на `range(0, 360, 12)`. Затем нажмите клавиши **CTRL**+**ВВОД** (в любом месте кода), чтобы снова выполнить весь оператор:

    ![Изменение предыдущего оператора в интерактивном окне](media/vs-getting-started-python-16-interactive6.png)

1. Повторяйте эту процедуру, пробуя различные значения шага, пока не найдете оптимальное. Можно также сделать так, чтобы волна повторялась, увеличив диапазон, например `range(0, 1800, 12)`.

1. Если вас устраивает код в **интерактивном окне**, выберите его. Затем щелкните код правой кнопкой мыши и выберите **Скопировать код** (**Ctrl**+**Shift**+**C**). Наконец, вставьте выбранный код в редактор. Обратите внимание на то, что при использовании этой возможности в Visual Studio автоматически пропускаются выходные данные, а также символы `>>>` и `...`. Например, на приведенном ниже рисунке показано использование команды **Копировать код** применительно к выделенному фрагменту, включающему приглашения и выходные данные:

    ![Выполнение команды "Копировать код" в интерактивном окне для выделенного фрагмента с приглашениями и выходными данными](media/vs-getting-started-python-17-interactive7.png)

    При вставке в редакторе остается только код:

    ```python
    for i in range(0, 1800, 12):
        s = make_dot_string(i)
        print(s)
    ```

    Чтобы скопировать содержимое **интерактивного** окна полностью, включая приглашения и выходные данные, используйте стандартную команду **Копировать**.

1. Итак, вы обработали небольшую часть кода с помощью среды REPL в **интерактивном** окне, а затем легко добавили этот код в исходный файл проекта. Если снова выполнить этот код с помощью клавиш **CTRL**+**F5** (или команды **Отладка** > **Начать без отладки**), отобразятся требуемые результаты.

## <a name="next-step"></a>Следующий шаг

> [!div class="nextstepaction"]
> [Выполнение кода в отладчике](tutorial-working-with-python-in-visual-studio-step-04-debugging.md)

## <a name="go-deeper"></a>Дополнительные подробности

- [Работа с интерактивным окном Python](python-interactive-repl-in-visual-studio.md)
- [Использование IPython REPL](interactive-repl-ipython.md)