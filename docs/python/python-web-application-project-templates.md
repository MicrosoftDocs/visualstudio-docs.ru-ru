---
title: Шаблоны веб-приложений для Python
description: Visual Studio предоставляет шаблоны для веб-приложений, написанных на языке Python с помощью платформ Bottle, Flask и Django, включая конфигурации отладки и публикацию в службе приложений Azure.
ms.date: 01/28/2019
ms.topic: conceptual
author: JoshuaPartlow
ms.author: joshuapa
manager: jmartens
ms.custom: seodec18
ms.workload:
- python
- data-science
ms.openlocfilehash: 6553017034dc46cfd1c035564a83dde89d77d057
ms.sourcegitcommit: 4908561809ad397c99cf204f52d5e779512e502c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/17/2021
ms.locfileid: "112254853"
---
# <a name="python-web-application-project-templates"></a>Шаблоны проекта веб-приложений Python

Python в Visual Studio поддерживает разработку веб-проектов на платформах Bottle, Django и Flask с помощью шаблонов проектов и средства запуска отладки, которое можно настроить для работы с различными платформами. Эти шаблоны включают файл *requirements.txt* для объявления необходимых зависимостей. При создании проекта на основе одного из таких шаблонов в Visual Studio отобразится запрос на установку этих пакетов (см. раздел [Установка необходимых компонентов для проекта](#install-project-requirements) далее в этой статье).

Для других платформ, например Pyramid, также можно использовать универсальный шаблон **веб-проекта**. В этом случае для шаблона не предусмотрена установка каких-либо платформ. Вместо этого в окружении проекта устанавливаются необходимые пакеты (см. статью о [вкладке "Пакет" окна окружений Python](python-environments-window-tab-reference.md#packages-tab)).

Сведения о развертывании веб-приложения Python в Azure см. в статье [Публикация в службу приложений Azure](publishing-python-web-applications-to-azure-from-visual-studio.md).

## <a name="use-a-project-template"></a>Использование шаблона проекта

Чтобы создать проект на основе шаблона, последовательно выберите **Файл** > **Создать** > **Проект**. Чтобы просмотреть шаблоны для веб-проектов, слева в диалоговом окне последовательно выберите **Python** > **Интернет**. Выберите шаблон по своему усмотрению, присвоив имена проекту и решению. Затем задайте параметры для каталога решения и репозитория Git и нажмите кнопку **ОК**.

![Диалоговое окно "Новый проект" веб-приложений](media/projects-new-project-dialog-web.png)

::: moniker range="<=vs-2017"

Универсальный шаблон **Веб-проект**, который упоминался ранее, содержит пустой проект Visual Studio без кода (подразумевается только проект Python). Сведения о шаблоне **Облачная служба Azure** см. в статье [Проекты облачных служб Azure для Python](python-azure-cloud-service-project-template.md).

::: moniker-end

::: moniker range=">=vs-2019"

Универсальный шаблон **Веб-проект**, который упоминался ранее, содержит пустой проект Visual Studio без кода (подразумевается только проект Python).

::: moniker-end

Все другие шаблоны основаны на веб-платформах Bottle, Flask или Django и делятся на три общие группы, как описано в следующих разделах. Приложения, созданные с помощью любого из этих шаблонов, содержат код, который обеспечивает локальное выполнение и отладку приложений. Кроме того, каждый из них предоставляет необходимый [объект приложения WSGI](https://www.python.org/dev/peps/pep-3333/) (python.org) для использования с рабочими веб-серверами.

### <a name="blank-group"></a>Пустая группа

С помощью всех шаблонов **пустых веб-проектов для \<framework>** создаются проекты с использованием большего или меньшего объема стандартного кода и необходимых зависимостей, объявленных в файле *requirements.txt*.

| Шаблон | Description |
| --- | --- |
| **Пустой веб-проект Bottle** | В *app.py* создается минимальное приложение с домашней страницей для `/` и страницей `/hello/<name>`, на которой выводится `<name>`. Используется небольшой встроенный шаблон. |
| **Пустой веб-проект Django** | Создается проект Django с основной структурой веб-сайта Django, но без структуры приложений Django. Дополнительные сведения см. в статье о [шаблонах Django](python-django-web-application-project-template.md) и [шаге 1 руководства по изучению Django](learn-django-in-visual-studio-step-01-project-and-solution.md). |
| **Пустой веб-проект Flask** | Создается минимальное приложение для вывода одной страницы "Hello World!" для `/`. Это приложение похоже на результат выполнения инструкций в [кратком руководстве по созданию первого веб-приложения Python с помощью Visual Studio](../ide/quickstart-python.md?toc=/visualstudio/python/toc.json&bc=/visualstudio/python/_breadcrumb/toc.json). См. также [шаг 1 руководства по работе с Flask](learn-flask-visual-studio-step-01-project-solution.md).

### <a name="web-group"></a>Веб-группа

С помощью всех шаблонов **веб-проектов для \<Framework>** создаются начальные веб-приложения с идентичной структурой независимо от выбранной платформы. В приложении есть домашняя страница, страницы со сведениями и контактными данными, а также панель навигации и адаптивный макет, созданный на основе Bootstrap. Все приложения соответствующим образом настроены для предоставления статических файлов (CSS, JavaScript и шрифты). Используется механизм шаблона страницы, соответствующий конкретной платформе.

| Шаблон | Description |
| --- | --- |
| **Веб-проект Bottle** | Создается приложение, статические файлы которого содержатся в папке *static* и обрабатываются с помощью кода в *app.py*. Данные маршрутизации для отдельных страниц содержатся в *routes.py*, а шаблоны страниц — в папке *views*.|
| **Веб-проект Django** | Создается проект и приложение Django с тремя страницами, поддержкой аутентификации и базой данных SQLite (без моделей данных). Дополнительные сведения см. в статье о [шаблонах Django](python-django-web-application-project-template.md) и [шаге 4 руководства по изучению Django](learn-django-in-visual-studio-step-04-full-django-project-template.md). |
| **Веб-проект Flask** | Создается приложение, статические файлы которого содержатся в папке *static*. Маршрутизация обрабатывается с помощью кода во *views.py*. Шаблоны страниц, созданные с использованием механизма Jinja, содержатся в папке *templates*. Код запуска помещен в файл *runserver.py*. См. [шаг 4 руководства по работе с Flask](learn-flask-visual-studio-step-04-full-flask-project-template.md). |
| **Веб-проект Flask и Jade** | Создается то же приложение, что и при использовании шаблона **Веб-проект Flask**, но с помощью расширения Jade для модуля создания шаблонов Jinja. |

::: moniker range="vs-2017"
### <a name="polls-group"></a>Группа опроса

С помощью шаблонов **веб-проектов опроса для \<framework>** создаются начальные веб-приложения, в которых пользователи могут пройти опрос. Каждое приложение основано на структуре шаблона **веб-проекта**, которая позволяет использовать базу данных для управления опросами и ответами пользователей. Эти приложения включают соответствующие модели данных и специальную страницу приложения (/seed), с помощью которой из файла *samples.json* загружается опрос.

| Шаблон | Description |
| --- | --- |
| **Веб-проект опроса Bottle** | Создается приложение, которое можно запустить с выполняющейся в памяти базой данных, MongoDB или службой "Хранилище таблиц Azure", которая настраивается с помощью переменной среды `REPOSITORY_NAME`. Модели данных и код хранилища данных содержатся в папке *models*. В файл *settings.py* помещен код, который определяет используемое хранилище данных. |
| **Веб-проект опроса Django** | Создаются проект и приложение Django с тремя страницами и базой данных SQLite. Шаблон включает настройки в интерфейсе администратора Django, которые позволяют прошедшему аутентификацию администратору создавать опросы и управлять ими. Дополнительные сведения см. в статье о [шаблонах Django](python-django-web-application-project-template.md) и [шаге 6 руководства по изучению Django](learn-django-in-visual-studio-step-06-polls-django-web-project-template.md). |
| **Веб-проект опроса Flask** | Создается приложение, которое можно запустить с выполняющейся в памяти базой данных, MongoDB или службой "Хранилище таблиц Azure", которая настраивается с помощью переменной среды `REPOSITORY_NAME`. Модели данных и код хранилища данных содержатся в папке *models*. В файл *settings.py* помещен код, который определяет используемое хранилище данных. В приложении применяется модуль Jinja для создания шаблонов страниц. См. [шаг 5 руководства по работе с Flask](learn-flask-visual-studio-step-05-polls-flask-web-project-template.md). |
| **Веб-проект опроса Flask и Jade** | Создается то же приложение, что и при использовании шаблона **Веб-проект опроса Flask**, но с помощью расширения Jade для модуля создания шаблонов Jinja. |
::: moniker-end

## <a name="install-project-requirements"></a>Установка требований проекта

При создании проекта из шаблона для конкретной платформы отображается диалоговое окно для установки необходимых пакетов с помощью pip. Чтобы при публикации веб-сайта были настроены правильные зависимости, для веб-проектов рекомендуется использовать [виртуальную среду](selecting-a-python-environment-for-a-project.md#use-virtual-environments).

![Диалоговое окно, с помощью которого можно установить необходимые пакеты для шаблона проекта](media/template-web-requirements-txt-wizard.png)

Если используется система управления версиями, папка виртуального окружения обычно опускается, так как виртуальное окружение можно воссоздать только с помощью *requirements.txt*. Чтобы исключить папку, рекомендуем сначала выбрать вариант **самостоятельной установки**, показанный выше в окне с запросом, а затем отключить автоматическую фиксацию перед созданием виртуального окружения. Дополнительные сведения см. в [шагах 1–2 и 1–3 руководства по изучению Django](learn-django-in-visual-studio-step-01-project-and-solution.md#step-1-2-examine-the-git-controls-and-publish-to-a-remote-repository) и [шагах 1–2 и 1.3 руководства по изучению Flask](learn-flask-visual-studio-step-01-project-solution.md#step-1-2-examine-the-git-controls-and-publish-to-a-remote-repository).

Выполняя развертывание в службе приложений Microsoft Azure, нужно выбрать версию Python в качестве [расширения сайта](./managing-python-on-azure-app-service.md?view=vs-2019&preserve-view=true) и установить пакеты вручную. Кроме того, поскольку при развертывании из Visual Studio служба приложений Azure **не** устанавливает пакеты из файла *requirements.txt* автоматически, используйте сведения о конфигурации, приведенные на странице [aka.ms/PythonOnAppService](managing-python-on-azure-app-service.md).

::: moniker range="<=vs-2017"

Облачные службы Microsoft Azure *поддерживают* файл *requirements.txt*. Дополнительные сведения см. в статье [Проекты облачных служб Azure для Python](python-azure-cloud-service-project-template.md).

::: moniker-end

## <a name="debugging"></a>Отладка

Когда вы запускаете отладку веб-проекта, Visual Studio запускает локальный веб-сервер со случайным портом и открывает страницу с указанным здесь адресом и портом в браузере по умолчанию. Чтобы указать дополнительные параметры, щелкните правой кнопкой мыши проект, выберите **Свойства** и откройте вкладку **Веб-средство запуска**:

![Свойства веб-средства запуска для универсального веб-шаблона](media/template-web-launcher-properties.png)

Параметры группы **Отладка**:

- Параметры **Пути поиска**, **Аргументы сценария**, **Аргументы интерпретатора** и **Путь к интерпретатору** ничем не отличаются от используемых в режиме [обычной отладки](debugging-python-in-visual-studio.md).
- **URL-адрес для запуска** — задает URL-адрес, который открывается в браузере. По умолчанию для него используется значение `localhost`.
- **Номер порта.**  Это порт, который будет использоваться, если в URL-адресе не указан порт (по умолчанию Visual Studio автоматически выбирает порт). Этот параметр позволяет переопределить значение по умолчанию переменной среды `SERVER_PORT`, которое используется шаблонами для настройки порта, прослушиваемого локальным сервером отладки.

Свойства, указанные в группах **Команда сервера выполнения** и **Команда сервера отладки** (последняя группа находится ниже в окне, показанном на рисунке), определяют, как будет запускаться веб-сервер. Так как для многих платформ требуется использовать сценарий вне текущего проекта, можно настроить сценарий здесь и передать модуль автозагрузки как параметр.

- **Команда** — может содержать скрипт Python (файл *\*.py*), имя модуля (как и в `python.exe -m module_name`) или одну строку кода (как и в `python.exe -c "code"`). Значение в раскрывающемся списке указывает, какой из этих типов будет использоваться.
- **Аргументы** — содержимое этого поля передается в командной строке после команды.
- **Среда** — разделенный символом новой строки список пар \<NAME>=\<VALUE>, определяющих переменные среды. Эти переменные задаются после всех свойств, которые могут изменить среду, например номер порта или пути поиска, и поэтому могут перезаписать эти значения.

Любое свойство проекта и любую переменную среды можно указать, используя синтаксис MSBuild, например `$(StartupFile) --port $(SERVER_PORT)`.
`$(StartupFile)` — это относительный путь к файлу запуска, а `{StartupModule}` — импортируемое имя файла запуска. `$(SERVER_HOST)` и `$(SERVER_PORT)` являются обычными переменными среды, автоматически задаваемые свойствами **URL-адрес для запуска** и **Номер порта** или с помощью свойства **Среда**.

> [!Note]
> Значения в группе **Команда сервера выполнения** используются при выборе команды **Отладка** > **Запуск сервера** или нажатии клавиш **CTRL**+**F5**. Значения в группе **Команда сервера отладки** используются при выборе команды **Отладка** > **Запустить сервер отладки** или нажатии клавиши **F5**.

### <a name="sample-bottle-configuration"></a>Пример конфигурации Bottle

Шаблон **веб-проекта Bottle** содержит стандартный код, который выполняет необходимую настройку. Импортированное приложение Bottle может не содержать этот код, однако в этом случае следующие параметры запускают приложение с помощью установленного модуля `bottle`:

- Группа **команды запуска сервера**:
  - **Команда**: `bottle` (модуль);
  - **Аргументы**: `--bind=%SERVER_HOST%:%SERVER_PORT% {StartupModule}:app`.

- Группа **команды отладки сервера**:
  - **Команда**: `bottle` (модуль);
  - **Аргументы** `--debug --bind=%SERVER_HOST%:%SERVER_PORT% {StartupModule}:app`

При отладке с помощью Visual Studio мы не рекомендуем использовать параметр `--reload`.

### <a name="sample-pyramid-configuration"></a>Пример конфигурации приложения Pyramid

В настоящее время для создания приложений Pyramid лучше всего использовать средство командной строки `pcreate`. После создания приложения его можно импортировать с помощью шаблона [**На основе существующего кода Python**](managing-python-projects-in-visual-studio.md#create-a-project-from-existing-files). Затем настройте параметры в свойствах **универсального веб-проекта**. Эти параметры предполагают, что платформа Pyramid установлена в виртуальной среде в `..\env`.

- Группа **отладки**:
  - **Порт сервера**: 6543 (или заданный в *INI*-файлах).

- Группа **команды запуска сервера**:
  - Команда: `..\env\scripts\pserve-script.py` (сценарий);
  - Аргументы: `Production.ini`

- Группа **команды отладки сервера**:
  - Команда: `..\env\scripts\pserve-script.py` (сценарий);
  - Аргументы: `Development.ini`

> [!Tip]
> Скорее всего, потребуется настроить свойство **Рабочий каталог** проекта, так как приложения Pyramid обычно находятся в папке на один уровень ниже корневого каталога проекта.

### <a name="other-configurations"></a>Другие конфигурации

Если у вас есть параметры для другой платформы, которыми вы хотите поделиться, или вы хотите запросить параметры для такой платформы, откройте обращение в [репозитории GitHub](https://github.com/Microsoft/PTVS/issues).

::: moniker range="<=vs-2017"

## <a name="convert-a-project-to-azure-cloud-service"></a>Преобразование проекта в проект облачной службы Azure

С помощью команды **Преобразовать в проект облачной службы Microsoft Azure** (см. рисунок ниже) можно добавить проект облачной службы в решение. Этот проект включает параметры развертывания и конфигурации для используемых виртуальных машин и служб. Используйте команду **Опубликовать** в облачном проекте, чтобы выполнить развертывание в облачных службах. С помощью команды **Опубликовать** в проекте Python можно по-прежнему выполнить развертывание на веб-сайтах. Дополнительные сведения см. в статье [Проекты облачных служб Azure](python-azure-cloud-service-project-template.md).

![Команда "Преобразовать в проект облачной службы Microsoft Azure"](media/template-web-convert-menu.png)

::: moniker-end

## <a name="see-also"></a>См. также раздел

- [Справочник по шаблонам элементов Python](python-item-templates.md)
- [Публикация в службу приложений Azure](publishing-python-web-applications-to-azure-from-visual-studio.md)