---
title: Включение пакета NuGet в проект
description: Этот документ посвящен включению пакета NuGet в проект Xamarin. Он описывает поиск и скачивание пакета, а также содержит общие сведения о функциях интеграции IDE.
author: heiligerdankgesang
ms.author: dominicn
ms.date: 04/14/2017
ms.assetid: 5C800815-0B13-4B27-B017-95FCEF1A0EA2
ms.custom: video
ms.topic: how-to
ms.openlocfilehash: 274e8defe25fa78c30aee72834e486b302a9af4e
ms.sourcegitcommit: fcfd0fc7702a47c81832ea97cf721cca5173e930
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2020
ms.locfileid: "97729435"
---
# <a name="include-a-nuget-package-in-your-project"></a>Включение пакета NuGet в проект

NuGet — это самый популярный диспетчер пакетов для разработки .NET, который встроен в Visual Studio для Mac и Visual Studio для Windows. Вы можете искать и добавлять пакеты в своих проектах Xamarin.iOS и Xamarin.Android с помощью любой из этих IDE.

Эта статья описывает, как включить пакет NuGet в проект, и показывает цепочку инструментов, которая делает этот процесс простым и непрерывным.

## <a name="nuget-in-visual-studio-for-mac"></a>NuGet в Visual Studio для Mac

Чтобы продемонстрировать функциональные возможности пакета NuGet, мы сначала рассмотрим создание приложения и добавление в него пакета. Затем мы обсудим возможности IDE, помогающие управлять пакетами.

## <a name="create-a-new-project"></a>Создание нового проекта

Прежде всего, создайте проект с именем `HelloNuget`, как показано ниже. В этом примере показан шаблон приложения с одним представлением для iOS, но подойдет любой поддерживаемый тип проекта:

![Создание проекта iOS](media/nuget-walkthrough-NewProject.png)

## <a name="adding-a-package"></a>Добавление пакета

Открыв проект в Visual Studio для Mac, щелкните папку **Пакеты** на **Панели решения** правой кнопкой мыши и выберите пункт **Добавить пакеты**.

![Действие для добавления пакета NuGet в контекстном меню](media/nuget-walkthrough-PackagesMenu.png)

Открывается окно **Добавить пакеты**. Убедитесь, что в раскрывающемся списке "Источник" выбрано значение `nuget.org`:

![Раскрывающийся список "Источник"](media/nuget-walkthrough-Source.png)

При открытии окно загружает список пакетов из источника по умолчанию: nuget.org. Начальные результаты выглядят следующим образом:

![Список пакетов NuGet](media/nuget-walkthrough-AddPackages1.png)

Используйте поле поиска в правом верхнем углу для поиска определенного пакета, например `azure`. Если вы нашли пакет, который хотите использовать, выберите его и нажмите кнопку **Добавить пакет**, чтобы начать установку.

[Добавление пакета NuGet Azure](media/nuget-walkthrough-AddPackages2.png)

После скачивания пакет добавляется в проект. Решение изменится следующим образом:

* Узел **Ссылки** содержит список всех сборок, входящих в пакет NuGet.
* Узел **Пакеты** отображает все скачанные вами пакеты NuGet. Вы можете обновить или удалить пакет в этом списке.
* Файл **packages.config** будет добавлен в проект. Этот XML-файл используется интегрированной средой разработки для отслеживания того, на какие версии пакета указывают ссылки в этом проекте. Этот файл не следует изменять вручную, а нужно обрабатывать в системе управления версиями. Обратите внимание, что вместо файла packages.config можно использовать файл project.json. Файл project.json — это новый формат файлов пакета, появившийся в NuGet 3 и поддерживающий транзитивное восстановление. Дополнительные сведения о project.json см. в [документации по NuGet](/NuGet/Schema/Project-Json). Нужно вручную добавить файл project.json, а затем закрыть и снова открыть проект, прежде чем использовать файл project.json в Visual Studio для Mac.

## <a name="using-nuget-packages"></a>Использование пакетов NuGet

После добавления пакета NuGet и обновления ссылок проекта вы можете программировать использование API точно так же, как и любых других ссылок проекта.

Убедитесь, что добавили все необходимые директивы `using` в начало файла:

```csharp
using Newtonsoft.Json;
```

Большинство пакетов NuGet предоставляют дополнительные сведения, например файл сведений или ссылку на страницу проекта для источника Nuget. Обычно соответствующую ссылку можно найти в аннотации к пакету на странице "Добавление пакетов":

[Просмотр ссылки на страницу проекта](media/nuget-walkthrough-project-page.png)

<a name="Package_Updates" class="injected"></a>

## <a name="package-updates"></a>Обновления пакетов

Обновления пакетов можно выполнить одновременно, щелкнув правой кнопкой мыши узел **Пакеты**, или по отдельности для каждого компонента.

Щелкните правой кнопкой мыши **Пакеты**, чтобы открыть контекстное меню:

![Снимок экрана: выбранный узел "Пакеты" и контекстное меню, открывающееся щелчком правой кнопки мыши, с командами добавления пакетов, обновления версии, восстановления и обновления данных.](media/nuget-walkthrough-PackagesMenu.png)

* **Добавить пакеты** — открывает окно для добавления дополнительных пакетов в проект.
* **Обновить** — проверяет исходный сервер для каждого пакета и скачивает более новые версии.
* **Восстановить** — скачивает все отсутствующие пакеты (не обновляя существующие пакеты до более новых версий).

Параметры "Обновить" и "Восстановить" также доступны на уровне решения и затрагивают все проекты в решении.

Можно также щелкнуть отдельные пакеты правой кнопкой мыши, чтобы открыть контекстное меню:

![Снимок экрана: отдельный выбранный пакет и контекстное меню, открывающееся щелчком правой кнопки мыши, с командами обновления версии, удаления и обновления данных.](media/nuget-walkthrough-PackageMenu.png)

* **Номер версии** — элемент номера версии в меню отключен и предоставляется только в информационных целях.
* **Обновить** — проверяет исходный сервер и скачивает более новую версию (при ее наличии).
* **Удалить** — удаляет пакет из этого проекта и соответствующие сборки из ссылок проекта.

## <a name="adding-package-sources"></a>Добавление источников пакетов

Пакеты, доступные для установки, изначально получаются из nuget.org. Однако в Visual Studio для Mac можно добавить другие расположения пакетов. Это может быть удобно для тестирования собственных пакетов NuGet, находящихся на стадии разработки, или при использовании закрытого сервера NuGet внутри вашей компании или организации.

В Visual Studio для Mac перейдите в раздел **Visual Studio > Параметры > NuGet > Источники**, чтобы просмотреть и изменить список источников пакетов. Обратите внимание, что источником может быть удаленный сервер (обозначенный URL-адресом) или локальный каталог.

![Источники пакетов](media/nuget-walkthrough-PackageSource.png)

Нажмите кнопку **Добавить**, чтобы задать новый источник. Введите понятное имя и URL-адрес (или путь к файлу) для источника пакета. Если источником является защищенный веб-сервер, введите также имя пользователя и пароль, в противном случае оставьте эти поля пустыми:

![Снимок экрана: диалоговое окно "Добавление источников пакетов" с полями "Имя", "Расположение", "Имя пользователя" и "Пароль".](media/nuget-walkthrough-PackageSource2.png)

После этого при поиске пакетов можно выбрать различные источники:

![Снимок экрана: экран "Добавление пакетов" с раскрывающимся списком источников, которые можно выбрать при поиске пакетов.](media/nuget-walkthrough-PackageSource3.png)

## <a name="version-control"></a>Управление версиями

В документации по NuGet рассматривается [использование NuGet без фиксации пакетов в системе управления версиями](/nuget/consume-packages/packages-and-source-control). Если вы предпочитаете не хранить двоичные файлы и неиспользуемые сведения в системе управления версиями, можно настроить Visual Studio для Mac для автоматического восстановления пакетов с сервера. Это означает, что, когда разработчик впервые получает проект из системы управления версиями, Visual Studio для Mac автоматически скачивает и устанавливает необходимые пакеты.

![Автоматическое восстановление пакетов](media/nuget-walkthrough-AutoRestore.png)

Сведения о том, как исключить каталог `packages` из отслеживания, см. в документации по используемой системе управления версиями.

## <a name="related-video"></a>Связанные видео

> [!Video https://channel9.msdn.com/Shows/Visual-Studio-Toolbox/Visual-Studio-for-Mac-Using-NuGet/player]

## <a name="see-also"></a>См. также

* [Установка и использование пакета в Visual Studio (в Windows)](/nuget/quickstart/install-and-use-a-package-in-visual-studio)
