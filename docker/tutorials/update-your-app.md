---
title: Учебник по Docker. Часть 2. Обновление приложения
description: Описывается обновление приложения Docker.
ms.date: 08/04/2020
author: nebuk89
ms.author: ghogen
manager: jmartens
ms.topic: conceptual
ms.workload:
- azure
ms.openlocfilehash: 43034ff2e65564cc8af2710b796b76996f21f4c8
ms.sourcegitcommit: 8b75524dc544e34d09ef428c3ebbc9b09f14982d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2021
ms.locfileid: "113222777"
---
# <a name="update-the-app"></a>Обновление приложения

Вы получили от команды по продукту запрос на небольшое изменение функции: нужно изменить текст, который отображается, когда в списке дел нет элементов. Он должен выглядеть так:

> В списке дел еще нет элементов! Добавьте элемент выше.

Ничего сложного, верно? Давайте сделаем это.

## <a name="update-the-source-code"></a>Обновление исходного кода

1. В файле `src/static/js/app.js` измените строку 56, обновив сообщение о пустом списке.

    ```diff
    -                <p className="text-center">No items yet! Add one above!</p>
    +                <p className="text-center">You have no todo items yet! Add one above!</p>
    ```

1. Выполните сборку обновленной версии образа с помощью той же команды, что и ранее.

    ```bash
    docker build -t getting-started .
    ```

1. Запустите новый контейнер с обновленным кодом.

    ```bash
    docker run -dp 3000:3000 getting-started
    ```

**Ой!** Скорее всего, вы получили ошибку наподобие следующей (идентификаторы будут другими):

```bash
docker: Error response from daemon: driver failed programming external connectivity on endpoint laughing_burnell 
(bb242b2ca4d67eba76e79474fb36bb5125708ebdabd7f45c8eaf16caaabde9dd): Bind for 0.0.0.0:3000 failed: port is already allocated.
```

Что же произошло? Новый контейнер не удалось запустить, так как старый контейнер все еще выполняется. Причина проблемы заключается в том, что контейнер использует порт 3000 узла, но ожидать передачи данных через определенный порт на компьютере может только один процесс (включая контейнеры). Чтобы устранить эту проблему, удалите старый контейнер.

## <a name="replace-the-old-container"></a>Замена старого контейнера

Чтобы удалить контейнер, сначала его необходимо остановить. После остановки его можно удалить. Удалить старый контейнер можно двумя способами. Вы можете выбрать тот, который вам удобнее.

### <a name="remove-a-container-using-the-cli"></a>Удаление контейнера с помощью CLI

1. Получите идентификатор контейнера с помощью команды `docker ps`.

    ```bash
    docker ps
    ```

1. Остановите контейнер с помощью команды `docker stop`.

    ```bash
    # Swap out <the-container-id> with the ID from docker ps
    docker stop <the-container-id>
    ```

1. После остановки контейнера его можно удалить с помощью команды `docker rm`.

    ```bash
    docker rm <the-container-id>
    ```

> [!TIP]
> Вы можете отключить и удалить контейнер одной командой, добавив флаг force в команду `docker rm`. Пример: `docker rm -f <the-container-id>`

### <a name="remove-a-container-using-the-docker-view"></a>Удаление контейнера с помощью представления Docker

Открыв расширение VS Code, можно удалить контейнер двумя щелчками мыши! Это, несомненно, намного проще, чем сначала искать идентификатор контейнера, а затем удалять его.

1. Открыв расширение, перейдите к контейнеру и щелкните его правой кнопкой мыши.

1. Выберите пункт **Удалить**.

1. Подтвердите удаление, и на этом всё!

![Представление Docker — удаление контейнера](media/vs-removing-container.png)

### <a name="start-the-updated-app-container"></a>Запуск обновленного контейнера приложения

1. Теперь запустите обновленное приложение.

    ```bash
    docker run -dp 3000:3000 getting-started
    ```

1. Обновите страницу [http://localhost:3000](http://localhost:3000) в браузере, и вы увидите новый текст.

![Приложение с новым сообщением о пустом списке](media/todo-list-updated-empty-text.png)

## <a name="recap"></a>Резюме

Хотя сборка обновления удалась, вы могли обратить внимание на два момента.

- Все элементы, имевшиеся в списке дел, исчезли. Это не то, чего мы хотели. Мы обсудим это немного позднее.
- Такое небольшое изменение потребовало *множества* действий. В следующем разделе вы узнаете, как просматривать результаты изменения кода без повторной сборки и запуска нового контейнера после внесения каждого изменения.

Перед тем как переходить к рассмотрению сохраняемости, вы быстро ознакомитесь с тем, как предоставлять образы другим пользователям.

## <a name="next-steps"></a>Дальнейшие действия

Продолжайте изучать учебник.

> [!div class="nextstepaction"]
> [Совместное использование приложения](share-your-app.md)
