---
title: Учебник по Docker. Часть 3. Общий доступ к приложению
description: Описание порядка предоставления общего доступа к образам Docker с помощью реестра Docker Hub.
ms.date: 08/04/2020
author: nebuk89
ms.author: ghogen
manager: jmartens
ms.topic: conceptual
ms.workload:
- azure
ms.openlocfilehash: d64d10c7abefc14f31c39c3b8397e95cec67e9f4
ms.sourcegitcommit: 8b75524dc544e34d09ef428c3ebbc9b09f14982d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2021
ms.locfileid: "113222790"
---
# <a name="share-your-app"></a>Общий доступ к приложению

Теперь, когда мы создали образ, давайте поделимся им! Для предоставления общего доступа к образам Docker необходимо использовать реестр Docker. Реестр по умолчанию — это Docker Hub, откуда берутся все используемые нами образы.

## <a name="create-a-repo"></a>Создание репозитория

Чтобы отправить образ, необходимо сначала создать репозиторий в Docker Hub.

1. Перейдите в [Docker Hub](https://hub.docker.com/signup/msftedge?utm_source=msftedge) и при необходимости выполните вход.

1. Нажмите кнопку **Create repository** (Создать репозиторий).

1. В качестве имени репозитория используйте `getting-started`. Убедитесь, что параметр Visibility (Видимость) имеет значение `Public`.

1. Нажмите кнопку **Создать**.

С правой стороны страницы вы увидите раздел с названием **Команды Docker**. В нем находится пример команды, которую вам нужно выполнить для отправки образа в этот репозиторий.

![Пример команды отправки Docker](media/push-command.png)

## <a name="push-the-image"></a>Отправка образа

1. В командной строке попробуйте выполнить команду push, которую вы видите в Docker Hub. Обратите внимание, что ваша команда будет использовать ваше пространство имен, а не "docker".

    ```plaintext
    $ docker push docker/getting-started
    The push refers to repository [docker.io/docker/getting-started]
    An image does not exist locally with the tag: docker/getting-started
    ```

    Почему не удалось выполнить эту команду? Команда push искала образ с именем docker/getting-started, но не нашла его. Если вы запустите `docker image ls`, вы его тоже не увидите.

    Чтобы исправить это, вам нужно "пометить" существующий образ, который мы создали, чтобы дать ему другое имя.

1. Войдите в Docker Hub с помощью команды `docker login -u <username>`.

1. С помощью команды `docker tag` назначьте образу `getting-started` новое имя. Обязательно замените `<username>` на свой идентификатор Docker.

    ```bash
    docker tag getting-started <username>/getting-started
    ```

1. Теперь попробуйте еще раз выполнить команду push. Если вы копируете значение из Docker Hub, можно отбросить часть `tagname`, так как вы не добавляли тег к имени образа. Если не указать тег, Docker будет использовать тег с именем `latest`.

    ```bash
    docker push <username>/getting-started
    ```

    Вместо использования командной строки можно щелкнуть правой кнопкой мыши тег образа в разделе **Images** (Образы) представления Docker и последовательно выбрать **Push…** (Отправка), **Connect registry…** (Подключить реестр) и **Docker Hub**.

## <a name="run-the-image-on-a-new-instance"></a>Запуск образа в новом экземпляре

Теперь, когда образ создан и помещен в реестр, попробуйте запустить приложение в совершенно новом экземпляре, который никогда не видел этот образ контейнера. Для этого вы будете использовать тестовую площадку Play with Docker (PWD).

1. Откройте [Play with Docker](http://play-with-docker.com) в браузере.

1. Войдите со своей учетной записью Docker Hub.

1. После входа щелкните ссылку "+ ADD NEW INSTANCE" (Добавить новый экземпляр) на левой панели. (Если вы ее не видите, сделайте свой браузер немного шире.) Через несколько секунд в браузере откроется окно терминала.

    ![Play with Docker — добавление нового экземпляра](media/pwd-add-new-instance.png)

1. В окне терминала запустите недавно отправленное приложение.

    ```bash
    docker run -dp 3000:3000 <username>/getting-started
    ```

    Вы должны увидеть, что образ извлекается и в итоге запускается.

1. Щелкните индикатор 3000, когда он появится, и вы увидите приложение с вашими изменениями! Поздравляем! Если индикатор 3000 не отображается, можно нажать кнопку **Открыть порт** и ввести 3000.

## <a name="recap"></a>Резюме

В этом разделе вы узнали, как предоставлять общий доступ к образам, отправляя их в реестр. Затем вы перешли в совершенно новый экземпляр и смогли запустить только что отправленный образ. Это довольно распространенная ситуация в конвейерах CI — конвейер создает образ и помещает его в реестр, а затем рабочая среда может использовать последнюю версию образа.

Теперь, когда вы об этом узнали, вспомните, что в конце последнего раздела после перезапуска приложения вы потеряли все элементы списка задач. Итак, очевидно, что это не лучший пользовательский интерфейс, но дальше вы узнаете, как сохранить данные при перезапусках.

## <a name="next-steps"></a>Дальнейшие действия

Продолжайте изучать учебник.

> [!div class="nextstepaction"]
> [Сохранение базы данных](persist-your-data.md)
